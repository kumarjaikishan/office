import{l as je,m as be,r as c,n as ve,o as ss,p as as,q as ts,t as ns,v as rs,j as e,w as Q,x as ue,z as Ne,D as We,E as te,G as is,H as ce,P as os,J as ls,c as xe,K as Re,y as K,L as Be,Q as ds,R as Ge,U as Ue,h as Ae,V as Le,W as _e,X as cs,Y as us,Z as xs,_ as hs,$ as ms,a0 as ps,a1 as gs,a2 as fs,a3 as js,a4 as bs,a5 as vs,a6 as Ns,u as Cs,g as ws,a as As,a7 as Ss,a8 as He,a9 as qe,aa as ys,ab as Es,A as Oe,ac as Z,T as re,ad as Is,b as h,i as Se,ae as ks,F as ie,I as oe,S as le,M as G,O as Ye,C as Ve,B as ee,af as Ps,ag as zs,ah as Ds,ai as Rs,aj as Ms,ak as ye,al as Je}from"./index-BaIBXqin.js";import{I as Ke}from"./index-Cj42J_MR.js";import{M as Ee}from"./Modalbox-X3bjswJ0.js";import{B as Ts,P as $s,L as Fs}from"./index-D1Ht_FL6.js";import{u as Ws}from"./imageresizer-D4I-KFLq.js";import{C as Ie}from"./CheckPermission-BNzHneqZ.js";function Bs(t){return je("MuiCollapse",t)}be("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Gs=t=>{const{orientation:i,classes:l}=t,a={root:["root",`${i}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${i}`],wrapperInner:["wrapperInner",`${i}`]};return Ne(a,Bs,l)},Us=Q("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,i)=>{const{ownerState:l}=t;return[i.root,i[l.orientation],l.state==="entered"&&i.entered,l.state==="exited"&&!l.in&&l.collapsedSize==="0px"&&i.hidden]}})(te(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:i})=>i.state==="exited"&&!i.in&&i.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),Ls=Q("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),_s=Q("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),De=c.forwardRef(function(i,l){const a=ve({props:i,name:"MuiCollapse"}),{addEndListener:u,children:m,className:j,collapsedSize:b="0px",component:x,easing:W,in:R,onEnter:k,onEntered:A,onEntering:M,onExit:C,onExited:P,onExiting:v,orientation:N="vertical",style:T,timeout:S=ss.standard,TransitionComponent:U=as,...O}=a,E={...a,orientation:N,collapsedSize:b},w=Gs(E),y=ts(),ne=ns(),f=c.useRef(null),z=c.useRef(),p=typeof b=="number"?`${b}px`:b,L=N==="horizontal",_=L?"width":"height",Y=c.useRef(null),V=rs(l,Y),o=d=>$=>{if(d){const F=Y.current;$===void 0?d(F):d(F,$)}},I=()=>f.current?f.current[L?"clientWidth":"clientHeight"]:0,X=o((d,$)=>{f.current&&L&&(f.current.style.position="absolute"),d.style[_]=p,k&&k(d,$)}),he=o((d,$)=>{const F=I();f.current&&L&&(f.current.style.position="");const{duration:se,easing:J}=We({style:T,timeout:S,easing:W},{mode:"enter"});if(S==="auto"){const ge=y.transitions.getAutoHeightDuration(F);d.style.transitionDuration=`${ge}ms`,z.current=ge}else d.style.transitionDuration=typeof se=="string"?se:`${se}ms`;d.style[_]=`${F}px`,d.style.transitionTimingFunction=J,M&&M(d,$)}),me=o((d,$)=>{d.style[_]="auto",A&&A(d,$)}),Ce=o(d=>{d.style[_]=`${I()}px`,C&&C(d)}),pe=o(P),we=o(d=>{const $=I(),{duration:F,easing:se}=We({style:T,timeout:S,easing:W},{mode:"exit"});if(S==="auto"){const J=y.transitions.getAutoHeightDuration($);d.style.transitionDuration=`${J}ms`,z.current=J}else d.style.transitionDuration=typeof F=="string"?F:`${F}ms`;d.style[_]=p,d.style.transitionTimingFunction=se,v&&v(d)}),g=d=>{S==="auto"&&ne.start(z.current||0,d),u&&u(Y.current,d)};return e.jsx(U,{in:R,onEnter:X,onEntered:me,onEntering:he,onExit:Ce,onExited:pe,onExiting:we,addEndListener:g,nodeRef:Y,timeout:S==="auto"?null:S,...O,children:(d,{ownerState:$,...F})=>e.jsx(Us,{as:x,className:ue(w.root,j,{entered:w.entered,exited:!R&&p==="0px"&&w.hidden}[d]),style:{[L?"minWidth":"minHeight"]:p,...T},ref:V,ownerState:{...E,state:d},...F,children:e.jsx(Ls,{ownerState:{...E,state:d},className:w.wrapper,ref:f,children:e.jsx(_s,{ownerState:{...E,state:d},className:w.wrapperInner,children:m})})})})});De&&(De.muiSupportAuto=!0);const Qe=c.createContext({});function Hs(t){return je("MuiAccordion",t)}const fe=be("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),qs=t=>{const{classes:i,square:l,expanded:a,disabled:u,disableGutters:m}=t;return Ne({root:["root",!l&&"rounded",a&&"expanded",u&&"disabled",!m&&"gutters"],heading:["heading"],region:["region"]},Hs,i)},Os=Q(os,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,i)=>{const{ownerState:l}=t;return[{[`& .${fe.region}`]:i.region},i.root,!l.square&&i.rounded,!l.disableGutters&&i.gutters]}})(te(({theme:t})=>{const i={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],i),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],i)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${fe.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${fe.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),te(({theme:t})=>({variants:[{props:i=>!i.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:i=>!i.disableGutters,style:{[`&.${fe.expanded}`]:{margin:"16px 0"}}}]}))),Ys=Q("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),ke=c.forwardRef(function(i,l){const a=ve({props:i,name:"MuiAccordion"}),{children:u,className:m,defaultExpanded:j=!1,disabled:b=!1,disableGutters:x=!1,expanded:W,onChange:R,square:k=!1,slots:A={},slotProps:M={},TransitionComponent:C,TransitionProps:P,...v}=a,[N,T]=is({controlled:W,default:j,name:"Accordion",state:"expanded"}),S=c.useCallback(I=>{T(!N),R&&R(I,!N)},[N,R,T]),[U,...O]=c.Children.toArray(u),E=c.useMemo(()=>({expanded:N,disabled:b,disableGutters:x,toggle:S}),[N,b,x,S]),w={...a,square:k,disabled:b,disableGutters:x,expanded:N},y=qs(w),ne={transition:C,...A},f={transition:P,...M},z={slots:ne,slotProps:f},[p,L]=ce("root",{elementType:Os,externalForwardedProps:{...z,...v},className:ue(y.root,m),shouldForwardComponentProp:!0,ownerState:w,ref:l,additionalProps:{square:k}}),[_,Y]=ce("heading",{elementType:Ys,externalForwardedProps:z,className:y.heading,ownerState:w}),[V,o]=ce("transition",{elementType:De,externalForwardedProps:z,ownerState:w});return e.jsxs(p,{...L,children:[e.jsx(_,{...Y,children:e.jsx(Qe.Provider,{value:E,children:U})}),e.jsx(V,{in:N,timeout:"auto",...o,children:e.jsx("div",{"aria-labelledby":U.props.id,id:U.props["aria-controls"],role:"region",className:y.region,children:O})})]})});function Vs(t){return je("MuiAccordionDetails",t)}be("MuiAccordionDetails",["root"]);const Js=t=>{const{classes:i}=t;return Ne({root:["root"]},Vs,i)},Ks=Q("div",{name:"MuiAccordionDetails",slot:"Root"})(te(({theme:t})=>({padding:t.spacing(1,2,2)}))),Pe=c.forwardRef(function(i,l){const a=ve({props:i,name:"MuiAccordionDetails"}),{className:u,...m}=a,j=a,b=Js(j);return e.jsx(Ks,{className:ue(b.root,u),ref:l,ownerState:j,...m})});function Qs(t){return je("MuiAccordionSummary",t)}const de=be("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Xs=t=>{const{classes:i,expanded:l,disabled:a,disableGutters:u}=t;return Ne({root:["root",l&&"expanded",a&&"disabled",!u&&"gutters"],focusVisible:["focusVisible"],content:["content",l&&"expanded",!u&&"contentGutters"],expandIconWrapper:["expandIconWrapper",l&&"expanded"]},Qs,i)},Zs=Q(ls,{name:"MuiAccordionSummary",slot:"Root"})(te(({theme:t})=>{const i={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],i),[`&.${de.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${de.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${de.disabled})`]:{cursor:"pointer"},variants:[{props:l=>!l.disableGutters,style:{[`&.${de.expanded}`]:{minHeight:64}}}]}})),ea=Q("span",{name:"MuiAccordionSummary",slot:"Content"})(te(({theme:t})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:i=>!i.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${de.expanded}`]:{margin:"20px 0"}}}]}))),sa=Q("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(te(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${de.expanded}`]:{transform:"rotate(180deg)"}}))),ze=c.forwardRef(function(i,l){const a=ve({props:i,name:"MuiAccordionSummary"}),{children:u,className:m,expandIcon:j,focusVisibleClassName:b,onClick:x,slots:W,slotProps:R,...k}=a,{disabled:A=!1,disableGutters:M,expanded:C,toggle:P}=c.useContext(Qe),v=f=>{P&&P(f),x&&x(f)},N={...a,expanded:C,disabled:A,disableGutters:M},T=Xs(N),S={slots:W,slotProps:R},[U,O]=ce("root",{ref:l,shouldForwardComponentProp:!0,className:ue(T.root,m),elementType:Zs,externalForwardedProps:{...S,...k},ownerState:N,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:A,"aria-expanded":C,focusVisibleClassName:ue(T.focusVisible,b)},getSlotProps:f=>({...f,onClick:z=>{var p;(p=f.onClick)==null||p.call(f,z),v(z)}})}),[E,w]=ce("content",{className:T.content,elementType:ea,externalForwardedProps:S,ownerState:N}),[y,ne]=ce("expandIconWrapper",{className:T.expandIconWrapper,elementType:sa,externalForwardedProps:S,ownerState:N});return e.jsxs(U,{...O,children:[e.jsx(E,{...w,children:u}),j&&e.jsx(y,{...ne,children:j})]})}),aa=[{name:"S.no",selector:t=>t.sno,width:"40px"},{name:"Name",selector:t=>t.name},{name:"Email",selector:t=>t.email},{name:"Department",selector:t=>t.department},{name:"Action",selector:t=>t.action,width:"180px"}],ta=async({formData:t,dispatch:i,setisload:l,setInp:a,setopenmodal:u,init:m,resetPhoto:j})=>{const b=localStorage.getItem("emstoken");l(!0);try{const x=await xe.post("/api/addemployee",t,{headers:{Authorization:`Bearer ${b}`,"Content-Type":"multipart/form-data"}});K.success(x.data.message,{autoClose:1200}),a(m),j(),u(!1),i(Re())}catch(x){console.log(x),x.response?K.warn(x.response.data.message,{autoClose:1200}):console.error("Error:",x.message)}finally{l(!1)}},na=async({formData:t,dispatch:i,setEmployeePhoto:l,setisload:a,setInp:u,setopenmodal:m,init:j})=>{const b=localStorage.getItem("emstoken");a(!0);try{const x=await xe.post("/api/updateemployee",t,{headers:{Authorization:`Bearer ${b}`}});K.success(x.data.message,{autoClose:1200}),l(null),u(j),m(!1),i(Re())}catch(x){console.log(x),x.response?K.warn(x.response.data.message,{autoClose:1200}):x.request?console.error("No response from server:",x.request):console.error("Error:",x.message)}finally{a(!1)}},ra=async({employeeId:t,setisload:i,dispatch:l})=>{if(!t){alert("All fileds are Required");return}const a=localStorage.getItem("emstoken");i(!0);try{const u=await xe.post("/api/deleteemployee",{employeeId:t},{headers:{Authorization:`Bearer ${a}`}});l(Re()),K.success(u.data.message,{autoClose:1200})}catch(u){console.log(u),u.response?K.warn(u.response.data.message,{autoClose:1200}):u.request?console.error("No response from server:",u.request):console.error("Error:",u.message)}finally{i(!1)}},ia=({viewEmployee:t})=>{var b,x,W,R,k,A,M;const[i,l]=c.useState(!1),[a,u]=c.useState(null),[m,j]=c.useState(1);return c.useEffect(()=>{(async()=>{const P=localStorage.getItem("emstoken");l(!0);try{const v=await xe.get(`/api/getemployee?empid=${t}`,{headers:{Authorization:`Bearer ${P}`}});console.log("employee fetch Query:",v.data),u(v.data)}catch(v){console.log(v),v.response?K.warn(v.response.data.message,{autoClose:1200}):v.request?console.error("No response from server:",v.request):console.error("Error:",v.message)}finally{l(!1)}})()},[]),e.jsx(e.Fragment,{children:i?e.jsxs("div",{className:"w-full h-[300px] flex gap-5 flex-col justify-center items-center bg-white",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:"animate-spin",style:{animationDuration:"2.5s"},size:50,color:"teal"}),e.jsx(Be,{className:"absolute -bottom-4 left-0 animate-spin",style:{animationDuration:"3s"},size:20,color:"teal"})]}),e.jsx("p",{className:"text-teal-600",children:"loading..."})]}):e.jsxs("div",{className:"max-w-3xl mx-auto bg-white flex flex-col shadow rounded-lg p-2 md:p-4 ",children:[e.jsx("h2",{className:"text-xl mx-auto font-semibold text-gray-700 mb-4",children:"Employee Details"}),e.jsxs("div",{className:"flex gap-4  pb-2 md:items-start",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full border-2 border-teal-500 border-dashed p-[2px] flex items-center justify-center overflow-hidden",children:a!=null&&a.profileimage?e.jsx("img",{src:a.profileimage,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):e.jsx(ds,{className:"text-3xl text-gray-500"})}),e.jsxs("div",{className:"md:flex-1 w-auto",children:[e.jsx("h3",{className:"text-l md:text-xl capitalize font-bold text-gray-800",children:(b=a==null?void 0:a.userid)==null?void 0:b.name}),e.jsx("p",{className:"text-sm text-gray-600",children:(x=a==null?void 0:a.userid)==null?void 0:x.role}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded",children:a==null?void 0:a.department.department}),e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-800 text-xs rounded",children:"active"})]}),e.jsxs("div",{className:"hidden md:flex mt-3 justify-start flex-wrap text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Ge,{className:"text-gray-500 lowercase"})," ",(W=a==null?void 0:a.userid)==null?void 0:W.email]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Ue,{className:"text-gray-500"})," ",(a==null?void 0:a.phone)||"N/A"]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Le,{className:"text-gray-500"})," ",Ae((R=a==null?void 0:a.userid)==null?void 0:R.createdAt).format("DD MMM, YYYY")]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(_e,{className:"text-gray-500"})," ID: emp0002"]})]})]})]}),e.jsxs("div",{className:"md:hidden mt-3 justify-start flex flex-wrap text-[12px] md:text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Ge,{className:"text-gray-500 lowercase"})," ",(k=a==null?void 0:a.userid)==null?void 0:k.email]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Ue,{className:"text-gray-500"})," ",(a==null?void 0:a.phone)||"N/A"]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Le,{className:"text-gray-500"})," ",Ae((A=a==null?void 0:a.userid)==null?void 0:A.createdAt).format("DD MMM, YYYY")]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(_e,{className:"text-gray-500"})," ID: emp0002"]})]}),e.jsxs("div",{className:"pt-1 capitalize",children:[e.jsxs("div",{className:"flex gap-2 md:gap-6 bg-slate-200 p-1 mt-2 text-[12px] md:text-sm font-medium text-gray-700",children:[e.jsx("div",{onClick:()=>j(1),className:`${m==1?"bg-white":"text-gray-400"} w-1/3 cursor-pointer py-1.5 text-center rounded`,children:"Personal Info"}),e.jsx("div",{onClick:()=>j(2),className:`${m==2?"bg-white":"text-gray-400"} w-1/3 cursor-pointer py-1.5 text-center rounded`,children:"Employment"}),e.jsx("div",{onClick:()=>j(3),className:`${m==3?"bg-white":"text-gray-400"} w-1/3 cursor-pointer py-1.5 text-center rounded`,children:"Documents & Skills"})]}),m==1&&e.jsxs("div",{className:"mt-2 grid grid-cols-2 max-h-[300px] overflow-y-auto md:grid-cols-2 gap-4 text-[12px] md:text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(cs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Date of Birth"}),e.jsx("div",{children:a!=null&&a.dob?Ae(a==null?void 0:a.dob).format("DD MMM,YYYY"):"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(us,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Address"}),e.jsx("div",{children:(a==null?void 0:a.address)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(xs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Emergency Contact"}),e.jsx("div",{children:(a==null?void 0:a.Emergencyphone)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ts,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Blood Group"}),e.jsx("div",{children:(a==null?void 0:a.bloodGroup)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(hs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Adhaar No."}),e.jsx("div",{children:(a==null?void 0:a.adhaar)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ms,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Pan No."}),e.jsx("div",{children:(a==null?void 0:a.pan)||"N/A"})]})]})]}),m==2&&e.jsxs("div",{className:"mt-2 grid grid-cols-2 max-h-[300px] overflow-y-auto md:grid-cols-2 gap-4 text-[12px] md:text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($s,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Position"}),e.jsx("div",{children:(a==null?void 0:a.designation)||"Accounts"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ps,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Department"}),e.jsx("div",{children:((M=a==null?void 0:a.department)==null?void 0:M.department)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(gs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Salary"}),e.jsx("div",{children:(a==null?void 0:a.salary)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(fs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Bank Name"}),e.jsx("div",{children:(a==null?void 0:a.bankName)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(js,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Account Holder"}),e.jsx("div",{children:(a==null?void 0:a.acHolderName)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(bs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Branch"}),e.jsx("div",{children:(a==null?void 0:a.bankbranch)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(vs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"A/C No."}),e.jsx("div",{children:(a==null?void 0:a.acnumber)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ns,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Ifsc Code"}),e.jsx("div",{children:(a==null?void 0:a.ifscCode)||"N/A"})]})]})]}),m==3&&e.jsxs("div",{className:"mt-2 p-2 grid grid-cols-1 max-h-[300px] overflow-y-auto sm:grid-cols-2 gap-4 text-[12px] md:text-sm text-gray-700",children:[e.jsxs("div",{className:"rounded border border-gray-300 bg-white p-2 md:p-4 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Education"}),a.education.length>0?a.education.map(C=>e.jsxs("div",{className:"relative my-1 pl-2 rounded overflow-hidden",children:[e.jsx("p",{className:"text-gray-700 font-semibold",children:C.degree}),e.jsx("p",{className:"text-gray-700",children:C.institution}),e.jsx("p",{className:"text-gray-500 text-[10px]",children:C.date}),e.jsx("span",{className:"absolute w-0.5 h-full bg-amber-800 top-0 left-0"})]})):e.jsx("div",{children:"No Data found"})]}),e.jsxs("div",{className:"rounded border border-gray-300 bg-white p-2 md:p-4 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Achievement"}),a.achievements.length>0?a.achievements.map(C=>e.jsxs("div",{className:"relative my-1 pl-5 rounded overflow-hidden",children:[e.jsx("p",{className:"text-gray-700 font-semibold",children:C.title}),e.jsx("p",{className:"text-gray-700",children:C.description}),e.jsx("p",{className:"text-gray-500 text-[10px]",children:C.date}),e.jsxs("span",{className:"absolute top-1 -left-0",children:[" ",e.jsx(Fs,{size:18,color:"orange"})," "]}),e.jsx("span",{className:"absolute w-0.5 h-full bg-blue-500 top-0 right-0"})]})):e.jsx("div",{children:"No Achievement found"})]})]})]})]})})},ha=()=>{var $e,Fe;const[t,i]=c.useState(!1),[l,a]=c.useState(!1),[u,m]=c.useState([]),[j,b]=c.useState([]),[x,W]=c.useState(!1),[R,k]=c.useState(!1),[A,M]=c.useState(!1),[C,P]=c.useState(null),[v,N]=c.useState(null),[T,S]=c.useState(null),{handleImage:U}=Ws(),O=Cs(),{department:E,branch:w,employee:y,profile:ne}=ws(s=>s.user),[f,z]=c.useState({userid:"",pass:""}),[p,L]=c.useState({searchText:"",branch:"all",department:"all"}),_="https://res.cloudinary.com/dusxlxlvm/image/upload/v1753113610/ems/assets/employee_fi3g5p.webp";c.useEffect(()=>{L(s=>({...s,department:"all"}))},[p.branch]);let Y=As();const V={employeeId:"",branchId:"",department:"",employeeName:"",email:"",designation:"",phone:"",address:"",gender:"male",bloodGroup:"",dob:"",Emergencyphone:"",skills:[],maritalStatus:!0,salary:0,acHolderName:"",bankName:"",bankbranch:"",acnumber:"",ifscCode:"",upi:"",adhaar:"",pan:"",achievements:[],education:[]},[o,I]=c.useState(V);c.useEffect(()=>{E.length>0&&b(E.filter(s=>{var r;return((r=s==null?void 0:s.branchId)==null?void 0:r._id)==p.branch}))},[p.branch]);const X=(s,r,n,D)=>{const B=[...o[r]];B[n][D]=s.target.value,I(H=>({...H,[r]:B}))},he=s=>{const r=s==="achievements"?{title:"",description:"",date:""}:{degree:"",institution:"",date:""};I(n=>({...n,[s]:[...n[s],r]}))},me=(s,r)=>{const n=o[s].filter((D,B)=>B!==r);I(D=>({...D,[s]:n}))},Ce=Ie("employee",2),pe=Ie("employee",3),we=Ie("employee",4);c.useEffect(()=>{if((y==null?void 0:y.length)<1)return;let s=1;const r=y==null?void 0:y.map(n=>{var D,B,H,q,ae;return{id:n._id,sno:s++,rawname:(D=n==null?void 0:n.userid)==null?void 0:D.name,name:e.jsxs("div",{className:"flex items-center capitalize gap-3 ",children:[e.jsx(Oe,{src:n.profileimage||_,alt:n.employeename,children:!n.profileimage&&_}),e.jsxs(Z,{children:[e.jsx(re,{variant:"body2",children:(B=n==null?void 0:n.userid)==null?void 0:B.name}),e.jsxs("p",{className:"t text-[10px] text-gray-600",children:["(",n==null?void 0:n.designation,")"]})]})]}),email:(H=n==null?void 0:n.userid)==null?void 0:H.email,branch:n==null?void 0:n.branchId,department:(q=n==null?void 0:n.department)==null?void 0:q.department,departmentid:(ae=n==null?void 0:n.department)==null?void 0:ae._id,action:e.jsxs("div",{className:"action flex gap-2.5",children:[e.jsx("span",{className:"eye edit text-[18px] text-green-500 cursor-pointer",title:"View Profile",onClick:()=>{S(n._id),W(!0)},children:e.jsx(Ss,{})}),e.jsx("span",{className:"eye edit text-[18px] text-amber-500 cursor-pointer",title:"Attandence Report",onClick:()=>Y(`/dashboard/performance/${n.userid._id}`),children:e.jsx(He,{})}),e.jsx("span",{className:"eye edit text-[18px] text-amber-500 cursor-pointer",title:"Payroll",onClick:()=>Y(`/dashboard/viewpayroll/${n.userid._id}`),children:e.jsx(He,{})}),pe&&e.jsx("span",{className:"edit text-[18px] text-blue-500 cursor-pointer",title:"Edit",onClick:()=>Xe(n),children:e.jsx(qe,{})}),pe&&e.jsxs("span",{className:"eye edit text-[18px] text-green-500 cursor-pointer",title:"Reset Password",onClick:()=>{z({...f,userid:n.userid._id}),k(!0)},children:[e.jsx(ys,{})," "]}),we&&e.jsx("span",{className:"delete text-[18px] text-red-500 cursor-pointer",onClick:()=>Ze(n._id),children:e.jsx(Es,{})})]})}});m(r)},[y]);const g=(s,r)=>{I({...o,[r]:s.target.value})},d=(s,r)=>{L(n=>({...n,[s]:r}))},$=s=>{const r=s.target.files[0];if(N(r),r){const n=new FileReader;n.onloadend=()=>{P(n.result)},n.readAsDataURL(r)}else P(null)},F=async s=>{s.preventDefault();const r=new FormData;if(r.append("employeeName",o.employeeName),r.append("branchId",o.branchId),r.append("department",o.department),r.append("email",o.email),r.append("designation",o.designation),r.append("salary",o.salary),v){let n=await U(300,v);r.append("photo",n)}await ta({formData:r,dispatch:O,setisload:a,setInp:I,setopenmodal:i,init:V,resetPhoto:J})},se=async()=>{const s=new FormData;if(Object.keys(o).forEach(r=>{const n=o[r];Array.isArray(n)||typeof n=="object"?s.append(r,JSON.stringify(n)):s.append(r,n)}),v){let r=await U(300,v);s.append("photo",r)}await na({formData:s,dispatch:O,setisload:a,setEmployeePhoto:N,setInp:I,setopenmodal:i,init:V,resetPhoto:J}),P(null),N(null)},J=()=>{P(null),N(null)},ge=async s=>{s.preventDefault();try{const r=localStorage.getItem("emstoken"),n=await xe.post("/api/updatepassword",{pass:f},{headers:{Authorization:`Bearer ${r}`}});z({userid:"",pass:""}),k(!1),K.success(n.data.message,{autoClose:1200})}catch(r){console.log(r),r.response?K.warn(r.response.data.message,{autoClose:1200}):r.request?console.error("No response from server:",r.request):console.error("Error:",r.message)}},Xe=s=>{var r,n,D;M(!0),I({employeeId:s._id,branchId:s==null?void 0:s.branchId,department:(r=s==null?void 0:s.department)==null?void 0:r._id,employeeName:(n=s==null?void 0:s.userid)==null?void 0:n.name,email:(D=s==null?void 0:s.userid)==null?void 0:D.email,dob:s==null?void 0:s.dob,salary:s==null?void 0:s.salary,acHolderName:s==null?void 0:s.acHolderName,bankName:s==null?void 0:s.bankName,bankbranch:s==null?void 0:s.bankbranch,acnumber:s==null?void 0:s.acnumber,ifscCode:s==null?void 0:s.ifscCode,upi:s==null?void 0:s.upi,adhaar:s==null?void 0:s.adhaar,pan:s==null?void 0:s.pan,designation:s==null?void 0:s.designation,phone:s==null?void 0:s.phone,address:(s==null?void 0:s.address)||"",gender:(s==null?void 0:s.gender)||"male",bloodGroup:s==null?void 0:s.bloodGroup,Emergencyphone:s==null?void 0:s.Emergencyphone,skills:s==null?void 0:s.skills,maritalStatus:(s==null?void 0:s.maritalStatus)||!0,achievements:s==null?void 0:s.achievements,education:s==null?void 0:s.education}),s.profileimage&&P(s.profileimage),i(!0)},Ze=s=>{Is({title:"Are you sure?",text:"Once deleted, you will not be able to recover this",icon:"warning",buttons:!0,dangerMode:!0}).then(async r=>{r&&ra({employeeId:s,setisload:a,dispatch:O})})},Me=c.useRef(null),Te=u==null?void 0:u.filter(s=>{var ae;const r=((ae=s.rawname)==null?void 0:ae.toLowerCase())||"",n=s.departmentid||"",D=s.branch||"",B=p.searchText.trim()===""||r.includes(p.searchText.toLowerCase()),H=p.department==="all"||n===p.department,q=p.branch==="all"||D===p.branch;return B&&H&&q}),es=()=>{const s=["S.No","Name","Email","Department"],r=Te.map((q,ae)=>[ae+1,q.rawname,q.email,q.department]),n=[s,...r].map(q=>q.join(",")).join(`
`),D=new Blob([n],{type:"text/csv"}),B=URL.createObjectURL(D),H=document.createElement("a");H.href=B,H.download="Employee List.csv",H.click(),URL.revokeObjectURL(B)};return e.jsxs("div",{className:"employee p-1",children:[e.jsxs("div",{className:"flex gap-5 justify-between items-center flex-wrap",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-1 w-full md:w-fit",children:[e.jsx(h,{size:"small",className:"md:col-span-1 md:max-w-[160px] col-span-2",value:p.searchText,onChange:s=>d("searchText",s.target.value),InputProps:{startAdornment:e.jsx(Se,{position:"start",children:e.jsx(ks,{})})},label:"Search Employee"}),e.jsxs(ie,{size:"small",className:" md:max-w-[160px] col-span-1",children:[e.jsx(oe,{children:"Branch"}),e.jsxs(le,{label:"Branch",value:p.branch,input:e.jsx(Ye,{startAdornment:e.jsx(Se,{position:"start",children:e.jsx(Ve,{fontSize:"small"})}),label:"Branch"}),onChange:s=>d("branch",s.target.value),children:[e.jsx(G,{value:"all",children:"All"}),w==null?void 0:w.map(s=>e.jsx(G,{value:s._id,children:s.name},s._id))]})]}),e.jsxs(ie,{size:"small",className:" md:max-w-[160px] col-span-1",children:[e.jsx(oe,{children:"Department"}),e.jsxs(le,{label:"Department",disabled:p.branch==="all",value:p.department,input:e.jsx(Ye,{startAdornment:e.jsx(Se,{position:"start",children:e.jsx(Ve,{fontSize:"small"})}),label:"Department"}),onChange:s=>d("department",s.target.value),children:[e.jsx(G,{value:"all",children:"All"}),j.length>0?j.map(s=>e.jsx(G,{value:s._id,children:s.department},s._id)):e.jsx(G,{disabled:!0,children:"No departments found"})]})]})]}),e.jsxs("div",{className:"flex gap-1 w-full md:w-fit",children:[e.jsx(ee,{variant:"outlined",className:"flex-1 md:w-fit md:flex-none",onClick:es,startIcon:e.jsx(Ps,{}),children:"Export"}),Ce&&e.jsx(ee,{variant:"contained",className:"flex-[2] md:w-fit md:flex-none",startIcon:e.jsx(zs,{}),onClick:()=>i(!0),children:"Add Employee"})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(Ds,{columns:aa,data:Te,pagination:!0,customStyles:Rs(),highlightOnHover:!0,paginationRowsPerPageOptions:[10,20,50,100],noDataComponent:e.jsxs("div",{className:"flex items-center gap-2 py-6 text-center text-gray-600 text-sm",children:[e.jsx(Ms,{className:"text-xl"})," No Employee records found."]})})}),e.jsx(Ee,{open:t,onClose:()=>{i(!1),M(!1),I(V),J()},children:e.jsx("div",{className:"membermodal",children:e.jsx("div",{className:"whole",children:e.jsxs("form",{onSubmit:F,children:[e.jsx("div",{className:"modalhead",children:A?"Update Employee":"Add Employee"}),e.jsxs("span",{className:"modalcontent ",children:[e.jsxs(ie,{fullWidth:!0,required:!0,size:"small",children:[e.jsx(oe,{children:"Branch"}),e.jsx(le,{value:o.branchId,label:"branch",onChange:s=>g(s,"branchId"),children:w==null?void 0:w.map(s=>e.jsx(G,{value:s._id,children:s.name},s._id))})]}),e.jsxs(ie,{disabled:!o.branchId,fullWidth:!0,required:!0,size:"small",children:[e.jsx(oe,{children:"Department"}),e.jsx(le,{value:o.department,label:"Department",onChange:s=>g(s,"department"),children:(E==null?void 0:E.filter(s=>{var r;return((r=s.branchId)==null?void 0:r._id)===o.branchId}).length)>0?E.filter(s=>s.branchId._id===o.branchId).map(s=>e.jsx(G,{value:s._id,children:s.department},s._id)):e.jsx(G,{disabled:!0,children:"No departments found"})})]}),e.jsxs(Z,{sx:{width:"100%",gap:2},children:[e.jsx(h,{fullWidth:!0,required:!0,value:o.employeeName,onChange:s=>g(s,"employeeName"),label:"Name",size:"small"}),e.jsx(h,{fullWidth:!0,required:!0,value:o.email,onChange:s=>g(s,"email"),label:"Email",size:"small"})]}),e.jsxs(Z,{sx:{width:"100%",gap:2},children:[e.jsx(h,{fullWidth:!0,value:o.designation,onChange:s=>g(s,"designation"),label:"Designation",size:"small"}),e.jsx(h,{fullWidth:!0,value:o.salary,onChange:s=>g(s,"salary"),label:"Salary",size:"small"})]}),e.jsxs("div",{className:"mt-1 gap-2 flex items-center relative",children:[e.jsx("input",{style:{display:"none"},type:"file",onChange:$,ref:Me,accept:"image/*",name:"",id:"fileInput"}),C?e.jsx("img",{src:C,alt:"Preview",className:"mt-2 w-[100px] h-[100px] rounded-full object-cover"}):e.jsx(Oe,{sx:{width:100,height:100},alt:o.employeeName,src:"/static/images/avatar/1.jpg"}),e.jsx("span",{onClick:()=>Me.current.click(),className:"absolute -bottom-1 -right-1 rounded-full bg-teal-900 text-white p-1",children:e.jsx(qe,{size:18})})]}),A&&e.jsx("div",{className:"border w-full rounded border-dashed border-slate-400",children:e.jsxs(ke,{sx:{width:"100%"},className:"flex rounded  flex-col",children:[e.jsx(ze,{sx:{backgroundColor:"#334155",color:"white"},expandIcon:e.jsx(ye,{color:"white"}),children:e.jsx(re,{variant:"subtitle1",children:"Personal Details (optional)"})}),e.jsx(Pe,{children:e.jsxs(Z,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsx(h,{fullWidth:!0,value:o.phone,onChange:s=>g(s,"phone"),label:"Phone",size:"small"}),e.jsx(h,{fullWidth:!0,value:o.Emergencyphone,onChange:s=>g(s,"Emergencyphone"),label:"Emergency/ Relative Phone",size:"small"}),e.jsx(h,{fullWidth:!0,value:o.address,onChange:s=>g(s,"address"),label:"Address",size:"small"}),e.jsx(h,{fullWidth:!0,value:o.bloodGroup,onChange:s=>g(s,"bloodGroup"),label:"Blood Group",size:"small"}),e.jsx(h,{fullWidth:!0,inputProps:{maxLength:12},value:o.adhaar,onChange:s=>g(s,"adhaar"),label:"Adhaar No.",size:"small"}),e.jsx(h,{fullWidth:!0,inputProps:{maxLength:10},value:o.pan,onChange:s=>g(s,"pan"),label:"Pan No.",size:"small"}),e.jsx(h,{InputLabelProps:{shrink:!0},fullWidth:!0,value:o.dob,type:"date",onChange:s=>g(s,"dob"),label:"Date of Birth",size:"small"}),e.jsxs(ie,{size:"small",children:[e.jsx(oe,{children:"maritalStatus"}),e.jsxs(le,{label:"maritalStatus",value:o.maritalStatus,onChange:s=>g(s,"maritalStatus"),children:[e.jsx(G,{selected:!0,value:!0,children:"Married"}),e.jsx(G,{selected:!0,value:!1,children:"Unmarried"})]})]}),e.jsxs(ie,{size:"small",children:[e.jsx(oe,{children:"Gender"}),e.jsxs(le,{label:"Gender",value:o.gender,onChange:s=>g(s,"gender"),children:[e.jsx(G,{selected:!0,value:"male",children:"Male"}),e.jsx(G,{selected:!0,value:"female",children:"female"})]})]})]})})]})}),A&&e.jsx("div",{className:"border w-full rounded border-dashed border-slate-400",children:e.jsxs(ke,{sx:{width:"100%"},className:"flex rounded  flex-col",children:[e.jsx(ze,{sx:{backgroundColor:"#334155",color:"white"},expandIcon:e.jsx(ye,{color:"white"}),children:e.jsx(re,{sx:{margin:"0"},variant:"subtitle1",children:"Banking Details (optional)"})}),e.jsx(Pe,{children:e.jsxs(Z,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsx(h,{fullWidth:!0,value:o.acHolderName,onChange:s=>g(s,"acHolderName"),label:"A/C Holder Name",size:"small"}),e.jsx(h,{fullWidth:!0,value:o.bankName,onChange:s=>g(s,"bankName"),label:"Bank Name",size:"small"}),e.jsx(h,{fullWidth:!0,value:o.bankbranch,onChange:s=>g(s,"bankbranch"),label:"Branch",size:"small"}),e.jsx(h,{fullWidth:!0,value:o.acnumber,onChange:s=>g(s,"acnumber"),label:"A/C No.",size:"small"}),e.jsx(h,{fullWidth:!0,value:o.ifscCode,onChange:s=>g(s,"ifscCode"),label:"IFSC Code",size:"small"}),e.jsx(h,{fullWidth:!0,value:o.upi,onChange:s=>g(s,"upi"),label:"Upi Id/No.",size:"small"})]})})]})}),A&&e.jsx("div",{className:"border w-full rounded border-dashed border-slate-400",children:e.jsxs(ke,{sx:{width:"100%"},className:"flex flex-col",children:[e.jsx(ze,{sx:{backgroundColor:"#334155",color:"white"},expandIcon:e.jsx(ye,{color:"white"}),children:e.jsx(re,{variant:"subtitle1",children:"Document & Skills (optional)"})}),e.jsxs(Pe,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(Z,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2}}),e.jsx(re,{fontWeight:"bold",children:"Achievements"}),($e=o==null?void 0:o.achievements)==null?void 0:$e.map((s,r)=>e.jsxs(Z,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",gap:2,alignItems:"center"},children:[e.jsx(h,{label:"Title",size:"small",value:s.title,onChange:n=>X(n,"achievements",r,"title")}),e.jsx(h,{label:"Description",size:"small",value:s.description,onChange:n=>X(n,"achievements",r,"description")}),e.jsx(h,{type:"date",size:"small",label:"Date",InputLabelProps:{shrink:!0},value:s.date,onChange:n=>X(n,"achievements",r,"date")}),e.jsx(Je,{size:24,title:"Delete this",onClick:()=>me("achievements",r)})]},r)),e.jsx(ee,{onClick:()=>he("achievements"),variant:"outlined",children:"Add Achievement"}),e.jsx(re,{fontWeight:"bold",children:"Education"}),(Fe=o==null?void 0:o.education)==null?void 0:Fe.map((s,r)=>e.jsxs(Z,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",gap:2,alignItems:"center"},children:[e.jsx(h,{label:"Degree",size:"small",value:s.degree,onChange:n=>X(n,"education",r,"degree")}),e.jsx(h,{label:"Institution",size:"small",value:s.institution,onChange:n=>X(n,"education",r,"institution")}),e.jsx(h,{type:"date",size:"small",label:"Date",InputLabelProps:{shrink:!0},value:s.date,onChange:n=>X(n,"education",r,"date")}),e.jsx(Je,{size:24,title:"Delete this",onClick:()=>me("education",r)})]},r)),e.jsx(ee,{onClick:()=>he("education"),variant:"outlined",children:"Add Education"})]})]})})]}),e.jsxs("div",{className:"modalfooter",children:[e.jsx(ee,{size:"small",onClick:()=>{i(!1),M(!1),I(V),J()},variant:"outlined",children:"Cancel"}),A?e.jsx(ee,{sx:{mr:2},loading:l,loadingPosition:"end",endIcon:e.jsx(Ke,{}),variant:"contained",onClick:se,children:"Update"}):e.jsx(ee,{sx:{mr:2},loading:l,loadingPosition:"end",endIcon:e.jsx(Ke,{}),variant:"contained",type:"submit",children:"Add"})]})]})})})}),e.jsx(Ee,{open:x,onClose:()=>{W(!1)},children:e.jsx("div",{className:"membermodal",children:e.jsx(ia,{viewEmployee:T})})}),e.jsx(Ee,{open:R,onClose:()=>{k(!1)},children:e.jsx("div",{className:"membermodal",children:e.jsxs("form",{onSubmit:ge,children:[e.jsx("h2",{children:"Reset Passowrd"}),e.jsxs("span",{className:"modalcontent ",children:[e.jsx(h,{fullWidth:!0,required:!0,value:f.pass,onChange:s=>z({...f,pass:s.target.value}),label:"Passowrd",size:"small"}),e.jsx(ee,{variant:"contained",sx:{mr:2},type:"submit",children:"Reset Password"})]})]})})})]})};export{ha as default};
