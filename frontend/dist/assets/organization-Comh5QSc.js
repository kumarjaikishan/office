import{r as h,f as J,j as e,A as R,F as Z,b as B,y as g,P as ne,Q as oe,I as ie,R as D,L}from"./index-CTh4XINP.js";import{M as X}from"./Modalbox-CNzqGYqV.js";import{G as de,L as Y}from"./ListItemText-DGm4AAAh.js";import{T as b}from"./TextField-DZ2WNkho.js";import{F as K,I as ee,S as se,O as ae}from"./Select-CrBcKFAw.js";import{M as te}from"./MenuItem-Cy-BF1ws.js";import{C as re}from"./Checkbox-CjfOND3N.js";import{B as $}from"./Box-0AwRt24s.js";import{B as P}from"./Button-Gf5sSqIk.js";import ce from"./Department-B88PIstq.js";import{a as me}from"./index-D8LLMcYn.js";import{u as le}from"./imageresizer-D4I-KFLq.js";import"./useSlotProps-DkXkGTp2.js";import"./styled-DFR8LYT7.js";import"./useThemeProps-H3oaCWNN.js";import"./Typography-22Vbjyg4.js";import"./createSimplePaletteValueFilter-B4rI7VpO.js";import"./ButtonBase-DRT54j5u.js";import"./index-YZVVm7Xt.js";import"./index.es-DqB4JCGQ.js";import"./attandencehelper-B7qcYoQE.js";import"./dayjs.min-D-96h9Fd.js";import"./InputAdornment-B8s20t01.js";const ue=({setopenviewmodal:d,employee:I,company:A,editbranch:m,editbranchdata:u})=>{const[o,N]=h.useState({id:"",name:"",location:"",companyId:"",managerIds:[]}),{adminManager:w}=J(t=>t.user),[j,S]=h.useState([]),E=localStorage.getItem("emstoken");h.useEffect(()=>{S(I),N({...o,companyId:A._id}),m&&N(u)},[A,m]),h.useEffect(()=>{w.length>0&&S(w.filter(t=>t.role=="manager"))},[w]);const n=(t,p)=>{N(l=>({...l,[t]:p}))},y=async()=>{var t,p;try{const l=await B.post("/api/addBranch",o,{headers:{Authorization:`Bearer ${E}`}});g.success("Branch added successfully"),d(!1),N({name:"",location:"",companyId:"",managerIds:[]})}catch(l){console.error(l),g.error(((p=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:p.message)||"Error adding branch")}},T=async()=>{var t,p;try{const l=await B.post("/api/editBranch",o,{headers:{Authorization:`Bearer ${E}`}});g.success(l.data.message),d(!1),N({name:"",location:"",companyId:"",managerIds:[]})}catch(l){console.error(l),g.error(((p=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:p.message)||"Error adding branch")}};return e.jsxs("form",{children:[e.jsx("h2",{children:m?"Edit Branch":"Add New Branch"}),e.jsxs("span",{className:"modalcontent",children:[e.jsxs(de,{container:!0,spacing:2,children:[e.jsx(b,{label:"Branch Name",fullWidth:!0,size:"small",value:o.name,onChange:t=>n("name",t.target.value),required:!0,helperText:"Enter the official branch name"}),e.jsx(b,{label:"Location",fullWidth:!0,size:"small",value:o.location,onChange:t=>n("location",t.target.value),helperText:"City, State or Address"}),e.jsxs(K,{size:"small",fullWidth:!0,children:[e.jsx(ee,{children:"Managers"}),e.jsx(se,{multiple:!0,value:o.managerIds,onChange:t=>n("managerIds",t.target.value),input:e.jsx(ae,{label:"Managers"}),renderValue:t=>t.map(p=>{var l;return(l=j.find(C=>C._id===p))==null?void 0:l.name}).join(", "),children:j==null?void 0:j.map(t=>{var p;return e.jsxs(te,{value:t==null?void 0:t._id,children:[e.jsx(re,{checked:(p=o==null?void 0:o.managerIds)==null?void 0:p.includes(t._id)}),e.jsx(R,{src:t==null?void 0:t.profileImage,alt:t==null?void 0:t.name,children:!t.profileImage&&e.jsx(Z,{})}),e.jsx(Y,{className:"ml-2 capitalize",primary:t==null?void 0:t.name})]},t._id)})})]})]}),e.jsx($,{sx:{mt:3,textAlign:"right"},children:m?e.jsx(P,{variant:"contained",onClick:T,children:"Save"}):e.jsx(P,{variant:"contained",onClick:y,children:"Add Branch"})})]})]})},he=async({companyinp:d,setisload:I})=>{const A=localStorage.getItem("emstoken");I(!0);try{const m=await B.post("/api/addcompany",{name:d.name,industry:d.industry},{headers:{Authorization:`Bearer ${A}`}});console.log("Query:",m),g.success(m.data.message,{autoClose:1200})}catch(m){console.log(m),m.response?g.warn(m.response.data.message,{autoClose:1200}):m.request?console.error("No response from server:",m.request):console.error("Error:",m.message)}finally{I(!1)}},W={1:"Read",2:"Create",3:"Update",4:"Delete"},H=["attandence","branch","department","employee","ledgerentry","holiday","leave","ledger","notification","salary"],q={attandence:[1,2,3,4],branch:[1,2,3,4],department:[1,2,3,4],employee:[1,2,3,4],ledgerentry:[1,2,3,4],holiday:[1,2,3,4],leave:[1,3,4],ledger:[1,2,3,4],notification:[1,2,3,4],salary:[1,2,3]},pe={employee:[1,2,3],attandence:[1,2,3],department:[1,2,3],holiday:[1,2],leave:[1,3],ledger:[1,2,3,4],ledgerentry:[1,2,3,4],notification:[1,2],salary:[1]};function xe(){const[d,I]=h.useState([]),[A,m]=h.useState([]),[u,o]=h.useState({name:"",email:"",password:"",role:"admin",profileImage:null,profilePreview:"",permissions:{...q}});h.useEffect(()=>{O()},[]);const N=h.useRef(null),{handleImage:w}=le(),[j,S]=h.useState(null),[E,n]=h.useState(!1),[y,T]=h.useState(""),[t,p]=h.useState(null),l=s=>{p(r=>r===s?null:s)},C=()=>{o({name:"",email:"",password:"",role:"admin",profileImage:null,profilePreview:"",permissions:{...q}}),T(""),S(null),n(!1)},k=async()=>{const s={...u};console.log(u);const r=new FormData;try{const c=s.profileImage?await w(300,s.profileImage):null;c&&r.append("photo",c),r.append("name",s.name),r.append("email",s.email),r.append("role",s.role),r.append("password",s.password),r.append("permissions",JSON.stringify(s.permissions));const M=localStorage.getItem("emstoken");m(!0);const z=j!==null?`/api/editAdmin/${d[j]._id}`:"/api/addAdmin",F=await B["post"](z,r,{headers:{Authorization:`Bearer ${M}`,"Content-Type":"multipart/form-data"}});g.success(F.data.message,{autoClose:1200}),console.log(F.data),C(),O()}catch(c){console.error(c),c.response?g.warn(c.response.data.message,{autoClose:1200}):g.error("Something went wrong",{autoClose:1200})}finally{m(!1)}},O=async()=>{try{const s=localStorage.getItem("emstoken"),r=await B.get("/api/getAdmin",{headers:{Authorization:`Bearer ${s}`}});console.log(r.data),I(r.data)}catch(s){console.error(s),s.response?g.warn(s.response.data.message,{autoClose:1200}):g.error("Something went wrong",{autoClose:1200})}finally{m(!1)}},U=s=>{const r=d[s];o({...r,profilePreview:r.profileImage||"",profileImage:null}),S(s),n(!0)},_=s=>{const r=d.filter((c,M)=>M!==s);I(r)},a=(s,r)=>{o(c=>{const M=c.permissions[s]||[],G=M.includes(r)?M.filter(F=>F!==r):[...M,r].sort();return{...c,permissions:{...c.permissions,[s]:G}}})},x=s=>{const r=s==="admin"?{...q}:{...pe};o({...u,role:s,permissions:r})},f=s=>{const r=s.target.files[0];r&&o(c=>({...c,profileImage:r,profilePreview:URL.createObjectURL(r)}))},i=()=>{y&&(o(s=>({...s,permissions:{...s.permissions,[y]:[]}})),T(""))},v=Array.from(new Set([...u.role==="admin"?H:Object.keys(u.permissions),...Object.keys(u.permissions)])),V=H.filter(s=>!v.includes(s));return e.jsxs("div",{className:"p-1 w-full",children:[e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-[16px] md:text-xl font-semibold",children:"Admin Management"}),e.jsx("button",{className:"bg-blue-600 text-white px-3 md:px-4 py-1 md:py-2 rounded hover:bg-blue-700",onClick:()=>{C(),n(!0)},children:"Add Admin"})]}),d.length===0?e.jsx("p",{className:"text-gray-500",children:"No admins added yet."}):e.jsx("div",{className:"space-y-3",children:d.map((s,r)=>e.jsxs("div",{className:"flex flex-col justify-between items-start border border-dashed p-2 rounded-md overflow-x-auto ",children:[e.jsxs("div",{className:"flex justify-between w-full  items-center  gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{sx:{width:60,height:60},alt:s.name,src:s==null?void 0:s.profileImage}),e.jsxs("div",{children:[e.jsxs("p",{className:" capitalize text-[14px] md:text-[18px] font-medium",children:[s.name," (",s.role,")"]}),e.jsx("p",{className:"text-[12px] md:text-sm text-gray-500",children:s.email})]})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{className:"p-2 border rounded hover:bg-gray-100",onClick:()=>U(r),children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 border rounded text-red-600 hover:bg-red-50",onClick:()=>_(r),children:e.jsx(oe,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("button",{onClick:()=>l(r),className:"text-blue-600 cursor-pointer text-sm mt-1 ",children:t===r?"Hide Permissions":"View Permissions "}),t===r&&e.jsxs("div",{className:"text-sm w-full  mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Permissions:"}),e.jsxs("table",{className:"table-auto border-collapse border border-gray-300 mt-2 text-xs w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-2 py-1 text-left",children:"Module"}),Object.values(W).map(c=>e.jsx("th",{className:"border border-gray-300 px-2 py-1",children:c},c))]})}),e.jsx("tbody",{children:Object.entries(s.permissions).map(([c,M])=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-2 py-1 font-semibold",children:c}),Object.keys(W).map(z=>e.jsx("td",{className:"border border-gray-300 px-2 py-1 text-center",children:M.includes(Number(z))?"âœ…":"-"},z))]},c))})]})]})]})]},r))})]}),e.jsx(X,{open:E,onClose:()=>n(!1),children:e.jsx("div",{className:"membermodal",children:e.jsxs("form",{onSubmit:k,children:[e.jsxs("h2",{children:[" ",j!==null?"Edit Admin":"Add Admin"]}),e.jsxs("span",{className:"modalcontent",children:[e.jsxs("div",{className:"space-y-3 pt-1 flex items-center gap-4 flex-col w-[100%] md:w-[500px]",children:[e.jsxs("div",{className:"mt-1 items-center  w-fit relative",children:[e.jsx("input",{style:{display:"none"},type:"file",onChange:f,ref:N,accept:"image/*",name:"",id:"fileInput"}),e.jsx(R,{sx:{width:70,height:70},alt:u.name,src:u.profilePreview}),e.jsx("span",{onClick:()=>N.current.click(),className:"absolute -bottom-1 -right-1 rounded-full bg-teal-900 text-white p-1",children:e.jsx(ie,{size:18})})]}),e.jsx(b,{fullWidth:!0,required:!0,value:u.name,onChange:s=>o({...u,name:s.target.value}),label:"Name",size:"small"}),e.jsx(b,{fullWidth:!0,required:!0,value:u.email,onChange:s=>o({...u,email:s.target.value}),label:"Email",size:"small",helperText:"*Note - you can also use companyname as mail handler, e.g. xyz@companyname.com"}),e.jsx(b,{fullWidth:!0,required:!0,value:u.password,type:"password",onChange:s=>o({...u,password:s.target.value}),label:"Password",size:"small"}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"font-semibold block mb-1",children:"Role"}),e.jsxs("select",{className:"w-full border p-2 rounded",value:u.role,onChange:s=>x(s.target.value),children:[e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"manager",children:"Manager"})]})]}),u.role==="manager"&&e.jsxs("div",{className:"flex w-full items-center gap-2",children:[e.jsxs("select",{className:"border p-2 rounded w-full",value:y,onChange:s=>T(s.target.value),children:[e.jsx("option",{value:"",children:"-- Select Module to Add --"}),V.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx("button",{onClick:i,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Add"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Permissions"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2 text-left",children:"Module"}),Object.entries(W).map(([s,r])=>e.jsx("th",{className:"border p-2 text-center",children:r},s))]})}),e.jsx("tbody",{children:v.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"border p-2 capitalize",children:s}),Object.keys(W).map(r=>{var c;return e.jsx("td",{className:"border text-center",children:e.jsx("input",{className:`h-3 w-3 md:h-5 md:w-5 cursor-pointer rounded-md border-2 border-gray-400 \r
                                                             checked:bg-teal-600 checked:border-teal-600 \r
                                                             focus:ring-2 focus:ring-teal-400 focus:outline-none \r
                                                             transition duration-200 ease-in-out`,type:"checkbox",checked:((c=u.permissions[s])==null?void 0:c.includes(Number(r)))||!1,onChange:()=>a(s,Number(r))})},r)})]},s))})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{className:"px-4 py-1 border rounded hover:bg-gray-100",onClick:C,children:"Cancel"}),e.jsx("button",{className:"px-4 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:k,children:j!==null?"Update":"Create"})]})]})]})})})]})}const Q=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}];function We(){const[d,I]=h.useState(null),[A,m]=h.useState(!1),[u,o]=h.useState(!1),[N,w]=h.useState(!1),{handleImage:j}=le(),[S,E]=h.useState(null),[n,y]=h.useState({name:"",industry:"",officeTime:{in:"10:00",out:"18:00",breakMinutes:30},gracePeriod:{lateEntryMinutes:10,earlyExitMinutes:10},workingMinutes:{fullDay:480,halfDay:270,shortDayThreshold:360,overtimeAfterMinutes:490},weeklyOffs:[0],attendanceRules:{considerEarlyEntryBefore:"09:50",considerLateEntryAfter:"10:10",considerEarlyExitBefore:"17:50",considerLateExitAfter:"18:15"}}),{employee:T,company:t,branch:p,profile:l}=J(a=>a.user),C=a=>{I(x=>x===a?null:a)};h.useEffect(()=>{console.log(l),t&&y(t)},[t]);const k=(a,x,f)=>{y(i=>({...i,[a]:{...i[a],[x]:f}}))},O=async()=>{try{w(!0);const a=localStorage.getItem("emstoken"),x=await B.post("/api/updateCompany",{...n},{headers:{Authorization:`Bearer ${a}`}});g.success(x.data.message,{autoClose:1800})}catch(a){console.log(a),a.response?g.warn(a.response.data.message,{autoClose:2700}):a.request?console.error("No response from server:",a.request):console.error("Error:",a.message)}finally{w(!1)}},U=()=>{},_=a=>{var f;console.log(a),m(!0);const x={...a,managerIds:(f=a==null?void 0:a.managerIds)==null?void 0:f.map(i=>i._id)};E(x),o(!0)};return e.jsxs("div",{className:"w-full mx-auto mt-1 p-1 py-2 md:p-6 bg-white rounded-xl shadow-md space-y-3 md:space-y-6",children:[(l==null?void 0:l.role)=="superadmin"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-blue-100 px-4 py-2 rounded-md",onClick:()=>C("company"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:"Company Info"}),d==="company"?e.jsx(D,{className:"text-xl"}):e.jsx(L,{className:"text-xl"})]}),d==="company"&&e.jsxs("div",{className:"p-4 rounded flex flex-col md:flex-row items-center border-blue-300 border-2 border-dashed mt-2 space-y-4",children:[e.jsx("div",{className:"relative flex items-center mx-auto",children:e.jsxs("div",{className:"relative w-30 h-30 mx-auto",children:[e.jsx("img",{src:(n==null?void 0:n.logo)||e.jsx(me,{}),alt:"Company Logo",className:"w-full h-full object-fill rounded-2xl border-2 border-dashed border-blue-300"}),e.jsx("input",{type:"file",id:"logo-upload",accept:"image/*",onChange:async a=>{const x=a.target.files[0];if(!x)return;const f=await j(200,x),i=new FormData;i.append("_id",n._id),i.append("logo",f);try{console.log("api calling"),w(!0);const v=localStorage.getItem("emstoken"),s=(await B.post("/api/updateCompany",i,{headers:{Authorization:`Bearer ${v}`,"Content-Type":"multipart/form-data"}})).data.logoUrl;y(r=>({...r,logo:s})),g.success("Logo uploaded successfully!")}catch(v){console.error(v),g.error("Failed to upload logo.")}finally{w(!1)}},className:"hidden"}),e.jsx("label",{htmlFor:"logo-upload",className:"absolute w-8 h-8 text-center bottom-0 right-0 bg-white border border-gray-300 rounded-full p-1 cursor-pointer shadow-md",children:"âœŽ"})]})}),e.jsxs("div",{className:"w-full md:w-[70%] flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block",children:"Company Name"}),e.jsx("input",{type:"text",onChange:a=>y({...n,name:a.target.value}),value:n.name,className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block",children:"Industry"}),e.jsx("input",{type:"text",onChange:a=>y({...n,industry:a.target.value}),value:n.industry,className:"w-full border rounded px-3 py-2"})]}),t?e.jsx(P,{variant:"contained",loading:N,onClick:O,children:"Save Changes"}):e.jsx(P,{loading:N,variant:"contained",onClick:()=>he({companyinp:n,setisload:w}),children:"+ Create Company"})]})]})]}),((l==null?void 0:l.role)=="superadmin"||(l==null?void 0:l.role)=="admin")&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-green-100 px-4 py-2 rounded-md",onClick:()=>C("branches"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:"Branches"}),d==="branches"?e.jsx(D,{className:"text-xl"}):e.jsx(L,{className:"text-xl"})]}),d==="branches"&&e.jsxs("div",{className:"p-1 md:p-4 rounded overflow-auto  border-green-300 border-2 border-dashed mt-2 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-md font-medium",children:"Branch List"}),e.jsx("button",{onClick:()=>o(!0),className:"bg-green-500 text-white px-3 py-1 rounded",children:"+ Add Branch"})]}),e.jsxs("table",{className:"w-full capitalize text-[12px] md:text-sm border",children:[e.jsx("thead",{className:"bg-green-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border",children:"Name"}),e.jsx("th",{className:"p-2 border",children:"Location"}),e.jsx("th",{className:"p-2 border",children:"Manager(s)"}),e.jsx("th",{className:"p-2 border",children:"Actions"})]})}),e.jsxs("tbody",{children:[p&&p.map((a,x)=>{var f;return e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border",children:a.name}),e.jsx("td",{className:"p-2 border",children:a.location}),e.jsx("td",{className:"p-2 border capitalize",children:e.jsx("div",{className:"flex flex-col gap-2",children:(f=a==null?void 0:a.managerIds)==null?void 0:f.map((i,v)=>e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>U(i.userid),children:[e.jsx(R,{src:i==null?void 0:i.profileImage,alt:i.name,children:!(i!=null&&i.profileImage)&&e.jsx(Z,{})}),e.jsx("span",{children:i.name})]},v))})}),e.jsx("td",{className:"p-2 border",children:e.jsx("button",{onClick:()=>_(a),className:"bg-blue-500 text-white px-3 py-1 rounded",children:"Edit"})})]},x)}),!p&&e.jsx("div",{children:"No branch Found"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-teal-100 px-4 py-2 rounded-md",onClick:()=>C("department"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:"Department"}),d==="department"?e.jsx(D,{className:"text-xl"}):e.jsx(L,{className:"text-xl"})]}),d==="department"&&e.jsx("div",{className:"p-1 rounded  border-teal-300 border-2 border-dashed mt-2 space-y-4",children:e.jsx(ce,{})})]}),(l==null?void 0:l.role)=="superadmin"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-teal-100 px-4 py-2 rounded-md",onClick:()=>C("admin"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:"Admin"}),d==="admin"?e.jsx(D,{className:"text-xl"}):e.jsx(L,{className:"text-xl"})]}),d==="admin"&&e.jsx("div",{className:"p-1 rounded  border-teal-300 border-2 border-dashed mt-2 ",children:e.jsx(xe,{})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-yellow-100 px-4 py-2 rounded-md",onClick:()=>C("attendance"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:" Attendance Rules"}),d==="attendance"?e.jsx(D,{className:"text-xl"}):e.jsx(L,{className:"text-xl"})]}),d==="attendance"&&t&&e.jsxs($,{className:" border-yellow-300  border-2 border-dashed rounded mt-1 p-2 ",children:[e.jsxs($,{className:"mt-1 p-2 grid grid-cols-1 md:grid-cols-3 gap-5",children:[e.jsx(b,{label:"Office Time In",fullWidth:!0,type:"time",value:n.officeTime.in,onChange:a=>k("officeTime","in",a.target.value),helperText:"Time when office hours begin"}),e.jsx(b,{label:"Office Time Out",fullWidth:!0,type:"time",value:n.officeTime.out,onChange:a=>k("officeTime","out",a.target.value),helperText:"Time when office hours end"}),e.jsx(b,{label:"Break Minutes",fullWidth:!0,type:"number",value:n.officeTime.breakMinutes,onChange:a=>k("officeTime","breakMinutes",Number(a.target.value)),helperText:"Total break time allowed during the day"}),e.jsx(b,{label:"Full Day Minutes",fullWidth:!0,type:"number",value:n.workingMinutes.fullDay,onChange:a=>k("workingMinutes","fullDay",Number(a.target.value)),helperText:"Total working minutes required for a full day"}),e.jsx(b,{label:"Half Day Minutes",fullWidth:!0,type:"number",value:n.workingMinutes.halfDay,onChange:a=>k("workingMinutes","halfDay",Number(a.target.value)),helperText:"Minimum minutes required for marking a half-day"}),e.jsx(b,{label:"Short Day Threshold (min)",fullWidth:!0,type:"number",value:n.workingMinutes.shortDayThreshold,onChange:a=>k("workingMinutes","shortDayThreshold",Number(a.target.value)),helperText:"Below this time is considered a short day"}),e.jsx(b,{label:"Overtime After Minutes",fullWidth:!0,type:"number",value:n.workingMinutes.overtimeAfterMinutes,onChange:a=>k("workingMinutes","overtimeAfterMinutes",Number(a.target.value)),helperText:"Time after which overtime calculation begins"}),e.jsxs(K,{fullWidth:!0,children:[e.jsx(ee,{children:"Weekly Offs"}),e.jsx(se,{multiple:!0,value:n.weeklyOffs,onChange:a=>y({...n,weeklyOffs:a.target.value}),input:e.jsx(ae,{label:"Weekly Offs"}),renderValue:a=>a.map(x=>{var f;return(f=Q.find(i=>i.value===x))==null?void 0:f.label}).join(", "),children:Q.map(a=>e.jsxs(te,{value:a.value,children:[e.jsx(re,{checked:n.weeklyOffs.includes(a.value)}),e.jsx(Y,{primary:a.label})]},a.value))})]}),Object.entries(n.attendanceRules).map(([a,x])=>{const f=a.replace(/([A-Z])/g," $1").replace(/^./,v=>v.toUpperCase()),i={considerEarlyEntryBefore:"Considered early if punched before this time",considerLateEntryAfter:"Considered late if punched after this time",considerEarlyExitBefore:"Considered early exit if leaving before this time",considerLateExitAfter:"Considered late exit if leaving after this time"};return e.jsx(b,{fullWidth:!0,label:f,type:"time",value:x,onChange:v=>k("attendanceRules",a,v.target.value),helperText:i[a]},a)})]}),e.jsx($,{sx:{mt:4,textAlign:"right"},children:e.jsx(P,{variant:"contained",onClick:O,children:"Update Settings"})})]})]}),e.jsx(X,{open:u,onClose:()=>{o(!1),E(null),m(!1)},children:e.jsx("div",{className:"membermodal",children:e.jsx(ue,{setopenviewmodal:o,editbranchdata:S,editbranch:A,company:t,employee:T})})})]})}export{We as default};
