import{r as p,j as e,B as f,aB as y,ah as v,ai as N,bl as T,bm as C,bn as D,b as h,M as g,bo as w,g as E,h as j}from"./index-DoRMmwPR.js";import{H as k}from"./holidayCalander-_LPnv8mC.js";import"./dateViewRenderers-CvhdcfXY.js";import"./index-CeQxuE5n.js";import"./AdapterDateFns-bDHbj-cK.js";import"./Tooltip-C3-346zF.js";import"./Popper-4tHn-5Ac.js";const M=["All","Staff","Manager","HR"],O=["Holiday","Policy","Event","Urgent"],S=({notices:c=[],onDelete:r,onSave:i})=>{const[m,x]=p.useState(!1),[o,u]=p.useState(null),[l,s]=p.useState({title:"",date:"",employeeType:"",noticeType:""}),a=(t=null)=>{u(t),s(t?{title:t.title,date:t.date,employeeType:t.employeeType,noticeType:t.noticeType}:{title:"",date:"",employeeType:"",noticeType:""}),x(!0)},n=()=>{u(null),x(!1)},d=()=>{i&&i({...l,id:(o==null?void 0:o.id)||Date.now()}),n()};return e.jsxs("div",{className:"bg-white h-full shadow-lg rounded-lg p-4 w-full md:w-[350px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 border-b pb-1",children:[e.jsx("h3",{className:"text-lg font-bold",children:"ðŸ“Œ Official Notices"}),e.jsx(f,{size:"small",variant:"contained",onClick:()=>a(),children:"Add"})]}),c!=null&&c.length?e.jsx("ul",{className:"space-y-2 text-sm h-[300px] overflow-y-auto",children:c.map((t,b)=>e.jsxs("li",{className:"border-l-4 border-blue-500 pl-2 relative group",children:[e.jsx("p",{className:"font-semibold",children:t.title}),e.jsx("p",{className:"text-gray-600 text-xs",children:t.date}),e.jsxs("div",{className:"absolute right-1 top-1 hidden group-hover:flex gap-1",children:[e.jsx(y,{size:"small",onClick:()=>a(t),children:e.jsx(v,{className:"text-blue-500"})}),e.jsx(y,{size:"small",onClick:()=>r&&r(t.id),children:e.jsx(N,{className:"text-red-500"})})]})]},b))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No official notices available."}),e.jsxs(T,{open:m,onClose:n,children:[e.jsx(C,{children:o?"Edit Notice":"Add Notice"}),e.jsxs(D,{className:"flex flex-col gap-4 mt-2",children:[e.jsx(h,{label:"Notice Title",fullWidth:!0,value:l.title,onChange:t=>s({...l,title:t.target.value})}),e.jsx(h,{label:"Date",type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:l.date,onChange:t=>s({...l,date:t.target.value})}),e.jsx(h,{select:!0,label:"Type of Employee",fullWidth:!0,value:l.employeeType,onChange:t=>s({...l,employeeType:t.target.value}),children:M.map(t=>e.jsx(g,{value:t,children:t},t))}),e.jsx(h,{select:!0,label:"Type of Notice",fullWidth:!0,value:l.noticeType,onChange:t=>s({...l,noticeType:t.target.value}),children:O.map(t=>e.jsx(g,{value:t,children:t},t))})]}),e.jsxs(w,{children:[e.jsx(f,{onClick:n,children:"Cancel"}),e.jsx(f,{variant:"contained",onClick:d,children:o?"Update":"Add"})]})]})]})},F=()=>{const{attendance:c,companysetting:r,holiday:i}=E(a=>a.employee),[m,x]=p.useState(null),o=(r==null?void 0:r.weeklyOffs)||[1];p.useEffect(()=>{u()},[i]);const u=()=>{const a=[];i==null||i.forEach(n=>{let d=j(n.fromDate);const t=n.toDate?j(n.toDate):d;for(;d.isSameOrBefore(t,"day");)a.push({date:d.format("MM/DD/YYYY"),name:n.name}),d=d.add(1,"day")}),x(a)},l=m==null?void 0:m.map(a=>({date:j(a.date).toDate(),name:a.name})),s=[{title:"Annual General Meeting on Sep 10",date:"2025-08-01"},{title:"New ID Cards to be issued by next week",date:"2025-07-30"},{title:"Office renovation starts next Monday",date:"2025-07-28"}];return e.jsx("div",{className:"p-2 md:p-3 lg:p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:" ",children:e.jsx(k,{highlightedDates:l,weeklyOffs:o})}),e.jsx("div",{className:" ",children:e.jsx(S,{notices:s})})]})})};export{F as default};
