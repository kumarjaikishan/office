import{j as e,c as Y,m as ne,y as P,r as o,G as ve,k as Ee,n as He,o as pe,p as be,h as te,q as Ne,t as we,v as Ye,w as ye,x as Ve,z as Je,D as Ke,E as Xe,H as Qe,J as Ze,K as es,L as ss,P as as,u as ts,g as ls,a as rs,Q as ns,R as Ce,U as is,A as Ie,V as T,T as Q,W as ds,b as n,i as G,X as cs,Y as os,Z as xs,F as B,I as F,S as z,M as u,O as Ae,C as ke,B as k,_ as hs,$ as us,a0 as ms,a1 as le,a2 as Z,a3 as ee,a4 as Se}from"./index-Cz9Ed8ZU.js";import{u as gs,I as ze}from"./attandencehelper-QtK3fxpg.js";import{H as js}from"./index-DF6fr7J3.js";import{B as fs,P as vs,L as ps}from"./index-DDVK49eN.js";import{B as bs,a as Ns}from"./index-DTNzUE5h.js";import{A as Pe}from"./index-kOCVZRCf.js";import{u as ws}from"./imageresizer-D4I-KFLq.js";import{C as re}from"./CheckPermission-BKihBprI.js";import{F as Cs}from"./FormControlLabel-D3l-yVpj.js";import{C as Is}from"./Checkbox-DWaN0HPN.js";import{G as As}from"./Grid-GIJUZShH.js";import"./styled-CHk5KqOQ.js";import"./useThemeProps-CTFIxKFq.js";const ks=[{name:"S.no",selector:(i,j)=>j+1,width:"40px"},{name:"Name",selector:i=>i.name},{name:"Emp Id",selector:i=>i.empId,sortable:!0,width:"80px"},{name:"Phone",selector:i=>i.phone,width:"90px"},{name:"Department",selector:i=>i.department,width:"120px"},{name:"Status",selector:i=>e.jsx("span",{className:` ${i.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}  px-1 rounded`,children:i.status?"Active":"In Active"}),width:"120px"},{name:"Action",selector:i=>i.action,width:"180px"}],Ss=async({formData:i,dispatch:j,setisload:w,setInp:t,setopenmodal:m,init:C,resetPhoto:I})=>{const E=localStorage.getItem("emstoken");w(!0);try{const x=await Y.post("/api/addemployee",i,{headers:{Authorization:`Bearer ${E}`,"Content-Type":"multipart/form-data"}});P.success(x.data.message,{autoClose:1200}),t(C),I(),m(!1),j(ne())}catch(x){console.log(x),x.response?P.warn(x.response.data.message,{autoClose:1200}):console.error("Error:",x.message)}finally{w(!1)}},zs=async({formData:i,dispatch:j,setEmployeePhoto:w,setisload:t,setInp:m,setopenmodal:C,init:I})=>{const E=localStorage.getItem("emstoken");t(!0);try{const x=await Y.post("/api/updateemployee",i,{headers:{Authorization:`Bearer ${E}`}});P.success(x.data.message,{autoClose:1200}),w(null),m(I),C(!1),j(ne())}catch(x){console.log(x),x.response?P.warn(x.response.data.message,{autoClose:1200}):x.request?console.error("No response from server:",x.request):console.error("Error:",x.message)}finally{t(!1)}},Ps=async({employeeId:i,setisload:j,dispatch:w})=>{if(!i){alert("All fileds are Required");return}const t=localStorage.getItem("emstoken");j(!0);try{const m=await Y.post("/api/deleteemployee",{employeeId:i},{headers:{Authorization:`Bearer ${t}`}});w(ne()),P.success(m.data.message,{autoClose:1200})}catch(m){console.log(m),m.response?P.warn(m.response.data.message,{autoClose:1200}):m.request?console.error("No response from server:",m.request):console.error("Error:",m.message)}finally{j(!1)}},Es=({viewEmployee:i})=>{var E,x,U,y,W,S,_,q;const[j,w]=o.useState(!1),[t,m]=o.useState(null),[C,I]=o.useState(1);return o.useEffect(()=>{(async()=>{const $=localStorage.getItem("emstoken");w(!0);try{const N=await Y.get(`/api/getemployee?empid=${i}`,{headers:{Authorization:`Bearer ${$}`}});m(N.data)}catch(N){console.log(N),N.response?P.warn(N.response.data.message,{autoClose:1200}):N.request?console.error("No response from server:",N.request):console.error("Error:",N.message)}finally{w(!1)}})()},[]),e.jsx(e.Fragment,{children:j?e.jsxs("div",{className:"w-full h-[300px] flex gap-5 flex-col justify-center items-center bg-white",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ve,{className:"animate-spin",style:{animationDuration:"2.5s"},size:50,color:"teal"}),e.jsx(ve,{className:"absolute -bottom-4 left-0 animate-spin",style:{animationDuration:"3s"},size:20,color:"teal"})]}),e.jsx("p",{className:"text-teal-600",children:"loading..."})]}):e.jsxs("div",{className:"max-w-3xl mx-auto bg-white flex flex-col shadow rounded-lg p-2 md:p-4 ",children:[e.jsx("h2",{className:"text-xl mx-auto font-semibold text-gray-700 mb-4",children:"Employee Details"}),e.jsxs("div",{className:"flex gap-4  pb-2 md:items-start",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full border-2 border-teal-500 border-dashed p-[2px] flex items-center justify-center overflow-hidden",children:t!=null&&t.profileimage?e.jsx("img",{src:Ee(t.profileimage,{format:"webp",width:200,height:200}),alt:"Profile",className:"w-full h-full object-cover rounded-full"}):e.jsx(He,{className:"text-3xl text-gray-500"})}),e.jsxs("div",{className:"md:flex-1 w-auto",children:[e.jsx("h3",{className:"text-l md:text-xl capitalize font-bold text-gray-800",children:(E=t==null?void 0:t.userid)==null?void 0:E.name}),e.jsx("p",{className:"text-sm capitalize text-gray-600",children:(x=t==null?void 0:t.userid)==null?void 0:x.role}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded",children:(U=t==null?void 0:t.department)==null?void 0:U.department}),e.jsx("span",{className:`px-2 py-0.5 ${t!=null&&t.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}  text-xs rounded`,children:t!=null&&t.status?"Active":"In Active"})]}),e.jsxs("div",{className:"hidden md:flex mt-3 justify-start flex-wrap text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(pe,{className:"text-gray-500 lowercase"})," ",(y=t==null?void 0:t.userid)==null?void 0:y.email]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(be,{className:"text-gray-500"})," ",(t==null?void 0:t.phone)||"N/A"]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Ne,{className:"text-gray-500"})," ",te((W=t==null?void 0:t.userid)==null?void 0:W.createdAt).format("DD MMM, YYYY")]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(we,{className:"text-gray-500"})," ID: emp0002"]})]})]})]}),e.jsxs("div",{className:"md:hidden mt-3 justify-start flex flex-wrap text-[12px] md:text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(pe,{className:"text-gray-500 lowercase"})," ",(S=t==null?void 0:t.userid)==null?void 0:S.email]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(be,{className:"text-gray-500"})," ",(t==null?void 0:t.phone)||"N/A"]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Ne,{className:"text-gray-500"})," ",te((_=t==null?void 0:t.userid)==null?void 0:_.createdAt).format("DD MMM, YYYY")]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(we,{className:"text-gray-500"})," ID: emp0002"]})]}),e.jsxs("div",{className:"pt-1 capitalize",children:[e.jsxs("div",{className:"flex gap-2 md:gap-6 bg-slate-200 p-1 mt-2 text-[12px] md:text-sm font-medium text-gray-700",children:[e.jsx("div",{onClick:()=>I(1),className:`${C==1?"bg-white":"text-gray-400"} w-1/3 cursor-pointer py-1.5 text-center rounded`,children:"Personal Info"}),e.jsx("div",{onClick:()=>I(2),className:`${C==2?"bg-white":"text-gray-400"} w-1/3 cursor-pointer py-1.5 text-center rounded`,children:"Employment"}),e.jsx("div",{onClick:()=>I(3),className:`${C==3?"bg-white":"text-gray-400"} w-1/3 cursor-pointer py-1.5 text-center rounded`,children:"Documents & Skills"})]}),C==1&&e.jsxs("div",{className:"mt-2 grid grid-cols-2 max-h-[300px] overflow-y-auto md:grid-cols-2 gap-4 text-[12px] md:text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ye,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Date of Birth"}),e.jsx("div",{children:t!=null&&t.dob?te(t==null?void 0:t.dob).format("DD MMM,YYYY"):"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ye,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Address"}),e.jsx("div",{children:(t==null?void 0:t.address)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Emergency Contact"}),e.jsx("div",{children:(t==null?void 0:t.Emergencyphone)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(fs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Blood Group"}),e.jsx("div",{children:(t==null?void 0:t.bloodGroup)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Je,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Adhaar No."}),e.jsx("div",{children:(t==null?void 0:t.adhaar)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ke,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Pan No."}),e.jsx("div",{children:(t==null?void 0:t.pan)||"N/A"})]})]})]}),C==2&&e.jsxs("div",{className:"mt-2 grid grid-cols-2 max-h-[300px] overflow-y-auto md:grid-cols-2 gap-4 text-[12px] md:text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(vs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Position"}),e.jsx("div",{children:(t==null?void 0:t.designation)||"Accounts"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Xe,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Department"}),e.jsx("div",{children:((q=t==null?void 0:t.department)==null?void 0:q.department)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Qe,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Salary"}),e.jsx("div",{children:(t==null?void 0:t.salary)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ze,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Bank Name"}),e.jsx("div",{children:(t==null?void 0:t.bankName)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(es,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Account Holder"}),e.jsx("div",{children:(t==null?void 0:t.acHolderName)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ss,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Branch"}),e.jsx("div",{children:(t==null?void 0:t.bankbranch)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(as,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"A/C No."}),e.jsx("div",{children:(t==null?void 0:t.acnumber)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(bs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Ifsc Code"}),e.jsx("div",{children:(t==null?void 0:t.ifscCode)||"N/A"})]})]})]}),C==3&&e.jsxs("div",{className:"mt-2 p-2 grid grid-cols-1 max-h-[300px] overflow-y-auto sm:grid-cols-2 gap-4 text-[12px] md:text-sm text-gray-700",children:[e.jsxs("div",{className:"rounded border border-gray-300 bg-white p-2 md:p-4 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Education"}),t.education.length>0?t.education.map(p=>e.jsxs("div",{className:"relative my-1 pl-2 rounded overflow-hidden",children:[e.jsx("p",{className:"text-gray-700 font-semibold",children:p.degree}),e.jsx("p",{className:"text-gray-700",children:p.institution}),e.jsx("p",{className:"text-gray-500 text-[10px]",children:p.date}),e.jsx("span",{className:"absolute w-0.5 h-full bg-amber-800 top-0 left-0"})]})):e.jsx("div",{children:"No Data found"})]}),e.jsxs("div",{className:"rounded border border-gray-300 bg-white p-2 md:p-4 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Achievement"}),t.achievements.length>0?t.achievements.map(p=>e.jsxs("div",{className:"relative my-1 pl-5 rounded overflow-hidden",children:[e.jsx("p",{className:"text-gray-700 font-semibold",children:p.title}),e.jsx("p",{className:"text-gray-700",children:p.description}),e.jsx("p",{className:"text-gray-500 text-[10px]",children:p.date}),e.jsxs("span",{className:"absolute top-1 -left-0",children:[" ",e.jsx(ps,{size:18,color:"orange"})," "]}),e.jsx("span",{className:"absolute w-0.5 h-full bg-blue-500 top-0 right-0"})]})):e.jsx("div",{children:"No Achievement found"})]})]})]})]})})},Hs=()=>{var me,ge,je,fe;const[i,j]=o.useState(!1),[w,t]=o.useState(!1),[m,C]=o.useState([]),[I,E]=o.useState([]),[x,U]=o.useState(!1),[y,W]=o.useState(!1),[S,_]=o.useState(!1),[q,p]=o.useState(null),[$,N]=o.useState(null),[De,Me]=o.useState(null),[D,Be]=o.useState(null),{handleImage:ie}=ws(),se=ts(),{department:L,branch:R,employee:M,profile:Ds}=ls(s=>s.user),[V,ae]=o.useState({userid:"",pass:""}),[b,de]=o.useState({searchText:"",branch:"all",department:"all"}),Fe="https://res.cloudinary.com/dusxlxlvm/image/upload/v1753113610/ems/assets/employee_fi3g5p.webp";o.useEffect(()=>{de(s=>({...s,department:"all"}))},[b.branch]);let We=rs();const H={employeeId:"",branchId:"",department:"",employeeName:"",empId:"",guardian:{relation:"S/o",name:""},email:"",designation:"",phone:"",address:"",gender:"male",bloodGroup:"",status:!0,dob:"",Emergencyphone:"",maritalStatus:!0,salary:0,acHolderName:"",bankName:"",bankbranch:"",acnumber:"",ifscCode:"",upi:"",adhaar:"",pan:"",skills:[],achievements:[],education:[],defaultPolicies:!0,allowances:[],bonuses:[],deductions:[]},[l,f]=o.useState(H);o.useEffect(()=>{L.length>0&&E(L.filter(s=>{var a;return((a=s==null?void 0:s.branchId)==null?void 0:a._id)==b.branch}))},[b.branch]);const O=(s,a,r,h)=>{const c=[...l[a]];c[r][h]=s.target.value,f(v=>({...v,[a]:c}))},ce=s=>{const a=s==="achievements"?{title:"",description:"",date:""}:{degree:"",institution:"",date:""};f(r=>({...r,[s]:[...r[s],a]}))},oe=(s,a)=>{const r=l[s].filter((h,c)=>c!==a);f(h=>({...h,[s]:r}))},_e=re("employee",2),xe=re("employee",3),$e=re("employee",4);o.useEffect(()=>{if((M==null?void 0:M.length)<1)return;const s=M==null?void 0:M.map(a=>{var r,h,c,v;return{id:a._id,rawname:(r=a==null?void 0:a.userid)==null?void 0:r.name,empId:a==null?void 0:a.empId,name:e.jsxs("div",{className:"flex items-center capitalize gap-3 ",children:[e.jsx(Ie,{src:Ee(a==null?void 0:a.profileimage,{format:"webp",width:100,height:100}),alt:a.employeename,children:!a.profileimage&&Fe}),e.jsxs(T,{children:[e.jsx(Q,{variant:"body2",children:(h=a==null?void 0:a.userid)==null?void 0:h.name}),e.jsxs("p",{className:"t text-[10px] text-gray-600",children:["(",a==null?void 0:a.designation,")"]})]})]}),phone:(a==null?void 0:a.phone)||"-",status:a==null?void 0:a.status,branch:a==null?void 0:a.branchId,department:(c=a==null?void 0:a.department)==null?void 0:c.department,departmentid:(v=a==null?void 0:a.department)==null?void 0:v._id,action:e.jsxs("div",{className:"action flex gap-2.5",children:[e.jsx("span",{className:"eye edit text-[18px] text-green-500 cursor-pointer",title:"View Profile",onClick:()=>{Me(a._id),U(!0)},children:e.jsx(ns,{})}),e.jsx("span",{className:"eye edit text-[18px] text-amber-500 cursor-pointer",title:"Attandence Report",onClick:()=>We(`/dashboard/performance/${a.userid._id}`),children:e.jsx(js,{})}),xe&&e.jsx("span",{className:"edit text-[18px] text-blue-500 cursor-pointer",title:"Edit",onClick:()=>Ge(a),children:e.jsx(Ce,{})}),xe&&e.jsxs("span",{className:"eye edit text-[18px] text-green-500 cursor-pointer",title:"Reset Password",onClick:()=>{ae({...V,userid:a.userid._id}),W(!0)},children:[e.jsx(is,{})," "]}),$e&&e.jsx("span",{className:"delete text-[18px] text-red-500 cursor-pointer",onClick:()=>Ue(a._id),children:e.jsx(Pe,{})})]})}});C(s)},[M]);const d=(s,a)=>{f({...l,[a]:s.target.value})},J=(s,a)=>{de(r=>({...r,[s]:a}))},Le=s=>{const a=s.target.files[0];if(N(a),a){const r=new FileReader;r.onloadend=()=>{p(r.result)},r.readAsDataURL(a)}else p(null)},Re=async s=>{s.preventDefault();const a=new FormData;if(a.append("employeeName",l.employeeName),a.append("branchId",l.branchId),a.append("department",l.department),a.append("email",l.email),a.append("designation",l.designation),a.append("salary",l.salary),$){let r=await ie(350,$);a.append("photo",r)}await Ss({formData:a,dispatch:se,setisload:t,setInp:f,setopenmodal:j,init:H,resetPhoto:K})},Oe=async()=>{console.log(l);const s=new FormData;if(Object.keys(l).forEach(a=>{const r=l[a];Array.isArray(r)||typeof r=="object"?s.append(a,JSON.stringify(r)):s.append(a,r)}),$){let a=await ie(350,$);s.append("photo",a)}await zs({formData:s,dispatch:se,setisload:t,setEmployeePhoto:N,setInp:f,setopenmodal:j,init:H,resetPhoto:K}),p(null),N(null)},K=()=>{p(null),N(null)},Te=async s=>{s.preventDefault();try{const a=localStorage.getItem("emstoken"),r=await Y.post("/api/updatepassword",{pass:V},{headers:{Authorization:`Bearer ${a}`}});ae({userid:"",pass:""}),W(!1),P.success(r.data.message,{autoClose:1200})}catch(a){console.log(a),a.response?P.warn(a.response.data.message,{autoClose:1200}):a.request?console.error("No response from server:",a.request):console.error("Error:",a.message)}},Ge=s=>{var a,r,h,c;_(!0),f({employeeId:s._id,branchId:s==null?void 0:s.branchId,department:(a=s==null?void 0:s.department)==null?void 0:a._id,employeeName:(r=s==null?void 0:s.userid)==null?void 0:r.name,email:(h=s==null?void 0:s.userid)==null?void 0:h.email,dob:s==null?void 0:s.dob,salary:s==null?void 0:s.salary,status:s==null?void 0:s.status,empId:Number((c=s==null?void 0:s.empId)==null?void 0:c.split("EMP")[1]),guardian:s==null?void 0:s.guardian,acHolderName:s==null?void 0:s.acHolderName,bankName:s==null?void 0:s.bankName,bankbranch:s==null?void 0:s.bankbranch,acnumber:s==null?void 0:s.acnumber,ifscCode:s==null?void 0:s.ifscCode,upi:s==null?void 0:s.upi,adhaar:s==null?void 0:s.adhaar,pan:s==null?void 0:s.pan,designation:s==null?void 0:s.designation,phone:s==null?void 0:s.phone,address:(s==null?void 0:s.address)||"",gender:(s==null?void 0:s.gender)||"male",bloodGroup:s==null?void 0:s.bloodGroup,Emergencyphone:s==null?void 0:s.Emergencyphone,skills:s==null?void 0:s.skills,maritalStatus:(s==null?void 0:s.maritalStatus)||!0,achievements:s==null?void 0:s.achievements,education:s==null?void 0:s.education}),s.profileimage&&p(s.profileimage),j(!0)},Ue=s=>{ds({title:"Are you sure?",text:"Once deleted, you will not be able to recover this",icon:"warning",buttons:!0,dangerMode:!0}).then(async a=>{a&&Ps({employeeId:s,setisload:t,dispatch:se})})},he=o.useRef(null),ue=m==null?void 0:m.filter(s=>{var A;const a=((A=s.rawname)==null?void 0:A.toLowerCase())||"",r=s.departmentid||"",h=s.branch||"",c=b.searchText.trim()===""||a.includes(b.searchText.toLowerCase()),v=b.department==="all"||r===b.department,g=b.branch==="all"||h===b.branch;return c&&v&&g}),qe=()=>{const s=["S.No","Name","Email","Department"],a=ue.map((g,A)=>[A+1,g.rawname,g.email,g.department]),r=[s,...a].map(g=>g.join(",")).join(`
`),h=new Blob([r],{type:"text/csv"}),c=URL.createObjectURL(h),v=document.createElement("a");v.href=c,v.download="Employee List.csv",v.click(),URL.revokeObjectURL(c)},X=s=>{Be(a=>a===s?null:s)};return e.jsxs("div",{className:"employee p-1",children:[e.jsxs("div",{className:"flex gap-5 justify-between items-center flex-wrap",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-1 w-full md:w-fit",children:[e.jsx(n,{size:"small",className:"md:col-span-1 md:max-w-[160px] col-span-2",value:b.searchText,onChange:s=>J("searchText",s.target.value),InputProps:{startAdornment:e.jsxs(G,{position:"start",children:["  ",e.jsx(xs,{})," "]}),endAdornment:b.searchText&&e.jsx(G,{position:"end",children:e.jsx(cs,{onClick:()=>J("searchText",""),edge:"end",size:"small",children:e.jsx(os,{})})})},label:"Search Employee"}),e.jsxs(B,{size:"small",className:" md:max-w-[160px] col-span-1",children:[e.jsx(F,{children:"Branch"}),e.jsxs(z,{label:"Branch",value:b.branch,input:e.jsx(Ae,{startAdornment:e.jsx(G,{position:"start",children:e.jsx(ke,{fontSize:"small"})}),label:"Branch"}),onChange:s=>J("branch",s.target.value),children:[e.jsx(u,{value:"all",children:"All"}),R==null?void 0:R.map(s=>e.jsx(u,{value:s._id,children:s.name},s._id))]})]}),e.jsxs(B,{size:"small",className:" md:max-w-[160px] col-span-1",children:[e.jsx(F,{children:"Department"}),e.jsxs(z,{label:"Department",disabled:b.branch==="all",value:b.department,input:e.jsx(Ae,{startAdornment:e.jsx(G,{position:"start",children:e.jsx(ke,{fontSize:"small"})}),label:"Department"}),onChange:s=>J("department",s.target.value),children:[e.jsx(u,{value:"all",children:"All"}),I.length>0?I.map(s=>e.jsx(u,{value:s._id,children:s.department},s._id)):e.jsx(u,{disabled:!0,children:"No departments found"})]})]})]}),e.jsxs("div",{className:"flex gap-1 w-full md:w-fit",children:[e.jsx(k,{variant:"outlined",className:"flex-1 md:w-fit md:flex-none",onClick:qe,startIcon:e.jsx(hs,{}),children:"Export"}),_e&&e.jsx(k,{variant:"contained",className:"flex-[2] md:w-fit md:flex-none",startIcon:e.jsx(us,{}),onClick:()=>j(!0),children:"Add Employee"})]})]}),e.jsx("div",{className:"mt-2 capitalize",children:e.jsx(ms,{columns:ks,data:ue,pagination:!0,customStyles:gs(),highlightOnHover:!0,paginationPerPage:20,paginationRowsPerPageOptions:[20,50,100,300],noDataComponent:e.jsxs("div",{className:"flex items-center gap-2 py-6 text-center text-gray-600 text-sm",children:[e.jsx(Ns,{className:"text-xl"})," No Employee records found."]})})}),e.jsx(le,{open:i,onClose:()=>{j(!1),_(!1),f(H),K()},children:e.jsx("div",{className:"membermodal w-[680px]",children:e.jsx("div",{className:"whole",children:e.jsxs("form",{onSubmit:Re,children:[e.jsx("div",{className:"modalhead",children:S?"Update Employee":"Add Employee"}),e.jsx("span",{className:"modalcontent ",children:e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsxs(B,{fullWidth:!0,required:!0,size:"small",children:[e.jsx(F,{children:"Branch"}),e.jsx(z,{value:l.branchId,label:"branch",onChange:s=>d(s,"branchId"),children:R==null?void 0:R.map(s=>e.jsx(u,{value:s._id,children:s.name},s._id))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(B,{disabled:!l.branchId,fullWidth:!0,required:!0,size:"small",children:[e.jsx(F,{children:"Department"}),e.jsx(z,{value:l.department,label:"Department",onChange:s=>d(s,"department"),children:(L==null?void 0:L.filter(s=>{var a;return((a=s.branchId)==null?void 0:a._id)===l.branchId}).length)>0?L.filter(s=>s.branchId._id===l.branchId).map(s=>e.jsx(u,{value:s._id,children:s.department},s._id)):e.jsx(u,{disabled:!0,children:"No departments found"})})]}),e.jsxs(B,{disabled:!l.branchId,fullWidth:!0,required:!0,size:"small",children:[e.jsx(F,{children:"Status"}),e.jsxs(z,{value:l==null?void 0:l.status,label:"Status",onChange:s=>d(s,"status"),children:[e.jsx(u,{value:!0,children:"Active"}),e.jsx(u,{value:!1,children:"Inactive"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{fullWidth:!0,required:!0,value:l.employeeName,onChange:s=>d(s,"employeeName"),label:"Name",size:"small"}),e.jsx(n,{fullWidth:!0,required:!0,value:l.email,onChange:s=>d(s,"email"),label:"Email",size:"small"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{fullWidth:!0,value:l.designation,onChange:s=>d(s,"designation"),label:"Designation",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.salary,onChange:s=>d(s,"salary"),label:"Salary",size:"small"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{fullWidth:!0,type:"number",value:l.empId,onChange:s=>{s.target.value.length<=3&&d(s,"empId")},label:"Employee ID",size:"small",helperText:`ID - EMP${String((l==null?void 0:l.empId)||"").padStart(3,"0")}`,InputProps:{startAdornment:e.jsx(G,{position:"start",children:"EMP"})},inputProps:{maxLength:3}}),e.jsx(n,{fullWidth:!0,value:(me=l==null?void 0:l.guardian)==null?void 0:me.name,onChange:s=>f(a=>({...a,guardian:{...a.guardian,name:s.target.value}})),label:"Guardian Name",size:"small",InputProps:{startAdornment:e.jsx(G,{position:"start",sx:{minWidth:45},children:e.jsxs(z,{variant:"standard",disableUnderline:!0,value:((ge=l==null?void 0:l.guardian)==null?void 0:ge.relation)||"S/o",onChange:s=>f(a=>({...a,guardian:{...a.guardian,relation:s.target.value}})),children:[e.jsx(u,{value:"S/o",children:"S/o"}),e.jsx(u,{value:"D/o",children:"D/o"}),e.jsx(u,{value:"H/o",children:"H/o"}),e.jsx(u,{value:"W/o",children:"W/o"})]})})}})]}),e.jsx("div",{className:"w-full  flex justify-center",children:e.jsxs("div",{className:"mt-1 w-fit text-center gap-2  relative",children:[e.jsx("input",{style:{display:"none"},type:"file",onChange:Le,ref:he,accept:"image/*",name:"",id:"fileInput"}),q?e.jsx("img",{src:q,alt:"Preview",className:"mt-2 w-[100px] h-[100px] rounded-full object-cover"}):e.jsx(Ie,{sx:{width:100,height:100},alt:l.employeeName,src:"/static/images/avatar/1.jpg"}),e.jsx("span",{onClick:()=>he.current.click(),className:"absolute -bottom-1 -right-1 rounded-full bg-teal-900 text-white p-1",children:e.jsx(Ce,{size:18})})]})}),S&&e.jsxs("div",{className:"border flex flex-col w-full shadow-lg bg-slate-50 border-dashed border-slate-400 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-primary text-white px-4 py-2 rounded-md",onClick:()=>X("personal"),children:[e.jsx("span",{className:"md:font-semibold text-[12px] md:text-sm text-left",children:"Personal Deatils (Optional)"}),D==="personal"?e.jsx(Z,{className:"text-xl"}):e.jsx(ee,{className:"text-xl"})]}),e.jsx("div",{className:`
                          rounded overflow-hidden transition-all duration-300 ease-linear
                          ${D==="personal"?"max-h-[500px] p-2 my-2":"max-h-0 p-0 my-0"}
                        `,children:e.jsxs(T,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsx(n,{fullWidth:!0,value:l.phone,inputProps:{maxLength:10},onChange:s=>d(s,"phone"),label:"Phone",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.Emergencyphone,inputProps:{maxLength:10},onChange:s=>d(s,"Emergencyphone"),label:"Emergency/ Relative Phone",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.address,onChange:s=>d(s,"address"),label:"Address",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.bloodGroup,onChange:s=>d(s,"bloodGroup"),label:"Blood Group",size:"small"}),e.jsx(n,{fullWidth:!0,inputProps:{maxLength:12},value:l.adhaar,onChange:s=>d(s,"adhaar"),label:"Adhaar No.",size:"small"}),e.jsx(n,{fullWidth:!0,inputProps:{maxLength:10},value:l.pan,onChange:s=>d(s,"pan"),label:"Pan No.",size:"small"}),e.jsx(n,{InputLabelProps:{shrink:!0},fullWidth:!0,value:l.dob,type:"date",onChange:s=>d(s,"dob"),label:"Date of Birth",size:"small"}),e.jsxs(B,{size:"small",children:[e.jsx(F,{children:"Marital Status"}),e.jsxs(z,{label:"maritalStatus",value:l.maritalStatus,onChange:s=>d(s,"maritalStatus"),children:[e.jsx(u,{selected:!0,value:!0,children:"Married"}),e.jsx(u,{selected:!0,value:!1,children:"Unmarried"})]})]}),e.jsxs(B,{size:"small",children:[e.jsx(F,{children:"Gender"}),e.jsxs(z,{label:"Gender",value:l.gender,onChange:s=>d(s,"gender"),children:[e.jsx(u,{selected:!0,value:"male",children:"Male"}),e.jsx(u,{selected:!0,value:"female",children:"female"})]})]})]})})]}),S&&e.jsxs("div",{className:"border flex flex-col w-full shadow-lg bg-slate-50 border-dashed border-slate-400 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-primary text-white px-4 py-2 rounded-md",onClick:()=>X("banking"),children:[e.jsx("span",{className:"md:font-semibold text-[12px] md:text-sm text-left",children:"Banking Details (optional)"}),D==="banking"?e.jsx(Z,{className:"text-xl"}):e.jsx(ee,{className:"text-xl"})]}),e.jsx("div",{className:`
                          rounded overflow-hidden transition-all duration-300 ease-linear
                          ${D==="banking"?"max-h-[500px] p-2 my-2":"max-h-0 p-0 my-0"}
                        `,children:e.jsxs(T,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsx(n,{fullWidth:!0,value:l.acHolderName,onChange:s=>d(s,"acHolderName"),label:"A/C Holder Name",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.bankName,onChange:s=>d(s,"bankName"),label:"Bank Name",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.bankbranch,onChange:s=>d(s,"bankbranch"),label:"Branch",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.acnumber,onChange:s=>d(s,"acnumber"),label:"A/C No.",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.ifscCode,onChange:s=>d(s,"ifscCode"),label:"IFSC Code",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.upi,onChange:s=>d(s,"upi"),label:"Upi Id/No.",size:"small"})]})})]}),S&&e.jsxs("div",{className:"border flex flex-col w-full shadow-lg bg-slate-50 border-dashed border-slate-400 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-primary text-white px-4 py-2 rounded-md",onClick:()=>X("document"),children:[e.jsx("span",{className:"md:font-semibold text-[12px] md:text-sm text-left",children:"Document & Skills (optional)"}),D==="document"?e.jsx(Z,{className:"text-xl"}):e.jsx(ee,{className:"text-xl"})]}),e.jsxs("div",{className:`
                          rounded overflow-hidden transition-all duration-300 ease-linear flex gap-6 flex-col
                          ${D==="document"?"max-h-[500px] p-2 my-2":"max-h-0 p-0 my-0"}
                        `,children:[e.jsxs("div",{className:" flex flex-col gap-2",children:[e.jsx(Q,{fontWeight:"bold",children:"Achievements"}),(je=l==null?void 0:l.achievements)==null?void 0:je.map((s,a)=>e.jsxs(T,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",gap:2,alignItems:"center"},children:[e.jsx(n,{label:"Title",size:"small",value:s.title,onChange:r=>O(r,"achievements",a,"title")}),e.jsx(n,{label:"Description",size:"small",value:s.description,onChange:r=>O(r,"achievements",a,"description")}),e.jsx(n,{type:"date",size:"small",label:"Date",InputLabelProps:{shrink:!0},value:s.date,onChange:r=>O(r,"achievements",a,"date")}),e.jsx(Se,{size:24,title:"Delete this",onClick:()=>oe("achievements",a)})]},a)),e.jsx(k,{onClick:()=>ce("achievements"),variant:"outlined",children:"Add Achievement"})]}),e.jsxs("div",{className:" flex flex-col gap-2",children:[e.jsx(Q,{fontWeight:"bold",children:"Education"}),(fe=l==null?void 0:l.education)==null?void 0:fe.map((s,a)=>e.jsxs(T,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",gap:2,alignItems:"center"},children:[e.jsx(n,{label:"Degree",size:"small",value:s.degree,onChange:r=>O(r,"education",a,"degree")}),e.jsx(n,{label:"Institution",size:"small",value:s.institution,onChange:r=>O(r,"education",a,"institution")}),e.jsx(n,{type:"date",size:"small",label:"Date",InputLabelProps:{shrink:!0},value:s.date,onChange:r=>O(r,"education",a,"date")}),e.jsx(Se,{size:24,title:"Delete this",onClick:()=>oe("education",a)})]},a)),e.jsx(k,{onClick:()=>ce("education"),variant:"outlined",children:"Add Education"})]})]})]}),e.jsx(Cs,{control:e.jsx(Is,{checked:l.defaultPolicies,onChange:s=>f(a=>({...a,defaultPolicies:!l.defaultPolicies}))}),label:"Override Payroll Policies",sx:{mt:2}}),S&&l.defaultPolicies&&e.jsxs("div",{className:"border flex flex-col w-full shadow-lg bg-slate-50 border-dashed border-slate-400 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-primary text-white px-4 py-2 rounded-md",onClick:()=>X("policy"),children:[e.jsx("span",{className:"md:font-semibold text-[12px] md:text-sm text-left",children:"Payroll Policies"}),D==="policy"?e.jsx(Z,{className:"text-xl"}):e.jsx(ee,{className:"text-xl"})]}),e.jsxs("div",{className:`
                          rounded overflow-hidden transition-all duration-300 ease-linear flex gap-6 flex-col
                          ${D==="policy"?"max-h-[500px] p-2 my-2":"max-h-0 p-0 my-0"}
                        `,children:[e.jsx("div",{className:"flex flex-col gap-3",children:["allowances","bonuses","deductions"].map(s=>{const a=(l==null?void 0:l[s])||[];return e.jsxs(As,{item:!0,xs:12,md:4,children:[e.jsx(Q,{variant:"h6",className:"capitalize",children:s}),a.map((r,h)=>e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(n,{label:"Name",size:"small",value:r.name,onChange:c=>{const v=a.map((g,A)=>A===h?{...g,name:c.target.value}:g);f({...l,[s]:v})}}),e.jsxs(z,{size:"small",className:"w-[120px]",value:r.type,onChange:c=>{const v=a.map((g,A)=>A===h?{...g,type:c.target.value}:g);f({...l,[s]:v})},children:[e.jsx(u,{value:"amount",children:"Amount"}),e.jsx(u,{value:"percentage",children:"%"})]}),e.jsx(n,{label:r.type==="amount"?"₹":"%",type:"number",size:"small",value:r.value,onChange:c=>{const v=a.map((g,A)=>A===h?{...g,value:Number(c.target.value)}:g);f({...l,[s]:v})}}),e.jsx(Pe,{className:"text-red-500 cursor-pointer text-lg",onClick:()=>{const c=a.filter((v,g)=>g!==h);f({...l,[s]:c})}})]},h)),e.jsxs(k,{size:"small",variant:"outlined",onClick:()=>f({...l,[s]:[...a,{name:"",type:"amount",value:0}]}),children:["+ Add ",s.slice(0,-1)]})]},s)})}),e.jsx(T,{sx:{mt:2,textAlign:"right"},children:e.jsx(k,{variant:"contained",children:"Save Policies"})})]})]})]})}),e.jsxs("div",{className:"modalfooter",children:[e.jsx(k,{size:"small",onClick:()=>{j(!1),_(!1),f(H),K()},variant:"outlined",children:"Cancel"}),S?e.jsx(k,{sx:{mr:2},loading:w,loadingPosition:"end",endIcon:e.jsx(ze,{}),variant:"contained",onClick:Oe,children:"Update"}):e.jsx(k,{sx:{mr:2},loading:w,loadingPosition:"end",endIcon:e.jsx(ze,{}),variant:"contained",type:"submit",children:"Add"})]})]})})})}),e.jsx(le,{open:x,onClose:()=>{U(!1)},children:e.jsx("div",{className:"membermodal w-[690px]",children:e.jsx(Es,{viewEmployee:De})})}),e.jsx(le,{open:y,onClose:()=>{W(!1)},children:e.jsx("div",{className:"membermodal w-[350px]",children:e.jsxs("form",{onSubmit:Te,children:[e.jsx("h2",{children:"Reset Passowrd"}),e.jsxs("div",{className:"modalcontent flex  flex-col gap-3",children:[e.jsx(n,{fullWidth:!0,required:!0,value:V.pass,onChange:s=>ae({...V,pass:s.target.value}),label:"Passowrd",size:"small"}),e.jsx(k,{variant:"contained",sx:{mt:2},type:"submit",children:"Reset Password"})]})]})})})]})};export{Hs as default};
