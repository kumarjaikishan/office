import{r as i,u as c,a as g,j as r,b as f,y as l,s as h,c as x,d as b}from"./index-CjW4X5Ur.js";import{B as v}from"./Box-Bz3CLWhg.js";import{P as y}from"./Select-Ac0ty6HW.js";import{T as j}from"./Typography-ASPArm2Z.js";import{T as d}from"./TextField-DXhoCG0B.js";import{B as w}from"./Button-Tp5yXu1x.js";import"./useSlotProps-B5VaySyr.js";import"./createSimplePaletteValueFilter-Dr898dzn.js";import"./ButtonBase-ByYBLvss.js";const W=()=>{const[s,u]=i.useState(""),[o,m]=i.useState(""),n=c();let t=g();const p=async a=>{if(a.preventDefault(),!s||!o){alert("Please fill in both fields");return}try{const e=await f.post("/api/signin",{email:s,password:o});return console.log("Login success:",e.data),l.success(e.data.message,{autoClose:1200}),localStorage.setItem("emstoken",e.data.token),n(h(!0)),n(x(e.data.user)),e.data.user.role=="admin"||e.data.user.role=="superadmin"?(n(b(!0)),t("/admin-dashboard")):e.data.user.role=="manager"?t("/manager-dashboard"):e.data.user.role=="developer"?t("/developer-dashboard"):t("/employe-dashboard")}catch(e){console.log(e),e.response?l.warn(e.response.data.message,{autoClose:1200}):e.request?console.error("No response from server:",e.request):console.error("Error:",e.message)}};return r.jsx(v,{sx:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",background:"linear-gradient(to bottom, #d0f0c0 50%, #ffffff 50%)"},children:r.jsx(y,{elevation:3,sx:{padding:4,width:320,borderRadius:2},children:r.jsxs("form",{onSubmit:p,children:[r.jsx(j,{variant:"h5",textAlign:"center",gutterBottom:!0,children:"Login"}),r.jsx(d,{label:"Email",type:"email",fullWidth:!0,required:!0,margin:"normal",value:s,onChange:a=>u(a.target.value)}),r.jsx(d,{label:"Password",type:"password",fullWidth:!0,required:!0,margin:"normal",value:o,onChange:a=>m(a.target.value)}),r.jsx(w,{type:"submit",variant:"contained",fullWidth:!0,sx:{marginTop:2},children:"Login"})]})})})};export{W as default};
