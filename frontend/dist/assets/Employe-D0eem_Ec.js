import{h as je,i as ve,r as c,k as be,l as es,m as ss,j as e,n as X,o as ue,p as Ne,q as ae,t as de,b as me,v as De,y as J,G as Me,w as ts,x as Te,z as $e,g as ye,B as Be,D as Fe,E as as,H as rs,M as ns,I as os,J as is,u as ls,f as ds,a as cs,K as We,T as us,A as Ge,L as ms,C as Le,O as xs,P as ps,Q as Ue,R as _e}from"./index-DNmbyctx.js";import{I as qe}from"./index-AgSNMbXd.js";import{M as Se}from"./Modalbox-C2QalrNj.js";import{X as hs}from"./index.es-DhjW5OeU.js";import{I as gs,a as fs}from"./index-Cg7m8i_n.js";import{H as js}from"./index-CMAecGf_.js";import{B as vs,P as bs,L as Ns}from"./index-B8w8GmqR.js";import{A as ws}from"./index-BPc237SY.js";import{u as Cs}from"./imageresizer-D4I-KFLq.js";import{C as Ae}from"./CheckPermission-BXbVdhqU.js";import{u as ys}from"./attandencehelper-DWUDTHwq.js";import{B as Ss}from"./index-MK-4NbxL.js";import{B as te}from"./Box-_Zi1QVWw.js";import{T as ce}from"./Typography-BbUhKY7I.js";import{T as w}from"./TextField-DSXkdIrU.js";import{I as Ee}from"./InputAdornment-DTunrINL.js";import{T as As,g as Oe,u as Es,P as Is,F as ne,I as oe,S as ie,O as He}from"./Select-B-OVomDT.js";import{M as G}from"./MenuItem-DmD-nXE-.js";import{B as Z}from"./Button-DFRYobdU.js";import{u as Ds}from"./useSlotProps-DzawK2Wk.js";import{u as Ps,B as zs}from"./ButtonBase-BoWQgoZ1.js";import"./createSimplePaletteValueFilter-DJWPGhYx.js";function Rs(a){return je("MuiCollapse",a)}ve("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const ks=a=>{const{orientation:o,classes:l}=a,t={root:["root",`${o}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${o}`],wrapperInner:["wrapperInner",`${o}`]};return Ne(t,Rs,l)},Ms=X("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:l}=a;return[o.root,o[l.orientation],l.state==="entered"&&o.entered,l.state==="exited"&&!l.in&&l.collapsedSize==="0px"&&o.hidden]}})(ae(({theme:a})=>({height:0,overflow:"hidden",transition:a.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:a.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:o})=>o.state==="exited"&&!o.in&&o.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),Ts=X("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),$s=X("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Ie=c.forwardRef(function(o,l){const t=be({props:o,name:"MuiCollapse"}),{addEndListener:u,children:x,className:g,collapsedSize:f="0px",component:m,easing:F,in:k,onEnter:D,onEntered:S,onEntering:M,onExit:b,onExited:P,onExiting:j,orientation:v="vertical",style:T,timeout:C=es.standard,TransitionComponent:L=As,...H}=t,A={...t,orientation:v,collapsedSize:f},N=ks(A),y=Ds(),re=Ps(),h=c.useRef(null),z=c.useRef(),p=typeof f=="number"?`${f}px`:f,U=v==="horizontal",_=U?"width":"height",K=c.useRef(null),Y=ss(l,K),i=d=>$=>{if(d){const B=K.current;$===void 0?d(B):d(B,$)}},E=()=>h.current?h.current[U?"clientWidth":"clientHeight"]:0,Q=i((d,$)=>{h.current&&U&&(h.current.style.position="absolute"),d.style[_]=p,D&&D(d,$)}),xe=i((d,$)=>{const B=E();h.current&&U&&(h.current.style.position="");const{duration:ee,easing:V}=Oe({style:T,timeout:C,easing:F},{mode:"enter"});if(C==="auto"){const ge=y.transitions.getAutoHeightDuration(B);d.style.transitionDuration=`${ge}ms`,z.current=ge}else d.style.transitionDuration=typeof ee=="string"?ee:`${ee}ms`;d.style[_]=`${B}px`,d.style.transitionTimingFunction=V,M&&M(d,$)}),pe=i((d,$)=>{d.style[_]="auto",S&&S(d,$)}),we=i(d=>{d.style[_]=`${E()}px`,b&&b(d)}),he=i(P),Ce=i(d=>{const $=E(),{duration:B,easing:ee}=Oe({style:T,timeout:C,easing:F},{mode:"exit"});if(C==="auto"){const V=y.transitions.getAutoHeightDuration($);d.style.transitionDuration=`${V}ms`,z.current=V}else d.style.transitionDuration=typeof B=="string"?B:`${B}ms`;d.style[_]=p,d.style.transitionTimingFunction=ee,j&&j(d)}),I=d=>{C==="auto"&&re.start(z.current||0,d),u&&u(K.current,d)};return e.jsx(L,{in:k,onEnter:Q,onEntered:pe,onEntering:xe,onExit:we,onExited:he,onExiting:Ce,addEndListener:I,nodeRef:K,timeout:C==="auto"?null:C,...H,children:(d,{ownerState:$,...B})=>e.jsx(Ms,{as:m,className:ue(N.root,g,{entered:N.entered,exited:!k&&p==="0px"&&N.hidden}[d]),style:{[U?"minWidth":"minHeight"]:p,...T},ref:Y,ownerState:{...A,state:d},...B,children:e.jsx(Ts,{ownerState:{...A,state:d},className:N.wrapper,ref:h,children:e.jsx($s,{ownerState:{...A,state:d},className:N.wrapperInner,children:x})})})})});Ie&&(Ie.muiSupportAuto=!0);const Xe=c.createContext({});function Bs(a){return je("MuiAccordion",a)}const fe=ve("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),Fs=a=>{const{classes:o,square:l,expanded:t,disabled:u,disableGutters:x}=a;return Ne({root:["root",!l&&"rounded",t&&"expanded",u&&"disabled",!x&&"gutters"],heading:["heading"],region:["region"]},Bs,o)},Ws=X(Is,{name:"MuiAccordion",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:l}=a;return[{[`& .${fe.region}`]:o.region},o.root,!l.square&&o.rounded,!l.disableGutters&&o.gutters]}})(ae(({theme:a})=>{const o={duration:a.transitions.duration.shortest};return{position:"relative",transition:a.transitions.create(["margin"],o),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(a.vars||a).palette.divider,transition:a.transitions.create(["opacity","background-color"],o)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${fe.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${fe.disabled}`]:{backgroundColor:(a.vars||a).palette.action.disabledBackground}}}),ae(({theme:a})=>({variants:[{props:o=>!o.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(a.vars||a).shape.borderRadius,borderTopRightRadius:(a.vars||a).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(a.vars||a).shape.borderRadius,borderBottomRightRadius:(a.vars||a).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:o=>!o.disableGutters,style:{[`&.${fe.expanded}`]:{margin:"16px 0"}}}]}))),Gs=X("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),Ye=c.forwardRef(function(o,l){const t=be({props:o,name:"MuiAccordion"}),{children:u,className:x,defaultExpanded:g=!1,disabled:f=!1,disableGutters:m=!1,expanded:F,onChange:k,square:D=!1,slots:S={},slotProps:M={},TransitionComponent:b,TransitionProps:P,...j}=t,[v,T]=Es({controlled:F,default:g,name:"Accordion",state:"expanded"}),C=c.useCallback(E=>{T(!v),k&&k(E,!v)},[v,k,T]),[L,...H]=c.Children.toArray(u),A=c.useMemo(()=>({expanded:v,disabled:f,disableGutters:m,toggle:C}),[v,f,m,C]),N={...t,square:D,disabled:f,disableGutters:m,expanded:v},y=Fs(N),re={transition:b,...S},h={transition:P,...M},z={slots:re,slotProps:h},[p,U]=de("root",{elementType:Ws,externalForwardedProps:{...z,...j},className:ue(y.root,x),shouldForwardComponentProp:!0,ownerState:N,ref:l,additionalProps:{square:D}}),[_,K]=de("heading",{elementType:Gs,externalForwardedProps:z,className:y.heading,ownerState:N}),[Y,i]=de("transition",{elementType:Ie,externalForwardedProps:z,ownerState:N});return e.jsxs(p,{...U,children:[e.jsx(_,{...K,children:e.jsx(Xe.Provider,{value:A,children:L})}),e.jsx(Y,{in:v,timeout:"auto",...i,children:e.jsx("div",{"aria-labelledby":L.props.id,id:L.props["aria-controls"],role:"region",className:y.region,children:H})})]})});function Ls(a){return je("MuiAccordionDetails",a)}ve("MuiAccordionDetails",["root"]);const Us=a=>{const{classes:o}=a;return Ne({root:["root"]},Ls,o)},_s=X("div",{name:"MuiAccordionDetails",slot:"Root"})(ae(({theme:a})=>({padding:a.spacing(1,2,2)}))),Ve=c.forwardRef(function(o,l){const t=be({props:o,name:"MuiAccordionDetails"}),{className:u,...x}=t,g=t,f=Us(g);return e.jsx(_s,{className:ue(f.root,u),ref:l,ownerState:g,...x})});function qs(a){return je("MuiAccordionSummary",a)}const le=ve("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Os=a=>{const{classes:o,expanded:l,disabled:t,disableGutters:u}=a;return Ne({root:["root",l&&"expanded",t&&"disabled",!u&&"gutters"],focusVisible:["focusVisible"],content:["content",l&&"expanded",!u&&"contentGutters"],expandIconWrapper:["expandIconWrapper",l&&"expanded"]},qs,o)},Hs=X(zs,{name:"MuiAccordionSummary",slot:"Root"})(ae(({theme:a})=>{const o={duration:a.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:a.spacing(0,2),transition:a.transitions.create(["min-height","background-color"],o),[`&.${le.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`&.${le.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity},[`&:hover:not(.${le.disabled})`]:{cursor:"pointer"},variants:[{props:l=>!l.disableGutters,style:{[`&.${le.expanded}`]:{minHeight:64}}}]}})),Ys=X("span",{name:"MuiAccordionSummary",slot:"Content"})(ae(({theme:a})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:o=>!o.disableGutters,style:{transition:a.transitions.create(["margin"],{duration:a.transitions.duration.shortest}),[`&.${le.expanded}`]:{margin:"20px 0"}}}]}))),Vs=X("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(ae(({theme:a})=>({display:"flex",color:(a.vars||a).palette.action.active,transform:"rotate(0deg)",transition:a.transitions.create("transform",{duration:a.transitions.duration.shortest}),[`&.${le.expanded}`]:{transform:"rotate(180deg)"}}))),Je=c.forwardRef(function(o,l){const t=be({props:o,name:"MuiAccordionSummary"}),{children:u,className:x,expandIcon:g,focusVisibleClassName:f,onClick:m,slots:F,slotProps:k,...D}=t,{disabled:S=!1,disableGutters:M,expanded:b,toggle:P}=c.useContext(Xe),j=h=>{P&&P(h),m&&m(h)},v={...t,expanded:b,disabled:S,disableGutters:M},T=Os(v),C={slots:F,slotProps:k},[L,H]=de("root",{ref:l,shouldForwardComponentProp:!0,className:ue(T.root,x),elementType:Hs,externalForwardedProps:{...C,...D},ownerState:v,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:S,"aria-expanded":b,focusVisibleClassName:ue(T.focusVisible,f)},getSlotProps:h=>({...h,onClick:z=>{var p;(p=h.onClick)==null||p.call(h,z),j(z)}})}),[A,N]=de("content",{className:T.content,elementType:Ys,externalForwardedProps:C,ownerState:v}),[y,re]=de("expandIconWrapper",{className:T.expandIconWrapper,elementType:Vs,externalForwardedProps:C,ownerState:v});return e.jsxs(L,{...H,children:[e.jsx(A,{...N,children:u}),g&&e.jsx(y,{...re,children:g})]})}),Js=[{name:"S.no",selector:a=>a.sno,width:"40px"},{name:"Name",selector:a=>a.name},{name:"Email",selector:a=>a.email},{name:"Department",selector:a=>a.department},{name:"Action",selector:a=>a.action,width:"160px"}],Xs=async({formData:a,dispatch:o,setisload:l,setInp:t,setopenmodal:u,init:x,resetPhoto:g})=>{const f=localStorage.getItem("emstoken");l(!0);try{const m=await me.post("/api/addemployee",a,{headers:{Authorization:`Bearer ${f}`,"Content-Type":"multipart/form-data"}});J.success(m.data.message,{autoClose:1200}),t(x),g(),u(!1),o(De())}catch(m){console.log(m),m.response?J.warn(m.response.data.message,{autoClose:1200}):console.error("Error:",m.message)}finally{l(!1)}},Ks=async({formData:a,dispatch:o,setEmployeePhoto:l,setisload:t,setInp:u,setopenmodal:x,init:g})=>{const f=localStorage.getItem("emstoken");t(!0);try{const m=await me.post("/api/updateemployee",a,{headers:{Authorization:`Bearer ${f}`}});J.success(m.data.message,{autoClose:1200}),l(null),u(g),x(!1),o(De())}catch(m){console.log(m),m.response?J.warn(m.response.data.message,{autoClose:1200}):m.request?console.error("No response from server:",m.request):console.error("Error:",m.message)}finally{t(!1)}},Qs=async({employeeId:a,setisload:o,dispatch:l})=>{if(!a){alert("All fileds are Required");return}const t=localStorage.getItem("emstoken");o(!0);try{const u=await me.post("/api/deleteemployee",{employeeId:a},{headers:{Authorization:`Bearer ${t}`}});l(De()),J.success(u.data.message,{autoClose:1200})}catch(u){console.log(u),u.response?J.warn(u.response.data.message,{autoClose:1200}):u.request?console.error("No response from server:",u.request):console.error("Error:",u.message)}finally{o(!1)}},Zs=({viewEmployee:a})=>{var f,m,F,k,D,S,M;const[o,l]=c.useState(!1),[t,u]=c.useState(null),[x,g]=c.useState(1);return c.useEffect(()=>{(async()=>{const P=localStorage.getItem("emstoken");l(!0);try{const j=await me.get(`/api/getemployee?empid=${a}`,{headers:{Authorization:`Bearer ${P}`}});u(j.data)}catch(j){console.log(j),j.response?J.warn(j.response.data.message,{autoClose:1200}):j.request?console.error("No response from server:",j.request):console.error("Error:",j.message)}finally{l(!1)}})()},[]),e.jsx(e.Fragment,{children:o?e.jsxs("div",{className:"w-full h-[300px] flex gap-5 flex-col justify-center items-center bg-white",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Me,{className:"animate-spin",style:{animationDuration:"2.5s"},size:50,color:"teal"}),e.jsx(Me,{className:"absolute -bottom-4 left-0 animate-spin",style:{animationDuration:"3s"},size:20,color:"teal"})]}),e.jsx("p",{className:"text-teal-600",children:"loading..."})]}):e.jsxs("div",{className:"max-w-3xl mx-auto bg-white flex flex-col shadow rounded-lg p-2 md:p-4 ",children:[e.jsx("h2",{className:"text-xl mx-auto font-semibold text-gray-700 mb-4",children:"Employee Details"}),e.jsxs("div",{className:"flex gap-4  pb-2 md:items-start",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full border-2 border-teal-500 border-dashed p-[2px] flex items-center justify-center overflow-hidden",children:t!=null&&t.profileimage?e.jsx("img",{src:t.profileimage,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):e.jsx(ts,{className:"text-3xl text-gray-500"})}),e.jsxs("div",{className:"md:flex-1 w-auto",children:[e.jsx("h3",{className:"text-l md:text-xl capitalize font-bold text-gray-800",children:(f=t==null?void 0:t.userid)==null?void 0:f.name}),e.jsx("p",{className:"text-sm text-gray-600",children:(m=t==null?void 0:t.userid)==null?void 0:m.role}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded",children:t==null?void 0:t.department.department}),e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-800 text-xs rounded",children:"active"})]}),e.jsxs("div",{className:"hidden md:flex mt-3 justify-start flex-wrap text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Te,{className:"text-gray-500 lowercase"})," ",(F=t==null?void 0:t.userid)==null?void 0:F.email]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx($e,{className:"text-gray-500"})," ",(t==null?void 0:t.phone)||"N/A"]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Be,{className:"text-gray-500"})," ",ye((k=t==null?void 0:t.userid)==null?void 0:k.createdAt).format("DD MMM, YYYY")]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Fe,{className:"text-gray-500"})," ID: emp0002"]})]})]})]}),e.jsxs("div",{className:"md:hidden mt-3 justify-start flex flex-wrap text-[12px] md:text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Te,{className:"text-gray-500 lowercase"})," ",(D=t==null?void 0:t.userid)==null?void 0:D.email]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx($e,{className:"text-gray-500"})," ",(t==null?void 0:t.phone)||"N/A"]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Be,{className:"text-gray-500"})," ",ye((S=t==null?void 0:t.userid)==null?void 0:S.createdAt).format("DD MMM, YYYY")]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Fe,{className:"text-gray-500"})," ID: emp0002"]})]}),e.jsxs("div",{className:"pt-1 capitalize",children:[e.jsxs("div",{className:"flex gap-2 md:gap-6 bg-slate-200 p-1 mt-2 text-[12px] md:text-sm font-medium text-gray-700",children:[e.jsx("div",{onClick:()=>g(1),className:`${x==1?"bg-white":"text-gray-400"} w-1/3 cursor-pointer py-1.5 text-center rounded`,children:"Personal Info"}),e.jsx("div",{onClick:()=>g(2),className:`${x==2?"bg-white":"text-gray-400"} w-1/3 cursor-pointer py-1.5 text-center rounded`,children:"Employment"}),e.jsx("div",{onClick:()=>g(3),className:`${x==3?"bg-white":"text-gray-400"} w-1/3 cursor-pointer py-1.5 text-center rounded`,children:"Documents & Skills"})]}),x==1&&e.jsxs("div",{className:"mt-2 grid grid-cols-2 max-h-[300px] overflow-y-auto md:grid-cols-2 gap-4 text-[12px] md:text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(as,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Date of Birth"}),e.jsx("div",{children:t!=null&&t.dob?ye(t==null?void 0:t.dob).format("DD MMM,YYYY"):"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Address"}),e.jsx("div",{children:(t==null?void 0:t.address)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ns,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Emergency Contact"}),e.jsx("div",{children:(t==null?void 0:t.Emergencyphone)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(vs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Blood Group"}),e.jsx("div",{children:(t==null?void 0:t.bloodGroup)||"N/A"})]})]})]}),x==2&&e.jsxs("div",{className:"mt-2 grid grid-cols-2 max-h-[300px] overflow-y-auto md:grid-cols-2 gap-4 text-[12px] md:text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(bs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Position"}),e.jsx("div",{children:(t==null?void 0:t.designation)||"Accounts"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(os,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Department"}),e.jsx("div",{children:((M=t==null?void 0:t.department)==null?void 0:M.department)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(is,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Salary"}),e.jsx("div",{children:(t==null?void 0:t.salary)||"N/A"})]})]})]}),x==3&&e.jsxs("div",{className:"mt-2 p-2 grid grid-cols-1 max-h-[300px] overflow-y-auto sm:grid-cols-2 gap-4 text-[12px] md:text-sm text-gray-700",children:[e.jsxs("div",{className:"rounded border border-gray-300 bg-white p-2 md:p-4 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Education"}),t.education.length>0?t.education.map(b=>e.jsxs("div",{className:"relative my-1 pl-2 rounded overflow-hidden",children:[e.jsx("p",{className:"text-gray-700 font-semibold",children:b.degree}),e.jsx("p",{className:"text-gray-700",children:b.institution}),e.jsx("p",{className:"text-gray-500 text-[10px]",children:b.date}),e.jsx("span",{className:"absolute w-0.5 h-full bg-amber-800 top-0 left-0"})]})):e.jsx("div",{children:"No Data found"})]}),e.jsxs("div",{className:"rounded border border-gray-300 bg-white p-2 md:p-4 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Achievement"}),t.achievements.length>0?t.achievements.map(b=>e.jsxs("div",{className:"relative my-1 pl-5 rounded overflow-hidden",children:[e.jsx("p",{className:"text-gray-700 font-semibold",children:b.title}),e.jsx("p",{className:"text-gray-700",children:b.description}),e.jsx("p",{className:"text-gray-500 text-[10px]",children:b.date}),e.jsxs("span",{className:"absolute top-1 -left-0",children:[" ",e.jsx(Ns,{size:18,color:"orange"})," "]}),e.jsx("span",{className:"absolute w-0.5 h-full bg-blue-500 top-0 right-0"})]})):e.jsx("div",{children:"No Achievement found"})]})]})]})]})})},wt=()=>{var Re,ke;const[a,o]=c.useState(!1),[l,t]=c.useState(!1),[u,x]=c.useState([]),[g,f]=c.useState([]),[m,F]=c.useState(!1),[k,D]=c.useState(!1),[S,M]=c.useState(!1),[b,P]=c.useState(null),[j,v]=c.useState(null),[T,C]=c.useState(null),{handleImage:L}=Cs(),H=ls(),{department:A,branch:N,employee:y,profile:re}=ds(s=>s.user),[h,z]=c.useState({userid:"",pass:""}),[p,U]=c.useState({searchText:"",branch:"all",department:"all"}),_="https://res.cloudinary.com/dusxlxlvm/image/upload/v1753113610/ems/assets/employee_fi3g5p.webp";c.useEffect(()=>{U(s=>({...s,department:"all"}))},[p.branch]);let K=cs();const Y={employeeId:"",branchId:"",department:"",employeeName:"",email:"",designation:"",phone:"",address:"",gender:"male",bloodGroup:"",dob:"",Emergencyphone:"",skills:[],maritalStatus:!0,salary:0,achievements:[],education:[]},[i,E]=c.useState(Y);c.useEffect(()=>{A.length>0&&f(A.filter(s=>{var n;return((n=s==null?void 0:s.branchId)==null?void 0:n._id)==p.branch}))},[p.branch]);const Q=(s,n,r,R)=>{const W=[...i[n]];W[r][R]=s.target.value,E(q=>({...q,[n]:W}))},xe=s=>{const n=s==="achievements"?{title:"",description:"",date:""}:{degree:"",institution:"",date:""};E(r=>({...r,[s]:[...r[s],n]}))},pe=(s,n)=>{const r=i[s].filter((R,W)=>W!==n);E(R=>({...R,[s]:r}))},we=Ae("employee",2),he=Ae("employee",3),Ce=Ae("employee",4);c.useEffect(()=>{if((y==null?void 0:y.length)<1)return;let s=1;const n=y==null?void 0:y.map(r=>{var R,W,q,O,se;return{id:r._id,sno:s++,rawname:(R=r==null?void 0:r.userid)==null?void 0:R.name,name:e.jsxs("div",{className:"flex items-center capitalize gap-3 ",children:[e.jsx(Ge,{src:r.profileimage||_,alt:r.employeename,children:!r.profileimage&&_}),e.jsxs(te,{children:[e.jsx(ce,{variant:"body2",children:(W=r==null?void 0:r.userid)==null?void 0:W.name}),e.jsxs("p",{className:"t text-[10px] text-gray-600",children:["(",r==null?void 0:r.designation,")"]})]})]}),email:(q=r==null?void 0:r.userid)==null?void 0:q.email,branch:r==null?void 0:r.branchId,department:(O=r==null?void 0:r.department)==null?void 0:O.department,departmentid:(se=r==null?void 0:r.department)==null?void 0:se._id,action:e.jsxs("div",{className:"action flex gap-2.5",children:[e.jsx("span",{className:"eye edit text-[18px] text-green-500 cursor-pointer",title:"View Profile",onClick:()=>{C(r._id),F(!0)},children:e.jsx(gs,{})}),e.jsx("span",{className:"eye edit text-[18px] text-amber-500 cursor-pointer",title:"Attandence Report",onClick:()=>K(`/dashboard/performance/${r.userid._id}`),children:e.jsx(js,{})}),he&&e.jsx("span",{className:"edit text-[18px] text-blue-500 cursor-pointer",title:"Edit",onClick:()=>Ke(r),children:e.jsx(We,{})}),he&&e.jsxs("span",{className:"eye edit text-[18px] text-green-500 cursor-pointer",title:"Reset Password",onClick:()=>{z({...h,userid:r.userid._id}),D(!0)},children:[e.jsx(us,{})," "]}),Ce&&e.jsx("span",{className:"delete text-[18px] text-red-500 cursor-pointer",onClick:()=>Qe(r._id),children:e.jsx(ws,{})})]})}});x(n)},[y]);const I=(s,n)=>{E({...i,[n]:s.target.value})},d=(s,n)=>{U(r=>({...r,[s]:n}))},$=s=>{const n=s.target.files[0];if(v(n),n){const r=new FileReader;r.onloadend=()=>{P(r.result)},r.readAsDataURL(n)}else P(null)},B=async s=>{s.preventDefault();const n=new FormData;if(n.append("employeeName",i.employeeName),n.append("branchId",i.branchId),n.append("department",i.department),n.append("email",i.email),n.append("designation",i.designation),n.append("salary",i.salary),j){let r=await L(300,j);n.append("photo",r)}await Xs({formData:n,dispatch:H,setisload:t,setInp:E,setopenmodal:o,init:Y,resetPhoto:V})},ee=async()=>{const s=new FormData;if(Object.keys(i).forEach(n=>{const r=i[n];Array.isArray(r)||typeof r=="object"?s.append(n,JSON.stringify(r)):s.append(n,r)}),j){let n=await L(300,j);s.append("photo",n)}await Ks({formData:s,dispatch:H,setisload:t,setEmployeePhoto:v,setInp:E,setopenmodal:o,init:Y,resetPhoto:V}),P(null),v(null)},V=()=>{P(null),v(null)},ge=async s=>{s.preventDefault();try{const n=localStorage.getItem("emstoken"),r=await me.post("/api/updatepassword",{pass:h},{headers:{Authorization:`Bearer ${n}`}});z({userid:"",pass:""}),D(!1),J.success(r.data.message,{autoClose:1200})}catch(n){console.log(n),n.response?J.warn(n.response.data.message,{autoClose:1200}):n.request?console.error("No response from server:",n.request):console.error("Error:",n.message)}},Ke=s=>{var n,r,R;M(!0),E({employeeId:s._id,branchId:s==null?void 0:s.branchId,department:(n=s==null?void 0:s.department)==null?void 0:n._id,employeeName:(r=s==null?void 0:s.userid)==null?void 0:r.name,email:(R=s==null?void 0:s.userid)==null?void 0:R.email,dob:s==null?void 0:s.dob,salary:s==null?void 0:s.salary,designation:s==null?void 0:s.designation,phone:s==null?void 0:s.phone,address:(s==null?void 0:s.address)||"",gender:(s==null?void 0:s.gender)||"male",bloodGroup:s==null?void 0:s.bloodGroup,Emergencyphone:s==null?void 0:s.Emergencyphone,skills:s==null?void 0:s.skills,maritalStatus:(s==null?void 0:s.maritalStatus)||!0,achievements:s==null?void 0:s.achievements,education:s==null?void 0:s.education}),s.profileimage&&P(s.profileimage),o(!0)},Qe=s=>{ms({title:"Are you sure?",text:"Once deleted, you will not be able to recover this",icon:"warning",buttons:!0,dangerMode:!0}).then(async n=>{n&&Qs({employeeId:s,setisload:t,dispatch:H})})},Pe=c.useRef(null),ze=u==null?void 0:u.filter(s=>{var se;const n=((se=s.rawname)==null?void 0:se.toLowerCase())||"",r=s.departmentid||"",R=s.branch||"",W=p.searchText.trim()===""||n.includes(p.searchText.toLowerCase()),q=p.department==="all"||r===p.department,O=p.branch==="all"||R===p.branch;return W&&q&&O}),Ze=()=>{const s=["S.No","Name","Email","Department"],n=ze.map((O,se)=>[se+1,O.rawname,O.email,O.department]),r=[s,...n].map(O=>O.join(",")).join(`
`),R=new Blob([r],{type:"text/csv"}),W=URL.createObjectURL(R),q=document.createElement("a");q.href=W,q.download="Employee List.csv",q.click(),URL.revokeObjectURL(W)};return e.jsxs("div",{className:"employee p-1",children:[e.jsxs("div",{className:"flex gap-5 justify-between items-center flex-wrap",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-1 w-full md:w-fit",children:[e.jsx(w,{size:"small",className:"md:col-span-1 md:max-w-[160px] col-span-2",value:p.searchText,onChange:s=>d("searchText",s.target.value),InputProps:{startAdornment:e.jsx(Ee,{position:"start",children:e.jsx(fs,{})})},label:"Search Employee"}),e.jsxs(ne,{size:"small",className:" md:max-w-[160px] col-span-1",children:[e.jsx(oe,{children:"Branch"}),e.jsxs(ie,{label:"Branch",value:p.branch,input:e.jsx(He,{startAdornment:e.jsx(Ee,{position:"start",children:e.jsx(Le,{fontSize:"small"})}),label:"Branch"}),onChange:s=>d("branch",s.target.value),children:[e.jsx(G,{value:"all",children:"All"}),N==null?void 0:N.map(s=>e.jsx(G,{value:s._id,children:s.name},s._id))]})]}),e.jsxs(ne,{size:"small",className:" md:max-w-[160px] col-span-1",children:[e.jsx(oe,{children:"Department"}),e.jsxs(ie,{label:"Department",disabled:p.branch==="all",value:p.department,input:e.jsx(He,{startAdornment:e.jsx(Ee,{position:"start",children:e.jsx(Le,{fontSize:"small"})}),label:"Department"}),onChange:s=>d("department",s.target.value),children:[e.jsx(G,{value:"all",children:"All"}),g.length>0?g.map(s=>e.jsx(G,{value:s._id,children:s.department},s._id)):e.jsx(G,{disabled:!0,children:"No departments found"})]})]})]}),e.jsxs("div",{className:"flex gap-1 w-full md:w-fit",children:[e.jsx(Z,{variant:"outlined",className:"flex-1 md:w-fit md:flex-none",onClick:Ze,startIcon:e.jsx(xs,{}),children:"Export"}),we&&e.jsx(Z,{variant:"contained",className:"flex-[2] md:w-fit md:flex-none",startIcon:e.jsx(ps,{}),onClick:()=>o(!0),children:"Add Employee"})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(hs,{columns:Js,data:ze,pagination:!0,customStyles:ys(),highlightOnHover:!0,noDataComponent:e.jsxs("div",{className:"flex items-center gap-2 py-6 text-center text-gray-600 text-sm",children:[e.jsx(Ss,{className:"text-xl"})," No Employee records found."]})})}),e.jsx(Se,{open:a,onClose:()=>{o(!1),M(!1),E(Y),V()},children:e.jsx("div",{className:"membermodal",children:e.jsx("div",{className:"whole",children:e.jsxs("form",{onSubmit:B,children:[e.jsx("div",{className:"modalhead",children:S?"Update Employee":"Add Employee"}),e.jsxs("span",{className:"modalcontent ",children:[e.jsxs(ne,{fullWidth:!0,required:!0,size:"small",children:[e.jsx(oe,{children:"Branch"}),e.jsx(ie,{value:i.branchId,label:"branch",onChange:s=>I(s,"branchId"),children:N==null?void 0:N.map(s=>e.jsx(G,{value:s._id,children:s.name},s._id))})]}),e.jsxs(ne,{disabled:!i.branchId,fullWidth:!0,required:!0,size:"small",children:[e.jsx(oe,{children:"Department"}),e.jsx(ie,{value:i.department,label:"Department",onChange:s=>I(s,"department"),children:(A==null?void 0:A.filter(s=>{var n;return((n=s.branchId)==null?void 0:n._id)===i.branchId}).length)>0?A.filter(s=>s.branchId._id===i.branchId).map(s=>e.jsx(G,{value:s._id,children:s.department},s._id)):e.jsx(G,{disabled:!0,children:"No departments found"})})]}),e.jsxs(te,{sx:{width:"100%",gap:2},children:[e.jsx(w,{fullWidth:!0,required:!0,value:i.employeeName,onChange:s=>I(s,"employeeName"),label:"Name",size:"small"}),e.jsx(w,{fullWidth:!0,required:!0,value:i.email,onChange:s=>I(s,"email"),label:"Email",size:"small"})]}),e.jsxs(te,{sx:{width:"100%",gap:2},children:[e.jsx(w,{fullWidth:!0,value:i.designation,onChange:s=>I(s,"designation"),label:"Designation",size:"small"}),e.jsx(w,{fullWidth:!0,value:i.salary,onChange:s=>I(s,"salary"),label:"Salary",size:"small"})]}),e.jsxs("div",{className:"mt-1 gap-2 flex items-center relative",children:[e.jsx("input",{style:{display:"none"},type:"file",onChange:$,ref:Pe,accept:"image/*",name:"",id:"fileInput"}),b?e.jsx("img",{src:b,alt:"Preview",className:"mt-2 w-[100px] h-[100px] rounded-full object-cover"}):e.jsx(Ge,{sx:{width:100,height:100},alt:i.employeeName,src:"/static/images/avatar/1.jpg"}),e.jsx("span",{onClick:()=>Pe.current.click(),className:"absolute -bottom-1 -right-1 rounded-full bg-teal-900 text-white p-1",children:e.jsx(We,{size:18})})]}),S&&e.jsx("div",{className:"border w-full rounded border-dashed border-slate-400",children:e.jsxs(Ye,{sx:{width:"100%"},className:"flex rounded  flex-col",children:[e.jsx(Je,{expandIcon:e.jsx(Ue,{}),children:e.jsx(ce,{variant:"subtitle1",children:"Personal Details (optional)"})}),e.jsx(Ve,{children:e.jsxs(te,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsx(w,{fullWidth:!0,value:i.phone,onChange:s=>I(s,"phone"),label:"Phone",size:"small"}),e.jsx(w,{fullWidth:!0,value:i.Emergencyphone,onChange:s=>I(s,"Emergencyphone"),label:"Emergencyphone",size:"small"}),e.jsx(w,{fullWidth:!0,value:i.address,onChange:s=>I(s,"address"),label:"Address",size:"small"}),e.jsx(w,{fullWidth:!0,value:i.bloodGroup,onChange:s=>I(s,"bloodGroup"),label:"Blood Group",size:"small"}),e.jsx(w,{InputLabelProps:{shrink:!0},fullWidth:!0,value:i.dob,type:"date",onChange:s=>I(s,"dob"),label:"Date of Birth",size:"small"}),e.jsxs(ne,{size:"small",children:[e.jsx(oe,{children:"maritalStatus"}),e.jsxs(ie,{label:"maritalStatus",value:i.maritalStatus,onChange:s=>I(s,"maritalStatus"),children:[e.jsx(G,{selected:!0,value:!0,children:"Married"}),e.jsx(G,{selected:!0,value:!1,children:"Unmarried"})]})]}),e.jsxs(ne,{size:"small",children:[e.jsx(oe,{children:"Gender"}),e.jsxs(ie,{label:"Gender",value:i.gender,onChange:s=>I(s,"gender"),children:[e.jsx(G,{selected:!0,value:"male",children:"Male"}),e.jsx(G,{selected:!0,value:"female",children:"female"})]})]})]})})]})}),S&&e.jsx("div",{className:"border w-full rounded border-dashed border-slate-400",children:e.jsxs(Ye,{sx:{width:"100%"},className:"flex flex-col",children:[e.jsx(Je,{expandIcon:e.jsx(Ue,{}),children:e.jsx(ce,{variant:"subtitle1",children:"Document & Skills (optional)"})}),e.jsxs(Ve,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(te,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2}}),e.jsx(ce,{fontWeight:"bold",children:"Achievements"}),(Re=i==null?void 0:i.achievements)==null?void 0:Re.map((s,n)=>e.jsxs(te,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",gap:2,alignItems:"center"},children:[e.jsx(w,{label:"Title",size:"small",value:s.title,onChange:r=>Q(r,"achievements",n,"title")}),e.jsx(w,{label:"Description",size:"small",value:s.description,onChange:r=>Q(r,"achievements",n,"description")}),e.jsx(w,{type:"date",size:"small",label:"Date",InputLabelProps:{shrink:!0},value:s.date,onChange:r=>Q(r,"achievements",n,"date")}),e.jsx(_e,{size:24,title:"Delete this",onClick:()=>pe("achievements",n)})]},n)),e.jsx(Z,{onClick:()=>xe("achievements"),variant:"outlined",children:"Add Achievement"}),e.jsx(ce,{fontWeight:"bold",children:"Education"}),(ke=i==null?void 0:i.education)==null?void 0:ke.map((s,n)=>e.jsxs(te,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",gap:2,alignItems:"center"},children:[e.jsx(w,{label:"Degree",size:"small",value:s.degree,onChange:r=>Q(r,"education",n,"degree")}),e.jsx(w,{label:"Institution",size:"small",value:s.institution,onChange:r=>Q(r,"education",n,"institution")}),e.jsx(w,{type:"date",size:"small",label:"Date",InputLabelProps:{shrink:!0},value:s.date,onChange:r=>Q(r,"education",n,"date")}),e.jsx(_e,{size:24,title:"Delete this",onClick:()=>pe("education",n)})]},n)),e.jsx(Z,{onClick:()=>xe("education"),variant:"outlined",children:"Add Education"})]})]})})]}),e.jsxs("div",{className:"modalfooter",children:[e.jsx(Z,{size:"small",onClick:()=>{o(!1),M(!1),E(Y),V()},variant:"outlined",children:"Cancel"}),S?e.jsx(Z,{sx:{mr:2},loading:l,loadingPosition:"end",endIcon:e.jsx(qe,{}),variant:"contained",onClick:ee,children:"Update"}):e.jsx(Z,{sx:{mr:2},loading:l,loadingPosition:"end",endIcon:e.jsx(qe,{}),variant:"contained",type:"submit",children:"Add"})]})]})})})}),e.jsx(Se,{open:m,onClose:()=>{F(!1)},children:e.jsx("div",{className:"membermodal",children:e.jsx(Zs,{viewEmployee:T})})}),e.jsx(Se,{open:k,onClose:()=>{D(!1)},children:e.jsx("div",{className:"membermodal",children:e.jsxs("form",{onSubmit:ge,children:[e.jsx("h2",{children:"Reset Passowrd"}),e.jsxs("span",{className:"modalcontent ",children:[e.jsx(w,{fullWidth:!0,required:!0,value:h.pass,onChange:s=>z({...h,pass:s.target.value}),label:"Passowrd",size:"small"}),e.jsx(Z,{variant:"contained",sx:{mr:2},type:"submit",children:"Reset Password"})]})]})})})]})};export{wt as default};
