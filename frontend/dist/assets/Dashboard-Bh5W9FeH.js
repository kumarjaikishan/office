import{r as d,c as u,y as n,j as a,B as x,$ as A,a0 as $,a1 as D,h as M,a2 as z,a3 as B,b as h,U,W as I}from"./index-CXypEiKM.js";const W=()=>{d.useEffect(()=>{m()},[]);const p={userid:"",name:"",email:"",password:""},[j,v]=d.useState([]),[y,l]=d.useState(!1),[r,c]=d.useState(p),[g,f]=d.useState(!1),m=async()=>{var e,s;try{const t=localStorage.getItem("emstoken"),o=await u.get("/api/developerfetch",{headers:{Authorization:`Bearer ${t}`}});v(o.data.users)}catch(t){console.log(t),n.warn(((s=(e=t.response)==null?void 0:e.data)==null?void 0:s.message)||"Error",{autoClose:3e3})}},C=async e=>{var s,t;e.preventDefault();try{const o=localStorage.getItem("emstoken"),i=await u.post("/api/User",{...r},{headers:{Authorization:`Bearer ${o}`}});l(!1),m(),n.success(i.data.message,{autoClose:1800})}catch(o){console.log(o),n.warn(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error",{autoClose:3e3})}finally{}},w=e=>{c({userid:e==null?void 0:e._id,name:e==null?void 0:e.registeredName,email:e==null?void 0:e.email}),f(!0),l(!0)},N=e=>{swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this",icon:"warning",buttons:!0,dangerMode:!0}).then(async s=>{var t,o;if(s)try{const i=localStorage.getItem("emstoken"),E=await u.delete(`/api/User/${e}`,{headers:{Authorization:`Bearer ${i}`}});m(),n.success(E.data.message,{autoClose:1800})}catch(i){console.log(i),n.warn(((o=(t=i.response)==null?void 0:t.data)==null?void 0:o.message)||"Error",{autoClose:3e3})}})},S=async()=>{var e,s;try{const t=localStorage.getItem("emstoken"),o=await u.put(`/api/User/${r.userid}`,{name:r.name,email:r.email},{headers:{Authorization:`Bearer ${t}`}});l(!1),m(),n.success(o.data.message,{autoClose:1800})}catch(t){console.log(t),n.warn(((s=(e=t.response)==null?void 0:e.data)==null?void 0:s.message)||"Error",{autoClose:3e3})}},b=()=>{l(!1),c(p),f(!1)},k=[{name:"S.No",selector:(e,s)=>s+1,width:"60px"},{name:"Name",selector:e=>(e==null?void 0:e.registeredName)??""},{name:"Email",selector:e=>e.email},{name:"Date",selector:e=>M(e.createdAt).format("DD MMM, YY")},{name:"Status",selector:e=>e.stat||"-",width:"130px"},{name:"Action",width:"100px",cell:e=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx("span",{className:"text-[18px] text-blue-500 cursor-pointer",title:"Edit",onClick:()=>w(e),children:a.jsx(U,{})}),a.jsx("span",{className:"text-[18px] text-red-500 cursor-pointer",title:"Delete",onClick:()=>N(e._id),children:a.jsx(I,{})})]})}];return a.jsxs("div",{children:[a.jsx("div",{className:"my-1 flex justify-end",children:a.jsx(x,{variant:"contained",className:"flex-[2] md:w-fit md:flex-none",startIcon:a.jsx(A,{}),onClick:()=>l(!0),children:"Add User"})}),a.jsx($,{columns:k,data:j,pagination:!0,customStyles:D(),highlightOnHover:!0,noDataComponent:a.jsxs("div",{className:"flex items-center gap-2 py-6 text-center text-gray-600 text-sm",children:[a.jsx(z,{className:"text-xl"})," No records found matching your criteria."]})}),a.jsx(B,{open:y,onClose:()=>{l(!1)},children:a.jsx("div",{className:"membermodal",children:a.jsxs("form",{onSubmit:C,children:[a.jsx("h2",{children:"Add New User"}),a.jsxs("span",{className:"modalcontent ",children:[a.jsx(h,{fullWidth:!0,required:!0,value:r.name,onChange:e=>c({...r,name:e.target.value}),label:"Name",size:"small"}),a.jsx(h,{fullWidth:!0,required:!0,type:"email",value:r.email,onChange:e=>c({...r,email:e.target.value}),label:"Email",size:"small"}),!g&&a.jsx(h,{fullWidth:!0,required:!0,type:"password",value:r.password,onChange:e=>c({...r,password:e.target.value}),label:"Passowrd",size:"small"}),a.jsxs("div",{children:[g?a.jsx(x,{variant:"contained",sx:{mr:2},onClick:S,children:"Save"}):a.jsx(x,{variant:"contained",sx:{mr:2},type:"submit",children:"Add User"}),a.jsx(x,{variant:"outlined",onClick:b,sx:{mr:2},children:"Cancel"})]})]})]})})})]})};export{W as default};
