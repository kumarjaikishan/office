import{j as e,r as s,f as S,y as c,b as C}from"./index-CleMBIBn.js";import{d as u}from"./dayjs.min-DSKahEwl.js";import{X as Y}from"./index.es-BzX17GyM.js";import{M as F}from"./Modalbox-rZpR_NLY.js";import{a as w}from"./index-D4eCxbfa.js";import{c as k}from"./attandencehelper-Beqd0JoK.js";import{B as p}from"./Button-CoB3H69l.js";import{A as q}from"./AdapterDateFns-B7svWd75.js";import{F as A,I as L,S as N}from"./Select-D3hz-9Ri.js";import{M as f}from"./MenuItem-DOZMs1J2.js";import{T as R}from"./TextField-DiABiCHh.js";import{L as E}from"./dateViewRenderers-0RYz08Yo.js";import{D as v}from"./DatePicker-ro-towT5.js";import"./createSimplePaletteValueFilter-BYlBxWKv.js";import"./ButtonBase-CbJsO36x.js";import"./useSlotProps-BIGTSc1Y.js";import"./index-CXJKyJbC.js";import"./useThemeProps-BV0FlUHH.js";import"./Typography-CcZCxKTQ.js";import"./IconButton-D4KmSlhp.js";import"./InputAdornment-BHx7rmla.js";import"./Popper-B5MW3hMa.js";const oe=()=>{const t={type:"",fromDate:null,toDate:null,reason:""},[r,o]=s.useState(t),[b,y]=s.useState([]),{leave:m}=S(a=>a.employee),[D,l]=s.useState(!1),[x,h]=s.useState(!1),n=(a,d)=>{o({...r,[d]:a})};s.useEffect(()=>{m&&y(m)},[m]);const M=async a=>{var j,g;if(a.preventDefault(),!r.fromDate)return c.warn("From Date is required");const d=localStorage.getItem("emstoken");h(!0);try{const i=await C.post("/api/addleave",{...r},{headers:{Authorization:`Bearer ${d}`}});l(!1),o(t),c.success(i.data.message,{autoClose:2e3})}catch(i){console.error(i),c.warning(((g=(j=i.response)==null?void 0:j.data)==null?void 0:g.message)||"Error",{autoClose:2e3})}finally{h(!1)}};return e.jsxs("div",{className:"employee p-2.5",children:[e.jsx("div",{className:"flex justify-end mb-2",children:e.jsx("div",{className:"flex gap-1",children:e.jsx(p,{variant:"contained",startIcon:e.jsx(w,{}),onClick:()=>l(!0),children:"Add Leave"})})}),e.jsx(Y,{customStyles:k,columns:I,data:b,pagination:!0,highlightOnHover:!0}),e.jsx(F,{open:D,onClose:()=>{l(!1),o(t)},children:e.jsx("div",{className:"membermodal w-[400px]",children:e.jsxs("form",{onSubmit:M,children:[e.jsx("h2",{children:"Add Leave Request"}),e.jsx("span",{className:"modalcontent ",children:e.jsxs(E,{dateAdapter:q,children:[e.jsxs(A,{required:!0,fullWidth:!0,size:"small",children:[e.jsx(L,{children:"Type"}),e.jsxs(N,{label:"Department",value:r.type,onChange:a=>n(a.target.value,"type"),children:[e.jsx(f,{selected:!0,value:"formal",children:"Formal"}),e.jsx(f,{selected:!0,value:"casual",children:"Casual"}),e.jsx(f,{selected:!0,value:"sick",children:"Sick"})]})]}),e.jsx(v,{label:"From Date",format:"dd/MM/yyyy",required:!0,value:r.fromDate,onChange:a=>n(a,"fromDate"),slotProps:{textField:{fullWidth:!0}}}),e.jsx(v,{format:"dd/MM/yyyy",label:"To Date",value:r.toDate,onChange:a=>n(a,"toDate"),slotProps:{textField:{fullWidth:!0}}}),e.jsx(R,{label:"Reason",required:!0,multiline:!0,minRows:2,maxRows:5,value:r.reason,onChange:a=>n(a.target.value,"reason"),fullWidth:!0}),e.jsxs("div",{className:"flex w-full justify-end gap-3",children:[e.jsx(p,{onClick:()=>{l(!1),o(t)},variant:"outlined",children:"Cancel"}),e.jsx(p,{type:"submit",variant:"contained",disabled:x,children:x?"Submitting...":"Apply"})]})]})})]})})})]})},I=[{name:"Date",selector:t=>u(t.fromDate).format("DD MMM, YYYY")},{name:"From",selector:t=>u(t.fromDate).format("DD MMM, YYYY")},{name:"TO",selector:t=>u(t.toDate).format("DD MMM, YYYY")},{name:"Reason",selector:t=>t.reason},{name:"Status",selector:t=>e.jsx("span",{className:`
                  px-2 py-1 capitalize rounded-l relative overflow-hidden
                  before:absolute before:content-[''] before:w-[2px] before:h-full before:left-0
                  ${t.status==="approved"&&"text-green-700 bg-green-100 before:bg-green-800"}
                  ${t.status==="pending"&&"text-yellow-700 bg-yellow-100 before:bg-yellow-600"}
                  ${t.status==="rejected"&&"text-red-700 bg-red-100 before:bg-red-800"}
               `,children:t.status})}];export{I as columns,oe as default};
