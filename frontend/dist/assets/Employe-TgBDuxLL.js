import{h as je,i as be,r as c,k as ve,l as es,m as ss,j as e,n as J,o as ue,p as Ne,q as te,t as ce,b as xe,v as Re,y as X,G as We,w as as,x as $e,z as Ge,g as Ae,B as Ue,D as Le,E as ts,H as rs,M as ns,I as is,J as os,K as ls,L as ds,O as cs,P as us,Q as xs,R as ms,u as hs,f as ps,a as gs,S as He,T as fs,A as _e,U as js,C as qe,V as bs,W as vs,X as Se,Y as Oe}from"./index-BcCf33nC.js";import{I as Ye}from"./index-C9QG7iKK.js";import{M as ye}from"./Modalbox-Bw9Q2ggC.js";import{X as Ns}from"./index.es-B7wbbfJi.js";import{I as Cs,a as ws}from"./index-BRxqPAFO.js";import{H as As}from"./index-CBC3qLhe.js";import{B as Ss,P as ys,L as Is}from"./index-DlHZFYvC.js";import{B as Es,a as Ps}from"./index-ybYst-gW.js";import{A as ks}from"./index-D7lVSvz4.js";import{u as zs}from"./imageresizer-D4I-KFLq.js";import{C as Ie}from"./CheckPermission-C8CBHjrj.js";import{u as Ds}from"./attandencehelper--oC63HMC.js";import{B as Z}from"./Box-DbC_wsFB.js";import{T as ne}from"./Typography-BmXM6urE.js";import{T as m}from"./TextField-BzriM_mM.js";import{I as Ee}from"./InputAdornment-B50bXZqM.js";import{T as Rs,g as Ve,u as Ms,P as Ts,F as ie,I as oe,S as le,O as Xe}from"./Select-CePOuoRo.js";import{M as G}from"./MenuItem-CsPX8TLz.js";import{B as ee}from"./Button-Ca_2FZ2Y.js";import{u as Bs}from"./useSlotProps-V7hcBR52.js";import{u as Fs,B as Ws}from"./ButtonBase-CC5f2wl3.js";import"./createSimplePaletteValueFilter-6n7mCABr.js";function $s(t){return je("MuiCollapse",t)}be("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Gs=t=>{const{orientation:i,classes:l}=t,a={root:["root",`${i}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${i}`],wrapperInner:["wrapperInner",`${i}`]};return Ne(a,$s,l)},Us=J("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,i)=>{const{ownerState:l}=t;return[i.root,i[l.orientation],l.state==="entered"&&i.entered,l.state==="exited"&&!l.in&&l.collapsedSize==="0px"&&i.hidden]}})(te(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:i})=>i.state==="exited"&&!i.in&&i.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),Ls=J("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Hs=J("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),De=c.forwardRef(function(i,l){const a=ve({props:i,name:"MuiCollapse"}),{addEndListener:u,children:h,className:j,collapsedSize:b="0px",component:x,easing:W,in:R,onEnter:P,onEntered:A,onEntering:M,onExit:C,onExited:k,onExiting:v,orientation:N="vertical",style:T,timeout:S=es.standard,TransitionComponent:U=Rs,...O}=a,I={...a,orientation:N,collapsedSize:b},w=Gs(I),y=Bs(),re=Fs(),g=c.useRef(null),z=c.useRef(),p=typeof b=="number"?`${b}px`:b,L=N==="horizontal",H=L?"width":"height",K=c.useRef(null),Y=ss(l,K),o=d=>B=>{if(d){const F=K.current;B===void 0?d(F):d(F,B)}},E=()=>g.current?g.current[L?"clientWidth":"clientHeight"]:0,Q=o((d,B)=>{g.current&&L&&(g.current.style.position="absolute"),d.style[H]=p,P&&P(d,B)}),me=o((d,B)=>{const F=E();g.current&&L&&(g.current.style.position="");const{duration:se,easing:V}=Ve({style:T,timeout:S,easing:W},{mode:"enter"});if(S==="auto"){const ge=y.transitions.getAutoHeightDuration(F);d.style.transitionDuration=`${ge}ms`,z.current=ge}else d.style.transitionDuration=typeof se=="string"?se:`${se}ms`;d.style[H]=`${F}px`,d.style.transitionTimingFunction=V,M&&M(d,B)}),he=o((d,B)=>{d.style[H]="auto",A&&A(d,B)}),Ce=o(d=>{d.style[H]=`${E()}px`,C&&C(d)}),pe=o(k),we=o(d=>{const B=E(),{duration:F,easing:se}=Ve({style:T,timeout:S,easing:W},{mode:"exit"});if(S==="auto"){const V=y.transitions.getAutoHeightDuration(B);d.style.transitionDuration=`${V}ms`,z.current=V}else d.style.transitionDuration=typeof F=="string"?F:`${F}ms`;d.style[H]=p,d.style.transitionTimingFunction=se,v&&v(d)}),f=d=>{S==="auto"&&re.start(z.current||0,d),u&&u(K.current,d)};return e.jsx(U,{in:R,onEnter:Q,onEntered:he,onEntering:me,onExit:Ce,onExited:pe,onExiting:we,addEndListener:f,nodeRef:K,timeout:S==="auto"?null:S,...O,children:(d,{ownerState:B,...F})=>e.jsx(Us,{as:x,className:ue(w.root,j,{entered:w.entered,exited:!R&&p==="0px"&&w.hidden}[d]),style:{[L?"minWidth":"minHeight"]:p,...T},ref:Y,ownerState:{...I,state:d},...F,children:e.jsx(Ls,{ownerState:{...I,state:d},className:w.wrapper,ref:g,children:e.jsx(Hs,{ownerState:{...I,state:d},className:w.wrapperInner,children:h})})})})});De&&(De.muiSupportAuto=!0);const Je=c.createContext({});function _s(t){return je("MuiAccordion",t)}const fe=be("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),qs=t=>{const{classes:i,square:l,expanded:a,disabled:u,disableGutters:h}=t;return Ne({root:["root",!l&&"rounded",a&&"expanded",u&&"disabled",!h&&"gutters"],heading:["heading"],region:["region"]},_s,i)},Os=J(Ts,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,i)=>{const{ownerState:l}=t;return[{[`& .${fe.region}`]:i.region},i.root,!l.square&&i.rounded,!l.disableGutters&&i.gutters]}})(te(({theme:t})=>{const i={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],i),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],i)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${fe.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${fe.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),te(({theme:t})=>({variants:[{props:i=>!i.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:i=>!i.disableGutters,style:{[`&.${fe.expanded}`]:{margin:"16px 0"}}}]}))),Ys=J("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),Pe=c.forwardRef(function(i,l){const a=ve({props:i,name:"MuiAccordion"}),{children:u,className:h,defaultExpanded:j=!1,disabled:b=!1,disableGutters:x=!1,expanded:W,onChange:R,square:P=!1,slots:A={},slotProps:M={},TransitionComponent:C,TransitionProps:k,...v}=a,[N,T]=Ms({controlled:W,default:j,name:"Accordion",state:"expanded"}),S=c.useCallback(E=>{T(!N),R&&R(E,!N)},[N,R,T]),[U,...O]=c.Children.toArray(u),I=c.useMemo(()=>({expanded:N,disabled:b,disableGutters:x,toggle:S}),[N,b,x,S]),w={...a,square:P,disabled:b,disableGutters:x,expanded:N},y=qs(w),re={transition:C,...A},g={transition:k,...M},z={slots:re,slotProps:g},[p,L]=ce("root",{elementType:Os,externalForwardedProps:{...z,...v},className:ue(y.root,h),shouldForwardComponentProp:!0,ownerState:w,ref:l,additionalProps:{square:P}}),[H,K]=ce("heading",{elementType:Ys,externalForwardedProps:z,className:y.heading,ownerState:w}),[Y,o]=ce("transition",{elementType:De,externalForwardedProps:z,ownerState:w});return e.jsxs(p,{...L,children:[e.jsx(H,{...K,children:e.jsx(Je.Provider,{value:I,children:U})}),e.jsx(Y,{in:N,timeout:"auto",...o,children:e.jsx("div",{"aria-labelledby":U.props.id,id:U.props["aria-controls"],role:"region",className:y.region,children:O})})]})});function Vs(t){return je("MuiAccordionDetails",t)}be("MuiAccordionDetails",["root"]);const Xs=t=>{const{classes:i}=t;return Ne({root:["root"]},Vs,i)},Js=J("div",{name:"MuiAccordionDetails",slot:"Root"})(te(({theme:t})=>({padding:t.spacing(1,2,2)}))),ke=c.forwardRef(function(i,l){const a=ve({props:i,name:"MuiAccordionDetails"}),{className:u,...h}=a,j=a,b=Xs(j);return e.jsx(Js,{className:ue(b.root,u),ref:l,ownerState:j,...h})});function Ks(t){return je("MuiAccordionSummary",t)}const de=be("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Qs=t=>{const{classes:i,expanded:l,disabled:a,disableGutters:u}=t;return Ne({root:["root",l&&"expanded",a&&"disabled",!u&&"gutters"],focusVisible:["focusVisible"],content:["content",l&&"expanded",!u&&"contentGutters"],expandIconWrapper:["expandIconWrapper",l&&"expanded"]},Ks,i)},Zs=J(Ws,{name:"MuiAccordionSummary",slot:"Root"})(te(({theme:t})=>{const i={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],i),[`&.${de.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${de.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${de.disabled})`]:{cursor:"pointer"},variants:[{props:l=>!l.disableGutters,style:{[`&.${de.expanded}`]:{minHeight:64}}}]}})),ea=J("span",{name:"MuiAccordionSummary",slot:"Content"})(te(({theme:t})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:i=>!i.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${de.expanded}`]:{margin:"20px 0"}}}]}))),sa=J("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(te(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${de.expanded}`]:{transform:"rotate(180deg)"}}))),ze=c.forwardRef(function(i,l){const a=ve({props:i,name:"MuiAccordionSummary"}),{children:u,className:h,expandIcon:j,focusVisibleClassName:b,onClick:x,slots:W,slotProps:R,...P}=a,{disabled:A=!1,disableGutters:M,expanded:C,toggle:k}=c.useContext(Je),v=g=>{k&&k(g),x&&x(g)},N={...a,expanded:C,disabled:A,disableGutters:M},T=Qs(N),S={slots:W,slotProps:R},[U,O]=ce("root",{ref:l,shouldForwardComponentProp:!0,className:ue(T.root,h),elementType:Zs,externalForwardedProps:{...S,...P},ownerState:N,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:A,"aria-expanded":C,focusVisibleClassName:ue(T.focusVisible,b)},getSlotProps:g=>({...g,onClick:z=>{var p;(p=g.onClick)==null||p.call(g,z),v(z)}})}),[I,w]=ce("content",{className:T.content,elementType:ea,externalForwardedProps:S,ownerState:N}),[y,re]=ce("expandIconWrapper",{className:T.expandIconWrapper,elementType:sa,externalForwardedProps:S,ownerState:N});return e.jsxs(U,{...O,children:[e.jsx(I,{...w,children:u}),j&&e.jsx(y,{...re,children:j})]})}),aa=[{name:"S.no",selector:t=>t.sno,width:"40px"},{name:"Name",selector:t=>t.name},{name:"Email",selector:t=>t.email},{name:"Department",selector:t=>t.department},{name:"Action",selector:t=>t.action,width:"160px"}],ta=async({formData:t,dispatch:i,setisload:l,setInp:a,setopenmodal:u,init:h,resetPhoto:j})=>{const b=localStorage.getItem("emstoken");l(!0);try{const x=await xe.post("/api/addemployee",t,{headers:{Authorization:`Bearer ${b}`,"Content-Type":"multipart/form-data"}});X.success(x.data.message,{autoClose:1200}),a(h),j(),u(!1),i(Re())}catch(x){console.log(x),x.response?X.warn(x.response.data.message,{autoClose:1200}):console.error("Error:",x.message)}finally{l(!1)}},ra=async({formData:t,dispatch:i,setEmployeePhoto:l,setisload:a,setInp:u,setopenmodal:h,init:j})=>{const b=localStorage.getItem("emstoken");a(!0);try{const x=await xe.post("/api/updateemployee",t,{headers:{Authorization:`Bearer ${b}`}});X.success(x.data.message,{autoClose:1200}),l(null),u(j),h(!1),i(Re())}catch(x){console.log(x),x.response?X.warn(x.response.data.message,{autoClose:1200}):x.request?console.error("No response from server:",x.request):console.error("Error:",x.message)}finally{a(!1)}},na=async({employeeId:t,setisload:i,dispatch:l})=>{if(!t){alert("All fileds are Required");return}const a=localStorage.getItem("emstoken");i(!0);try{const u=await xe.post("/api/deleteemployee",{employeeId:t},{headers:{Authorization:`Bearer ${a}`}});l(Re()),X.success(u.data.message,{autoClose:1200})}catch(u){console.log(u),u.response?X.warn(u.response.data.message,{autoClose:1200}):u.request?console.error("No response from server:",u.request):console.error("Error:",u.message)}finally{i(!1)}},ia=({viewEmployee:t})=>{var b,x,W,R,P,A,M;const[i,l]=c.useState(!1),[a,u]=c.useState(null),[h,j]=c.useState(1);return c.useEffect(()=>{(async()=>{const k=localStorage.getItem("emstoken");l(!0);try{const v=await xe.get(`/api/getemployee?empid=${t}`,{headers:{Authorization:`Bearer ${k}`}});console.log("employee fetch Query:",v.data),u(v.data)}catch(v){console.log(v),v.response?X.warn(v.response.data.message,{autoClose:1200}):v.request?console.error("No response from server:",v.request):console.error("Error:",v.message)}finally{l(!1)}})()},[]),e.jsx(e.Fragment,{children:i?e.jsxs("div",{className:"w-full h-[300px] flex gap-5 flex-col justify-center items-center bg-white",children:[e.jsxs("div",{className:"relative",children:[e.jsx(We,{className:"animate-spin",style:{animationDuration:"2.5s"},size:50,color:"teal"}),e.jsx(We,{className:"absolute -bottom-4 left-0 animate-spin",style:{animationDuration:"3s"},size:20,color:"teal"})]}),e.jsx("p",{className:"text-teal-600",children:"loading..."})]}):e.jsxs("div",{className:"max-w-3xl mx-auto bg-white flex flex-col shadow rounded-lg p-2 md:p-4 ",children:[e.jsx("h2",{className:"text-xl mx-auto font-semibold text-gray-700 mb-4",children:"Employee Details"}),e.jsxs("div",{className:"flex gap-4  pb-2 md:items-start",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full border-2 border-teal-500 border-dashed p-[2px] flex items-center justify-center overflow-hidden",children:a!=null&&a.profileimage?e.jsx("img",{src:a.profileimage,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):e.jsx(as,{className:"text-3xl text-gray-500"})}),e.jsxs("div",{className:"md:flex-1 w-auto",children:[e.jsx("h3",{className:"text-l md:text-xl capitalize font-bold text-gray-800",children:(b=a==null?void 0:a.userid)==null?void 0:b.name}),e.jsx("p",{className:"text-sm text-gray-600",children:(x=a==null?void 0:a.userid)==null?void 0:x.role}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded",children:a==null?void 0:a.department.department}),e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-800 text-xs rounded",children:"active"})]}),e.jsxs("div",{className:"hidden md:flex mt-3 justify-start flex-wrap text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx($e,{className:"text-gray-500 lowercase"})," ",(W=a==null?void 0:a.userid)==null?void 0:W.email]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Ge,{className:"text-gray-500"})," ",(a==null?void 0:a.phone)||"N/A"]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Ue,{className:"text-gray-500"})," ",Ae((R=a==null?void 0:a.userid)==null?void 0:R.createdAt).format("DD MMM, YYYY")]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Le,{className:"text-gray-500"})," ID: emp0002"]})]})]})]}),e.jsxs("div",{className:"md:hidden mt-3 justify-start flex flex-wrap text-[12px] md:text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx($e,{className:"text-gray-500 lowercase"})," ",(P=a==null?void 0:a.userid)==null?void 0:P.email]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Ge,{className:"text-gray-500"})," ",(a==null?void 0:a.phone)||"N/A"]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Ue,{className:"text-gray-500"})," ",Ae((A=a==null?void 0:a.userid)==null?void 0:A.createdAt).format("DD MMM, YYYY")]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Le,{className:"text-gray-500"})," ID: emp0002"]})]}),e.jsxs("div",{className:"pt-1 capitalize",children:[e.jsxs("div",{className:"flex gap-2 md:gap-6 bg-slate-200 p-1 mt-2 text-[12px] md:text-sm font-medium text-gray-700",children:[e.jsx("div",{onClick:()=>j(1),className:`${h==1?"bg-white":"text-gray-400"} w-1/3 cursor-pointer py-1.5 text-center rounded`,children:"Personal Info"}),e.jsx("div",{onClick:()=>j(2),className:`${h==2?"bg-white":"text-gray-400"} w-1/3 cursor-pointer py-1.5 text-center rounded`,children:"Employment"}),e.jsx("div",{onClick:()=>j(3),className:`${h==3?"bg-white":"text-gray-400"} w-1/3 cursor-pointer py-1.5 text-center rounded`,children:"Documents & Skills"})]}),h==1&&e.jsxs("div",{className:"mt-2 grid grid-cols-2 max-h-[300px] overflow-y-auto md:grid-cols-2 gap-4 text-[12px] md:text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ts,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Date of Birth"}),e.jsx("div",{children:a!=null&&a.dob?Ae(a==null?void 0:a.dob).format("DD MMM,YYYY"):"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Address"}),e.jsx("div",{children:(a==null?void 0:a.address)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ns,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Emergency Contact"}),e.jsx("div",{children:(a==null?void 0:a.Emergencyphone)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ss,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Blood Group"}),e.jsx("div",{children:(a==null?void 0:a.bloodGroup)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(is,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Adhaar No."}),e.jsx("div",{children:(a==null?void 0:a.adhaar)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(os,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Pan No."}),e.jsx("div",{children:(a==null?void 0:a.pan)||"N/A"})]})]})]}),h==2&&e.jsxs("div",{className:"mt-2 grid grid-cols-2 max-h-[300px] overflow-y-auto md:grid-cols-2 gap-4 text-[12px] md:text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ys,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Position"}),e.jsx("div",{children:(a==null?void 0:a.designation)||"Accounts"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ls,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Department"}),e.jsx("div",{children:((M=a==null?void 0:a.department)==null?void 0:M.department)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ds,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Salary"}),e.jsx("div",{children:(a==null?void 0:a.salary)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(cs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Bank Name"}),e.jsx("div",{children:(a==null?void 0:a.bankName)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(us,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Account Holder"}),e.jsx("div",{children:(a==null?void 0:a.acHolderName)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(xs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Branch"}),e.jsx("div",{children:(a==null?void 0:a.bankbranch)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ms,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"A/C No."}),e.jsx("div",{children:(a==null?void 0:a.acnumber)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Es,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Ifsc Code"}),e.jsx("div",{children:(a==null?void 0:a.ifscCode)||"N/A"})]})]})]}),h==3&&e.jsxs("div",{className:"mt-2 p-2 grid grid-cols-1 max-h-[300px] overflow-y-auto sm:grid-cols-2 gap-4 text-[12px] md:text-sm text-gray-700",children:[e.jsxs("div",{className:"rounded border border-gray-300 bg-white p-2 md:p-4 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Education"}),a.education.length>0?a.education.map(C=>e.jsxs("div",{className:"relative my-1 pl-2 rounded overflow-hidden",children:[e.jsx("p",{className:"text-gray-700 font-semibold",children:C.degree}),e.jsx("p",{className:"text-gray-700",children:C.institution}),e.jsx("p",{className:"text-gray-500 text-[10px]",children:C.date}),e.jsx("span",{className:"absolute w-0.5 h-full bg-amber-800 top-0 left-0"})]})):e.jsx("div",{children:"No Data found"})]}),e.jsxs("div",{className:"rounded border border-gray-300 bg-white p-2 md:p-4 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Achievement"}),a.achievements.length>0?a.achievements.map(C=>e.jsxs("div",{className:"relative my-1 pl-5 rounded overflow-hidden",children:[e.jsx("p",{className:"text-gray-700 font-semibold",children:C.title}),e.jsx("p",{className:"text-gray-700",children:C.description}),e.jsx("p",{className:"text-gray-500 text-[10px]",children:C.date}),e.jsxs("span",{className:"absolute top-1 -left-0",children:[" ",e.jsx(Is,{size:18,color:"orange"})," "]}),e.jsx("span",{className:"absolute w-0.5 h-full bg-blue-500 top-0 right-0"})]})):e.jsx("div",{children:"No Achievement found"})]})]})]})]})})},Pa=()=>{var Be,Fe;const[t,i]=c.useState(!1),[l,a]=c.useState(!1),[u,h]=c.useState([]),[j,b]=c.useState([]),[x,W]=c.useState(!1),[R,P]=c.useState(!1),[A,M]=c.useState(!1),[C,k]=c.useState(null),[v,N]=c.useState(null),[T,S]=c.useState(null),{handleImage:U}=zs(),O=hs(),{department:I,branch:w,employee:y,profile:re}=ps(s=>s.user),[g,z]=c.useState({userid:"",pass:""}),[p,L]=c.useState({searchText:"",branch:"all",department:"all"}),H="https://res.cloudinary.com/dusxlxlvm/image/upload/v1753113610/ems/assets/employee_fi3g5p.webp";c.useEffect(()=>{L(s=>({...s,department:"all"}))},[p.branch]);let K=gs();const Y={employeeId:"",branchId:"",department:"",employeeName:"",email:"",designation:"",phone:"",address:"",gender:"male",bloodGroup:"",dob:"",Emergencyphone:"",skills:[],maritalStatus:!0,salary:0,acHolderName:"",bankName:"",bankbranch:"",acnumber:"",ifscCode:"",adhaar:"",pan:"",achievements:[],education:[]},[o,E]=c.useState(Y);c.useEffect(()=>{I.length>0&&b(I.filter(s=>{var n;return((n=s==null?void 0:s.branchId)==null?void 0:n._id)==p.branch}))},[p.branch]);const Q=(s,n,r,D)=>{const $=[...o[n]];$[r][D]=s.target.value,E(_=>({..._,[n]:$}))},me=s=>{const n=s==="achievements"?{title:"",description:"",date:""}:{degree:"",institution:"",date:""};E(r=>({...r,[s]:[...r[s],n]}))},he=(s,n)=>{const r=o[s].filter((D,$)=>$!==n);E(D=>({...D,[s]:r}))},Ce=Ie("employee",2),pe=Ie("employee",3),we=Ie("employee",4);c.useEffect(()=>{if((y==null?void 0:y.length)<1)return;let s=1;const n=y==null?void 0:y.map(r=>{var D,$,_,q,ae;return{id:r._id,sno:s++,rawname:(D=r==null?void 0:r.userid)==null?void 0:D.name,name:e.jsxs("div",{className:"flex items-center capitalize gap-3 ",children:[e.jsx(_e,{src:r.profileimage||H,alt:r.employeename,children:!r.profileimage&&H}),e.jsxs(Z,{children:[e.jsx(ne,{variant:"body2",children:($=r==null?void 0:r.userid)==null?void 0:$.name}),e.jsxs("p",{className:"t text-[10px] text-gray-600",children:["(",r==null?void 0:r.designation,")"]})]})]}),email:(_=r==null?void 0:r.userid)==null?void 0:_.email,branch:r==null?void 0:r.branchId,department:(q=r==null?void 0:r.department)==null?void 0:q.department,departmentid:(ae=r==null?void 0:r.department)==null?void 0:ae._id,action:e.jsxs("div",{className:"action flex gap-2.5",children:[e.jsx("span",{className:"eye edit text-[18px] text-green-500 cursor-pointer",title:"View Profile",onClick:()=>{S(r._id),W(!0)},children:e.jsx(Cs,{})}),e.jsx("span",{className:"eye edit text-[18px] text-amber-500 cursor-pointer",title:"Attandence Report",onClick:()=>K(`/dashboard/performance/${r.userid._id}`),children:e.jsx(As,{})}),pe&&e.jsx("span",{className:"edit text-[18px] text-blue-500 cursor-pointer",title:"Edit",onClick:()=>Ke(r),children:e.jsx(He,{})}),pe&&e.jsxs("span",{className:"eye edit text-[18px] text-green-500 cursor-pointer",title:"Reset Password",onClick:()=>{z({...g,userid:r.userid._id}),P(!0)},children:[e.jsx(fs,{})," "]}),we&&e.jsx("span",{className:"delete text-[18px] text-red-500 cursor-pointer",onClick:()=>Qe(r._id),children:e.jsx(ks,{})})]})}});h(n)},[y]);const f=(s,n)=>{E({...o,[n]:s.target.value})},d=(s,n)=>{L(r=>({...r,[s]:n}))},B=s=>{const n=s.target.files[0];if(N(n),n){const r=new FileReader;r.onloadend=()=>{k(r.result)},r.readAsDataURL(n)}else k(null)},F=async s=>{s.preventDefault();const n=new FormData;if(n.append("employeeName",o.employeeName),n.append("branchId",o.branchId),n.append("department",o.department),n.append("email",o.email),n.append("designation",o.designation),n.append("salary",o.salary),v){let r=await U(300,v);n.append("photo",r)}await ta({formData:n,dispatch:O,setisload:a,setInp:E,setopenmodal:i,init:Y,resetPhoto:V})},se=async()=>{const s=new FormData;if(Object.keys(o).forEach(n=>{const r=o[n];Array.isArray(r)||typeof r=="object"?s.append(n,JSON.stringify(r)):s.append(n,r)}),v){let n=await U(300,v);s.append("photo",n)}await ra({formData:s,dispatch:O,setisload:a,setEmployeePhoto:N,setInp:E,setopenmodal:i,init:Y,resetPhoto:V}),k(null),N(null)},V=()=>{k(null),N(null)},ge=async s=>{s.preventDefault();try{const n=localStorage.getItem("emstoken"),r=await xe.post("/api/updatepassword",{pass:g},{headers:{Authorization:`Bearer ${n}`}});z({userid:"",pass:""}),P(!1),X.success(r.data.message,{autoClose:1200})}catch(n){console.log(n),n.response?X.warn(n.response.data.message,{autoClose:1200}):n.request?console.error("No response from server:",n.request):console.error("Error:",n.message)}},Ke=s=>{var n,r,D;M(!0),E({employeeId:s._id,branchId:s==null?void 0:s.branchId,department:(n=s==null?void 0:s.department)==null?void 0:n._id,employeeName:(r=s==null?void 0:s.userid)==null?void 0:r.name,email:(D=s==null?void 0:s.userid)==null?void 0:D.email,dob:s==null?void 0:s.dob,salary:s==null?void 0:s.salary,acHolderName:s==null?void 0:s.acHolderName,bankName:s==null?void 0:s.bankName,bankbranch:s==null?void 0:s.bankbranch,acnumber:s==null?void 0:s.acnumber,ifscCode:s==null?void 0:s.ifscCode,adhaar:s==null?void 0:s.adhaar,pan:s==null?void 0:s.pan,designation:s==null?void 0:s.designation,phone:s==null?void 0:s.phone,address:(s==null?void 0:s.address)||"",gender:(s==null?void 0:s.gender)||"male",bloodGroup:s==null?void 0:s.bloodGroup,Emergencyphone:s==null?void 0:s.Emergencyphone,skills:s==null?void 0:s.skills,maritalStatus:(s==null?void 0:s.maritalStatus)||!0,achievements:s==null?void 0:s.achievements,education:s==null?void 0:s.education}),s.profileimage&&k(s.profileimage),i(!0)},Qe=s=>{js({title:"Are you sure?",text:"Once deleted, you will not be able to recover this",icon:"warning",buttons:!0,dangerMode:!0}).then(async n=>{n&&na({employeeId:s,setisload:a,dispatch:O})})},Me=c.useRef(null),Te=u==null?void 0:u.filter(s=>{var ae;const n=((ae=s.rawname)==null?void 0:ae.toLowerCase())||"",r=s.departmentid||"",D=s.branch||"",$=p.searchText.trim()===""||n.includes(p.searchText.toLowerCase()),_=p.department==="all"||r===p.department,q=p.branch==="all"||D===p.branch;return $&&_&&q}),Ze=()=>{const s=["S.No","Name","Email","Department"],n=Te.map((q,ae)=>[ae+1,q.rawname,q.email,q.department]),r=[s,...n].map(q=>q.join(",")).join(`
`),D=new Blob([r],{type:"text/csv"}),$=URL.createObjectURL(D),_=document.createElement("a");_.href=$,_.download="Employee List.csv",_.click(),URL.revokeObjectURL($)};return e.jsxs("div",{className:"employee p-1",children:[e.jsxs("div",{className:"flex gap-5 justify-between items-center flex-wrap",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-1 w-full md:w-fit",children:[e.jsx(m,{size:"small",className:"md:col-span-1 md:max-w-[160px] col-span-2",value:p.searchText,onChange:s=>d("searchText",s.target.value),InputProps:{startAdornment:e.jsx(Ee,{position:"start",children:e.jsx(ws,{})})},label:"Search Employee"}),e.jsxs(ie,{size:"small",className:" md:max-w-[160px] col-span-1",children:[e.jsx(oe,{children:"Branch"}),e.jsxs(le,{label:"Branch",value:p.branch,input:e.jsx(Xe,{startAdornment:e.jsx(Ee,{position:"start",children:e.jsx(qe,{fontSize:"small"})}),label:"Branch"}),onChange:s=>d("branch",s.target.value),children:[e.jsx(G,{value:"all",children:"All"}),w==null?void 0:w.map(s=>e.jsx(G,{value:s._id,children:s.name},s._id))]})]}),e.jsxs(ie,{size:"small",className:" md:max-w-[160px] col-span-1",children:[e.jsx(oe,{children:"Department"}),e.jsxs(le,{label:"Department",disabled:p.branch==="all",value:p.department,input:e.jsx(Xe,{startAdornment:e.jsx(Ee,{position:"start",children:e.jsx(qe,{fontSize:"small"})}),label:"Department"}),onChange:s=>d("department",s.target.value),children:[e.jsx(G,{value:"all",children:"All"}),j.length>0?j.map(s=>e.jsx(G,{value:s._id,children:s.department},s._id)):e.jsx(G,{disabled:!0,children:"No departments found"})]})]})]}),e.jsxs("div",{className:"flex gap-1 w-full md:w-fit",children:[e.jsx(ee,{variant:"outlined",className:"flex-1 md:w-fit md:flex-none",onClick:Ze,startIcon:e.jsx(bs,{}),children:"Export"}),Ce&&e.jsx(ee,{variant:"contained",className:"flex-[2] md:w-fit md:flex-none",startIcon:e.jsx(vs,{}),onClick:()=>i(!0),children:"Add Employee"})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(Ns,{columns:aa,data:Te,pagination:!0,customStyles:Ds(),highlightOnHover:!0,noDataComponent:e.jsxs("div",{className:"flex items-center gap-2 py-6 text-center text-gray-600 text-sm",children:[e.jsx(Ps,{className:"text-xl"})," No Employee records found."]})})}),e.jsx(ye,{open:t,onClose:()=>{i(!1),M(!1),E(Y),V()},children:e.jsx("div",{className:"membermodal",children:e.jsx("div",{className:"whole",children:e.jsxs("form",{onSubmit:F,children:[e.jsx("div",{className:"modalhead",children:A?"Update Employee":"Add Employee"}),e.jsxs("span",{className:"modalcontent ",children:[e.jsxs(ie,{fullWidth:!0,required:!0,size:"small",children:[e.jsx(oe,{children:"Branch"}),e.jsx(le,{value:o.branchId,label:"branch",onChange:s=>f(s,"branchId"),children:w==null?void 0:w.map(s=>e.jsx(G,{value:s._id,children:s.name},s._id))})]}),e.jsxs(ie,{disabled:!o.branchId,fullWidth:!0,required:!0,size:"small",children:[e.jsx(oe,{children:"Department"}),e.jsx(le,{value:o.department,label:"Department",onChange:s=>f(s,"department"),children:(I==null?void 0:I.filter(s=>{var n;return((n=s.branchId)==null?void 0:n._id)===o.branchId}).length)>0?I.filter(s=>s.branchId._id===o.branchId).map(s=>e.jsx(G,{value:s._id,children:s.department},s._id)):e.jsx(G,{disabled:!0,children:"No departments found"})})]}),e.jsxs(Z,{sx:{width:"100%",gap:2},children:[e.jsx(m,{fullWidth:!0,required:!0,value:o.employeeName,onChange:s=>f(s,"employeeName"),label:"Name",size:"small"}),e.jsx(m,{fullWidth:!0,required:!0,value:o.email,onChange:s=>f(s,"email"),label:"Email",size:"small"})]}),e.jsxs(Z,{sx:{width:"100%",gap:2},children:[e.jsx(m,{fullWidth:!0,value:o.designation,onChange:s=>f(s,"designation"),label:"Designation",size:"small"}),e.jsx(m,{fullWidth:!0,value:o.salary,onChange:s=>f(s,"salary"),label:"Salary",size:"small"})]}),e.jsxs("div",{className:"mt-1 gap-2 flex items-center relative",children:[e.jsx("input",{style:{display:"none"},type:"file",onChange:B,ref:Me,accept:"image/*",name:"",id:"fileInput"}),C?e.jsx("img",{src:C,alt:"Preview",className:"mt-2 w-[100px] h-[100px] rounded-full object-cover"}):e.jsx(_e,{sx:{width:100,height:100},alt:o.employeeName,src:"/static/images/avatar/1.jpg"}),e.jsx("span",{onClick:()=>Me.current.click(),className:"absolute -bottom-1 -right-1 rounded-full bg-teal-900 text-white p-1",children:e.jsx(He,{size:18})})]}),A&&e.jsx("div",{className:"border w-full rounded border-dashed border-slate-400",children:e.jsxs(Pe,{sx:{width:"100%"},className:"flex rounded  flex-col",children:[e.jsx(ze,{expandIcon:e.jsx(Se,{}),children:e.jsx(ne,{variant:"subtitle1",children:"Personal Details (optional)"})}),e.jsx(ke,{children:e.jsxs(Z,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsx(m,{fullWidth:!0,value:o.phone,onChange:s=>f(s,"phone"),label:"Phone",size:"small"}),e.jsx(m,{fullWidth:!0,value:o.Emergencyphone,onChange:s=>f(s,"Emergencyphone"),label:"Emergency/ Relative Phone",size:"small"}),e.jsx(m,{fullWidth:!0,value:o.address,onChange:s=>f(s,"address"),label:"Address",size:"small"}),e.jsx(m,{fullWidth:!0,value:o.bloodGroup,onChange:s=>f(s,"bloodGroup"),label:"Blood Group",size:"small"}),e.jsx(m,{fullWidth:!0,inputProps:{maxLength:12},value:o.adhaar,onChange:s=>f(s,"adhaar"),label:"Adhaar No.",size:"small"}),e.jsx(m,{fullWidth:!0,inputProps:{maxLength:10},value:o.pan,onChange:s=>f(s,"pan"),label:"Pan No.",size:"small"}),e.jsx(m,{InputLabelProps:{shrink:!0},fullWidth:!0,value:o.dob,type:"date",onChange:s=>f(s,"dob"),label:"Date of Birth",size:"small"}),e.jsxs(ie,{size:"small",children:[e.jsx(oe,{children:"maritalStatus"}),e.jsxs(le,{label:"maritalStatus",value:o.maritalStatus,onChange:s=>f(s,"maritalStatus"),children:[e.jsx(G,{selected:!0,value:!0,children:"Married"}),e.jsx(G,{selected:!0,value:!1,children:"Unmarried"})]})]}),e.jsxs(ie,{size:"small",children:[e.jsx(oe,{children:"Gender"}),e.jsxs(le,{label:"Gender",value:o.gender,onChange:s=>f(s,"gender"),children:[e.jsx(G,{selected:!0,value:"male",children:"Male"}),e.jsx(G,{selected:!0,value:"female",children:"female"})]})]})]})})]})}),A&&e.jsx("div",{className:"border w-full rounded border-dashed border-slate-400",children:e.jsxs(Pe,{sx:{width:"100%"},className:"flex rounded  flex-col",children:[e.jsx(ze,{expandIcon:e.jsx(Se,{}),children:e.jsx(ne,{variant:"subtitle1",children:"Banking Details (optional)"})}),e.jsx(ke,{children:e.jsxs(Z,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsx(m,{fullWidth:!0,value:o.acHolderName,onChange:s=>f(s,"acHolderName"),label:"A/C Holder Name",size:"small"}),e.jsx(m,{fullWidth:!0,value:o.bankName,onChange:s=>f(s,"bankName"),label:"Bank Name",size:"small"}),e.jsx(m,{fullWidth:!0,value:o.bankbranch,onChange:s=>f(s,"bankbranch"),label:"Branch",size:"small"}),e.jsx(m,{fullWidth:!0,value:o.acnumber,onChange:s=>f(s,"acnumber"),label:"A/C No.",size:"small"}),e.jsx(m,{fullWidth:!0,value:o.ifscCode,onChange:s=>f(s,"ifscCode"),label:"IFSC Code",size:"small"})]})})]})}),A&&e.jsx("div",{className:"border w-full rounded border-dashed border-slate-400",children:e.jsxs(Pe,{sx:{width:"100%"},className:"flex flex-col",children:[e.jsx(ze,{expandIcon:e.jsx(Se,{}),children:e.jsx(ne,{variant:"subtitle1",children:"Document & Skills (optional)"})}),e.jsxs(ke,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(Z,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2}}),e.jsx(ne,{fontWeight:"bold",children:"Achievements"}),(Be=o==null?void 0:o.achievements)==null?void 0:Be.map((s,n)=>e.jsxs(Z,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",gap:2,alignItems:"center"},children:[e.jsx(m,{label:"Title",size:"small",value:s.title,onChange:r=>Q(r,"achievements",n,"title")}),e.jsx(m,{label:"Description",size:"small",value:s.description,onChange:r=>Q(r,"achievements",n,"description")}),e.jsx(m,{type:"date",size:"small",label:"Date",InputLabelProps:{shrink:!0},value:s.date,onChange:r=>Q(r,"achievements",n,"date")}),e.jsx(Oe,{size:24,title:"Delete this",onClick:()=>he("achievements",n)})]},n)),e.jsx(ee,{onClick:()=>me("achievements"),variant:"outlined",children:"Add Achievement"}),e.jsx(ne,{fontWeight:"bold",children:"Education"}),(Fe=o==null?void 0:o.education)==null?void 0:Fe.map((s,n)=>e.jsxs(Z,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",gap:2,alignItems:"center"},children:[e.jsx(m,{label:"Degree",size:"small",value:s.degree,onChange:r=>Q(r,"education",n,"degree")}),e.jsx(m,{label:"Institution",size:"small",value:s.institution,onChange:r=>Q(r,"education",n,"institution")}),e.jsx(m,{type:"date",size:"small",label:"Date",InputLabelProps:{shrink:!0},value:s.date,onChange:r=>Q(r,"education",n,"date")}),e.jsx(Oe,{size:24,title:"Delete this",onClick:()=>he("education",n)})]},n)),e.jsx(ee,{onClick:()=>me("education"),variant:"outlined",children:"Add Education"})]})]})})]}),e.jsxs("div",{className:"modalfooter",children:[e.jsx(ee,{size:"small",onClick:()=>{i(!1),M(!1),E(Y),V()},variant:"outlined",children:"Cancel"}),A?e.jsx(ee,{sx:{mr:2},loading:l,loadingPosition:"end",endIcon:e.jsx(Ye,{}),variant:"contained",onClick:se,children:"Update"}):e.jsx(ee,{sx:{mr:2},loading:l,loadingPosition:"end",endIcon:e.jsx(Ye,{}),variant:"contained",type:"submit",children:"Add"})]})]})})})}),e.jsx(ye,{open:x,onClose:()=>{W(!1)},children:e.jsx("div",{className:"membermodal",children:e.jsx(ia,{viewEmployee:T})})}),e.jsx(ye,{open:R,onClose:()=>{P(!1)},children:e.jsx("div",{className:"membermodal",children:e.jsxs("form",{onSubmit:ge,children:[e.jsx("h2",{children:"Reset Passowrd"}),e.jsxs("span",{className:"modalcontent ",children:[e.jsx(m,{fullWidth:!0,required:!0,value:g.pass,onChange:s=>z({...g,pass:s.target.value}),label:"Passowrd",size:"small"}),e.jsx(ee,{variant:"contained",sx:{mr:2},type:"submit",children:"Reset Password"})]})]})})})]})};export{Pa as default};
