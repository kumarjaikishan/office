import{r as p,j as e,Q as N,R as b,f as T}from"./index-DLNRkSy_.js";import{H as D}from"./holidayCalander-B8eRKjTS.js";import{d as h}from"./dayjs.min-CxuB_lvs.js";import{B as j}from"./Button-CkxQ6ySb.js";import{I as y}from"./IconButton-CtofJKJB.js";import{D as C,a as w,b as E}from"./DialogContent-BFJAOkIe.js";import{D as k}from"./DialogTitle-DUrv3ygw.js";import{T as u}from"./TextField-BgbQpo2_.js";import{M as g}from"./MenuItem-COr590XR.js";import"./dateViewRenderers-BZBS9kii.js";import"./ButtonBase-C3lvtx1y.js";import"./index-CLY8i5x5.js";import"./useThemeProps-Cw_tHgcj.js";import"./useSlotProps-BqpaTknx.js";import"./Typography-CkL-7scN.js";import"./Select-BBwut-H3.js";import"./createSimplePaletteValueFilter-dQN5FFuo.js";import"./AdapterDateFns-Fs-cmnMS.js";import"./Box-Ds900IIr.js";import"./Tooltip-DlA_7cr_.js";import"./Popper-Bg6tTiDS.js";const M=["All","Staff","Manager","HR"],O=["Holiday","Policy","Event","Urgent"],S=({notices:c=[],onDelete:d,onSave:i})=>{const[m,x]=p.useState(!1),[r,f]=p.useState(null),[l,s]=p.useState({title:"",date:"",employeeType:"",noticeType:""}),a=(t=null)=>{f(t),s(t?{title:t.title,date:t.date,employeeType:t.employeeType,noticeType:t.noticeType}:{title:"",date:"",employeeType:"",noticeType:""}),x(!0)},o=()=>{f(null),x(!1)},n=()=>{i&&i({...l,id:(r==null?void 0:r.id)||Date.now()}),o()};return e.jsxs("div",{className:"bg-white h-full shadow-lg rounded-lg p-4 w-full md:w-[350px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 border-b pb-1",children:[e.jsx("h3",{className:"text-lg font-bold",children:"ðŸ“Œ Official Notices"}),e.jsx(j,{size:"small",variant:"contained",onClick:()=>a(),children:"Add"})]}),c!=null&&c.length?e.jsx("ul",{className:"space-y-2 text-sm h-[300px] overflow-y-auto",children:c.map((t,v)=>e.jsxs("li",{className:"border-l-4 border-blue-500 pl-2 relative group",children:[e.jsx("p",{className:"font-semibold",children:t.title}),e.jsx("p",{className:"text-gray-600 text-xs",children:t.date}),e.jsxs("div",{className:"absolute right-1 top-1 hidden group-hover:flex gap-1",children:[e.jsx(y,{size:"small",onClick:()=>a(t),children:e.jsx(N,{className:"text-blue-500"})}),e.jsx(y,{size:"small",onClick:()=>d&&d(t.id),children:e.jsx(b,{className:"text-red-500"})})]})]},v))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No official notices available."}),e.jsxs(C,{open:m,onClose:o,children:[e.jsx(k,{children:r?"Edit Notice":"Add Notice"}),e.jsxs(w,{className:"flex flex-col gap-4 mt-2",children:[e.jsx(u,{label:"Notice Title",fullWidth:!0,value:l.title,onChange:t=>s({...l,title:t.target.value})}),e.jsx(u,{label:"Date",type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:l.date,onChange:t=>s({...l,date:t.target.value})}),e.jsx(u,{select:!0,label:"Type of Employee",fullWidth:!0,value:l.employeeType,onChange:t=>s({...l,employeeType:t.target.value}),children:M.map(t=>e.jsx(g,{value:t,children:t},t))}),e.jsx(u,{select:!0,label:"Type of Notice",fullWidth:!0,value:l.noticeType,onChange:t=>s({...l,noticeType:t.target.value}),children:O.map(t=>e.jsx(g,{value:t,children:t},t))})]}),e.jsxs(E,{children:[e.jsx(j,{onClick:o,children:"Cancel"}),e.jsx(j,{variant:"contained",onClick:n,children:r?"Update":"Add"})]})]})]})},$=()=>{const{attendance:c,companysetting:d,holiday:i}=T(a=>a.employee),[m,x]=p.useState(null),r=(d==null?void 0:d.weeklyOffs)||[1];p.useEffect(()=>{f()},[i]);const f=()=>{const a=[];i==null||i.forEach(o=>{let n=h(o.fromDate);const t=o.toDate?h(o.toDate):n;for(;n.isSameOrBefore(t,"day");)a.push({date:n.format("MM/DD/YYYY"),name:o.name}),n=n.add(1,"day")}),x(a)},l=m==null?void 0:m.map(a=>({date:h(a.date).toDate(),name:a.name})),s=[{title:"Annual General Meeting on Sep 10",date:"2025-08-01"},{title:"New ID Cards to be issued by next week",date:"2025-07-30"},{title:"Office renovation starts next Monday",date:"2025-07-28"}];return e.jsx("div",{className:"p-2 md:p-3 lg:p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:" ",children:e.jsx(D,{highlightedDates:l,weeklyOffs:r})}),e.jsx("div",{className:" ",children:e.jsx(S,{notices:s})})]})})};export{$ as default};
