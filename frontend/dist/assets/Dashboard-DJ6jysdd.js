import{r as m,c as u,y as l,j as a,B as i,$ as E,a0 as D,h as M,a1 as z,b as f,R as B}from"./index-Cz9Ed8ZU.js";import{u as I}from"./attandencehelper-QtK3fxpg.js";import{a as U}from"./index-DTNzUE5h.js";import{A as O}from"./index-kOCVZRCf.js";const Y=()=>{m.useEffect(()=>{x()},[]);const g={userid:"",name:"",email:"",password:""},[v,w]=m.useState([]),[C,c]=m.useState(!1),[n,d]=m.useState(g),[j,y]=m.useState(!1),x=async()=>{var e,s;try{const t=localStorage.getItem("emstoken"),o=await u.get("/api/developerfetch",{headers:{Authorization:`Bearer ${t}`}});w(o.data.users)}catch(t){console.log(t),l.warn(((s=(e=t.response)==null?void 0:e.data)==null?void 0:s.message)||"Error",{autoClose:3e3})}},N=async e=>{var s,t;e.preventDefault();try{const o=localStorage.getItem("emstoken"),r=await u.post("/api/User",{...n},{headers:{Authorization:`Bearer ${o}`}});c(!1),x(),l.success(r.data.message,{autoClose:1800})}catch(o){console.log(o),l.warn(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"Error",{autoClose:3e3})}finally{}},k=e=>{d({userid:e==null?void 0:e._id,name:e==null?void 0:e.registeredName,email:e==null?void 0:e.email}),y(!0),c(!0)},b=e=>{swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this",icon:"warning",buttons:!0,dangerMode:!0}).then(async s=>{var t,o;if(s)try{const r=localStorage.getItem("emstoken"),p=await u.delete(`/api/User/${e}`,{headers:{Authorization:`Bearer ${r}`}});x(),l.success(p.data.message,{autoClose:1800})}catch(r){console.log(r),l.warn(((o=(t=r.response)==null?void 0:t.data)==null?void 0:o.message)||"Error",{autoClose:3e3})}})},A=async()=>{var e,s;try{const t=localStorage.getItem("emstoken"),o=await u.put(`/api/User/${n.userid}`,{name:n.name,email:n.email},{headers:{Authorization:`Bearer ${t}`}});c(!1),x(),l.success(o.data.message,{autoClose:1800})}catch(t){console.log(t),l.warn(((s=(e=t.response)==null?void 0:e.data)==null?void 0:s.message)||"Error",{autoClose:3e3})}},h=async e=>{swal({title:`Are you sure you want to Deploy ${e}?`,icon:"warning",buttons:!0,dangerMode:!0}).then(async s=>{var t,o;if(s)try{const r=localStorage.getItem("emstoken"),p=await u.get(`/api/deploy/${e}`,{headers:{Authorization:`Bearer ${r}`}});l.success(p.data.message,{autoClose:1800})}catch(r){console.log(r),l.warn(((o=(t=r.response)==null?void 0:t.data)==null?void 0:o.message)||"Error",{autoClose:3e3})}})},S=()=>{c(!1),d(g),y(!1)},$=[{name:"S.No",selector:(e,s)=>s+1,width:"60px"},{name:"Name",selector:e=>(e==null?void 0:e.registeredName)??""},{name:"Email",selector:e=>e.email},{name:"Date",selector:e=>M(e.createdAt).format("DD MMM, YY")},{name:"Status",selector:e=>e.stat||"-",width:"130px"},{name:"Action",width:"100px",cell:e=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx("span",{className:"text-[18px] text-blue-500 cursor-pointer",title:"Edit",onClick:()=>k(e),children:a.jsx(B,{})}),a.jsx("span",{className:"text-[18px] text-red-500 cursor-pointer",title:"Delete",onClick:()=>b(e._id),children:a.jsx(O,{})})]})}];return a.jsxs("div",{children:[a.jsxs("div",{className:"my-1 flex justify-end gap-2",children:[a.jsx(i,{variant:"contained",className:"flex-[2] md:w-fit md:flex-none",onClick:()=>h("accusoft"),children:"Accusoft"}),a.jsx(i,{variant:"contained",className:"flex-[2] md:w-fit md:flex-none",onClick:()=>h("battlefiesta"),children:"battlefiesta"}),a.jsx(i,{variant:"contained",className:"flex-[2] md:w-fit md:flex-none",onClick:()=>h("office"),children:"office"}),a.jsx(i,{variant:"contained",className:"flex-[2] md:w-fit md:flex-none",startIcon:a.jsx(E,{}),onClick:()=>c(!0),children:"Add User"})]}),a.jsx(D,{columns:$,data:v,pagination:!0,customStyles:I(),highlightOnHover:!0,noDataComponent:a.jsxs("div",{className:"flex items-center gap-2 py-6 text-center text-gray-600 text-sm",children:[a.jsx(U,{className:"text-xl"})," No records found matching your criteria."]})}),a.jsx(z,{open:C,onClose:()=>{c(!1)},children:a.jsx("div",{className:"membermodal w-[500px]",children:a.jsxs("form",{onSubmit:N,children:[a.jsx("h2",{children:"Add New User"}),a.jsx("span",{className:"modalcontent ",children:a.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[a.jsx(f,{fullWidth:!0,required:!0,value:n.name,onChange:e=>d({...n,name:e.target.value}),label:"Name",size:"small"}),a.jsx(f,{fullWidth:!0,required:!0,type:"email",value:n.email,onChange:e=>d({...n,email:e.target.value}),label:"Email",size:"small"}),!j&&a.jsx(f,{fullWidth:!0,required:!0,type:"password",value:n.password,onChange:e=>d({...n,password:e.target.value}),label:"Passowrd",size:"small"}),a.jsxs("div",{children:[j?a.jsx(i,{variant:"contained",sx:{mr:2},onClick:A,children:"Save"}):a.jsx(i,{variant:"contained",sx:{mr:2},type:"submit",children:"Add User"}),a.jsx(i,{variant:"outlined",onClick:S,sx:{mr:2},children:"Cancel"})]})]})})]})})})]})};export{Y as default};
