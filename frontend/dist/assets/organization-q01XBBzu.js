import{r as j,o as Ce,af as ke,p as ce,q as Se,t as Me,T as ee,j as e,w as Te,ag as Ae,ah as se,ai as xe,u as de,g as he,b as g,F as G,I as K,S as Q,M as H,A as ne,l as be,O as oe,a3 as te,B as I,c as F,y as S,D as J,a1 as pe,a4 as Ie,i as De,C as Ee,aa as ve,ab as ie,aj as ze,a2 as Pe,ak as Oe,ac as V,ad as Y,k as Be,al as $e,am as Le,h as We,a5 as Fe,an as _e}from"./index-Bggr-YeU.js";import{C as le}from"./Checkbox-UghSXOLV.js";import{F as Re}from"./FormControlLabel-BMnwCTjr.js";import{u as we,I as fe}from"./attandencehelper-ayprQ9ng.js";import{A as ue,a as qe,b as Ue}from"./index-Dpd1kpAi.js";import{u as Ne}from"./imageresizer-D4I-KFLq.js";import{T as He}from"./Tooltip-DMJGtpys.js";import"./SwitchBase-D1jV98jN.js";import"./Popper-1Vg3vTea.js";const Ve=n=>{const{classes:f,inset:C,primary:h,secondary:c,dense:w}=n;return Te({root:["root",C&&"inset",w&&"dense",h&&c&&"multiline"],primary:["primary"],secondary:["secondary"]},Ae,f)},Ye=Se("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(n,f)=>{const{ownerState:C}=n;return[{[`& .${se.primary}`]:f.primary},{[`& .${se.secondary}`]:f.secondary},f.root,C.inset&&f.inset,C.primary&&C.secondary&&f.multiline,C.dense&&f.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${xe.root}:where(& .${se.primary})`]:{display:"block"},[`.${xe.root}:where(& .${se.secondary})`]:{display:"block"},variants:[{props:({ownerState:n})=>n.primary&&n.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:n})=>n.inset,style:{paddingLeft:56}}]}),re=j.forwardRef(function(f,C){const h=Ce({props:f,name:"MuiListItemText"}),{children:c,className:w,disableTypography:m=!1,inset:v=!1,primary:O,primaryTypographyProps:T,secondary:p,secondaryTypographyProps:l,slots:x={},slotProps:B={},...L}=h,{dense:E}=j.useContext(ke);let D=O??c,M=p;const a={...h,disableTypography:m,inset:v,primary:!!D,secondary:!!M,dense:E},i=Ve(a),d={slots:x,slotProps:{primary:T,secondary:l,...B}},[N,P]=ce("root",{className:Me(i.root,w),elementType:Ye,externalForwardedProps:{...d,...L},ownerState:a,ref:C}),[W,o]=ce("primary",{className:i.primary,elementType:ee,externalForwardedProps:d,ownerState:a}),[$,A]=ce("secondary",{className:i.secondary,elementType:ee,externalForwardedProps:d,ownerState:a});return D!=null&&D.type!==ee&&!m&&(D=e.jsx(W,{variant:E?"body2":"body1",component:o!=null&&o.variant?void 0:"span",...o,children:D})),M!=null&&M.type!==ee&&!m&&(M=e.jsx($,{variant:"body2",color:"textSecondary",...A,children:M})),e.jsxs(N,{...P,children:[D,M]})}),ge=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}],Je=({setopenviewmodal:n,employee:f,company:C,editbranch:h,editbranchdata:c})=>{const w={id:"",name:"",location:"",companyId:"",managerIds:[],defaultsetting:!0,setting:{officeTime:{in:"10:00",out:"18:00",breakMinutes:30},gracePeriod:{lateEntryMinutes:10,earlyExitMinutes:10},workingMinutes:{fullDay:480,halfDay:240,shortDayThreshold:270,overtimeAfterMinutes:480},weeklyOffs:[0],attendanceRules:{considerEarlyEntryBefore:"09:50",considerLateEntryAfter:"10:10",considerEarlyExitBefore:"17:50",considerLateExitAfter:"18:15"}}},[m,v]=j.useState(w),O=de(),{adminManager:T}=he(a=>a.user),[p,l]=j.useState([]),x=localStorage.getItem("emstoken");j.useEffect(()=>{v(a=>({...a,companyId:C._id})),h&&v(a=>({...a,...c}))},[C,h]),j.useEffect(()=>{(T==null?void 0:T.length)>0&&l(T.filter(a=>a.role==="manager"))},[T]);const B=()=>{n(!1),v(w)},L=(a,i)=>{v(d=>({...d,[a]:i}))},E=(a,i,d)=>{v(N=>({...N,setting:{...N.setting,[a]:{...N.setting[a],[i]:d}}}))},D=async()=>{var a,i;try{const d=await F.post("/api/addBranch",m,{headers:{Authorization:`Bearer ${x}`}});S.success(d.data.message),n(!1),O(J()),B()}catch(d){console.error(d),S.error(((i=(a=d==null?void 0:d.response)==null?void 0:a.data)==null?void 0:i.message)||"Error adding branch")}},M=async()=>{var a,i;try{const d=await F.post("/api/editBranch",m,{headers:{Authorization:`Bearer ${x}`}});S.success(d.data.message),O(J()),n(!1),B()}catch(d){console.error(d),S.error(((i=(a=d==null?void 0:d.response)==null?void 0:a.data)==null?void 0:i.message)||"Error editing branch")}};return e.jsxs("div",{className:"whole",children:[e.jsx("div",{className:"modalhead",children:h?"Edit Branch":"Add New Branch"}),e.jsxs("span",{className:"modalcontent",children:[e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsx(g,{label:"Branch Name",fullWidth:!0,size:"small",value:m.name,onChange:a=>L("name",a.target.value),required:!0,helperText:"Enter the official branch name"}),e.jsx(g,{label:"Location",fullWidth:!0,size:"small",value:m.location,onChange:a=>L("location",a.target.value),helperText:"City, State or Address"}),e.jsxs(G,{size:"small",fullWidth:!0,children:[e.jsx(K,{children:"Managers"}),e.jsx(Q,{multiple:!0,value:(m==null?void 0:m.managerIds)||[],onChange:a=>L("managerIds",a.target.value),input:e.jsx(oe,{label:"Managers"}),renderValue:a=>a.map(i=>{var d;return((d=p.find(N=>N._id===i))==null?void 0:d.name)||"Unknown"}).join(", "),children:p&&p.length>0?p.map(a=>{var i;return e.jsxs(H,{value:a._id,children:[e.jsx(le,{checked:(i=m==null?void 0:m.managerIds)==null?void 0:i.includes(a._id)}),e.jsx(ne,{src:a==null?void 0:a.profileImage,alt:a==null?void 0:a.name,children:!(a!=null&&a.profileImage)&&e.jsx(be,{})}),e.jsx(re,{className:"ml-2 capitalize",primary:a==null?void 0:a.name})]},a._id)}):e.jsx(H,{disabled:!0,value:"",children:e.jsx(re,{className:"ml-2 capitalize",primary:"No Manager Found"})})})]})]}),e.jsx(Re,{control:e.jsx(le,{checked:!m.defaultsetting,onChange:a=>v(i=>({...i,defaultsetting:!a.target.checked}))}),label:"Override company default attendance settings",sx:{mt:2}}),!m.defaultsetting&&e.jsx("div",{className:"border-primary border-2 border-dashed rounded mt-3 py-3 px-1",children:e.jsxs(te,{className:"mt-1 p-2 grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx(g,{label:"Office Time In",type:"time",fullWidth:!0,size:"small",value:m.setting.officeTime.in,InputLabelProps:{shrink:!0},onChange:a=>E("officeTime","in",a.target.value),helperText:"Time when office hours begin"}),e.jsx(g,{label:"Office Time Out",type:"time",fullWidth:!0,size:"small",value:m.setting.officeTime.out,InputLabelProps:{shrink:!0},onChange:a=>E("officeTime","out",a.target.value),helperText:"Time when office hours end"}),e.jsx(g,{label:"Break Minutes",fullWidth:!0,type:"number",size:"small",value:m.setting.officeTime.breakMinutes,onChange:a=>E("officeTime","breakMinutes",Number(a.target.value)),helperText:"Total break time allowed during the day"}),e.jsx(g,{label:"Full Day Minutes",fullWidth:!0,type:"number",size:"small",value:m.setting.workingMinutes.fullDay,onChange:a=>E("workingMinutes","fullDay",Number(a.target.value)),helperText:"Total working minutes required for a full day"}),e.jsx(g,{label:"Half Day Minutes",fullWidth:!0,type:"number",size:"small",value:m.setting.workingMinutes.halfDay,onChange:a=>E("workingMinutes","halfDay",Number(a.target.value)),helperText:"Minimum minutes required for marking a half-day"}),e.jsx(g,{label:"Short Day Threshold (min)",fullWidth:!0,type:"number",size:"small",value:m.setting.workingMinutes.shortDayThreshold,onChange:a=>E("workingMinutes","shortDayThreshold",Number(a.target.value)),helperText:"Below this time is considered a short day"}),e.jsx(g,{label:"Overtime After Minutes",fullWidth:!0,type:"number",size:"small",value:m.setting.workingMinutes.overtimeAfterMinutes,onChange:a=>E("workingMinutes","overtimeAfterMinutes",Number(a.target.value)),helperText:"Time after which overtime calculation begins"}),e.jsxs(G,{size:"small",fullWidth:!0,children:[e.jsx(K,{children:"Weekly Offs"}),e.jsx(Q,{multiple:!0,value:m.setting.weeklyOffs,onChange:a=>v(i=>({...i,setting:{...i.setting,weeklyOffs:a.target.value}})),input:e.jsx(oe,{label:"Weekly Offs"}),renderValue:a=>a.map(i=>{var d;return(d=ge.find(N=>N.value===i))==null?void 0:d.label}).join(", "),children:ge.map(a=>e.jsxs(H,{value:a.value,children:[e.jsx(le,{checked:m.setting.weeklyOffs.includes(a.value)}),e.jsx(re,{primary:a.label})]},a.value))})]}),Object.entries(m.setting.attendanceRules).map(([a,i])=>{const d=a.replace(/([A-Z])/g," $1").replace(/^./,P=>P.toUpperCase()),N={considerEarlyEntryBefore:"Considered early if punched before this time",considerLateEntryAfter:"Considered late if punched after this time",considerEarlyExitBefore:"Considered early exit if leaving before this time",considerLateExitAfter:"Considered late exit if leaving after this time"};return e.jsx(g,{fullWidth:!0,size:"small",label:d,type:"time",value:i,onChange:P=>v(W=>({...W,setting:{...W.setting,attendanceRules:{...W.setting.attendanceRules,[a]:P.target.value}}})),helperText:N[a]},a)})]})})]}),e.jsxs("div",{className:"modalfooter",children:[e.jsx(I,{variant:"outlined",onClick:B,children:"Cancel"}),h?e.jsx(I,{variant:"contained",onClick:M,children:"Save"}):e.jsx(I,{variant:"contained",onClick:D,children:"Add Branch"})]})]})},Ze=async({companyinp:n,setisload:f})=>{const C=localStorage.getItem("emstoken");f(!0);try{const h=await F.post("/api/addcompany",{name:n.name,industry:n.industry},{headers:{Authorization:`Bearer ${C}`}});console.log("Query:",h),S.success(h.data.message,{autoClose:1200})}catch(h){console.log(h),h.response?S.warn(h.response.data.message,{autoClose:1200}):h.request?console.error("No response from server:",h.request):console.error("Error:",h.message)}finally{f(!1)}},Qe=[{name:"S.no",selector:n=>n.sno,width:"40px"},{name:"Branch",selector:n=>n.branch},{name:"Department",selector:n=>n.dep_name},{name:"Action",selector:n=>n.action,width:"80px"}],Xe=async({inp:n,setisload:f,setInp:C,setopenmodal:h,init:c,dispatch:w})=>{console.log(n);const{branchId:m,department:v,description:O}=n;if(!v){alert("Please fill in both fields");return}const T=localStorage.getItem("emstoken");f(!0);try{const p=await F.post("/api/adddepartment",{department:v,branchId:m,description:O},{headers:{Authorization:`Bearer ${T}`}});w(J()),S.success(p.data.message,{autoClose:1200}),C(c),h(!1)}catch(p){console.log(p),p.response?S.warn(p.response.data.message,{autoClose:1200}):p.request?console.error("No response from server:",p.request):console.error("Error:",p.message)}finally{f(!1)}},Ge=async({inp:n,setisload:f,setInp:C,setopenmodal:h,init:c,dispatch:w})=>{const{departmentId:m,department:v,description:O}=n;if(!v||!m){alert("All fileds are Required");return}const T=localStorage.getItem("emstoken");f(!0);try{const p=await F.post("/api/updatedepartment",{departmentId:m,department:v,description:O},{headers:{Authorization:`Bearer ${T}`}});w(J()),S.success(p.data.message,{autoClose:1200}),C(c),h(!1)}catch(p){console.log(p),p.response?S.warn(p.response.data.message,{autoClose:1200}):p.request?console.error("No response from server:",p.request):console.error("Error:",p.message)}finally{f(!1)}},Ke=async({departmentId:n,setisload:f,dispatch:C})=>{if(!n){alert("All fileds are Required");return}const h=localStorage.getItem("emstoken");f(!0);try{const c=await F.post("/api/deletedepartment",{departmentId:n},{headers:{Authorization:`Bearer ${h}`}});C(J()),S.success(c.data.message,{autoClose:1200})}catch(c){console.log(c),c.response?S.warn(c.response.data.message,{autoClose:1200}):c.request?console.error("No response from server:",c.request):console.error("Error:",c.message)}finally{f(!1)}},es=()=>{const[n,f]=j.useState(!1),[C,h]=j.useState(!1),[c,w]=j.useState([]),[m,v]=j.useState(!1),[O,T]=j.useState([]),{branch:p,department:l}=he(o=>o.user),[x,B]=j.useState({branch:"all",department:" "}),L=x.branch!=="all"||x.department.trim()!=="",E=de();j.useEffect(()=>{if(!c||c.length===0)return;const o=c.filter($=>{var s;const A=x.branch==="all"||$.branchid===x.branch,q=x.department.trim()===""||((s=$.dep_name)==null?void 0:s.toLowerCase().includes(x.department.trim().toLowerCase()));return A&&q});T(o)},[x,c]);const D={departmentId:"",branchId:"",department:"",description:""},[M,a]=j.useState(D);j.useEffect(()=>{if(l.length>0){let o=1;const $=l.map(A=>{var q,s;return{id:A._id,sno:o++,branchid:(q=A==null?void 0:A.branchId)==null?void 0:q._id,branch:(s=A==null?void 0:A.branchId)==null?void 0:s.name,dep_name:A==null?void 0:A.department,action:e.jsxs("div",{className:"action",children:[e.jsx("span",{className:"edit",title:"Edit",onClick:()=>N(A),children:e.jsx(pe,{})}),e.jsx("span",{className:"delete",onClick:()=>P(A._id),children:e.jsx(ue,{})})]})}});w($)}},[l]);const i=(o,$)=>{a({...M,[$]:o.target.value})},d=o=>{o.preventDefault(),Xe({inp:M,setisload:h,setInp:a,setopenmodal:f,init:D,dispatch:E})},N=o=>{console.log("edit",o),v(!0),a({branchId:o.branchId._id,departmentId:o._id,department:o.department,description:o.description}),f(!0)},P=o=>{console.log("delete",o),Ie({title:"Are you sure?",text:"Once deleted, All empoyee of this department deleted",icon:"warning",buttons:!0,dangerMode:!0}).then(async $=>{$&&Ke({departmentId:o,setisload:h,dispatch:E})})},W=()=>{Ge({inp:M,setisload:h,setInp:a,setopenmodal:f,init:D,dispatch:E})};return e.jsxs("div",{className:"department pt-3",children:[e.jsxs("div",{className:"head flex flex-wrap gap-1",children:[e.jsxs("div",{className:"flex gap-2 w-full justify-around md:w-auto",children:[e.jsxs(G,{className:"w-[48%] md:w-[150px]",size:"small",children:[e.jsx(K,{id:"demo-simple-select-helper-label",children:"Branch"}),e.jsxs(Q,{value:x.branch,onChange:o=>B({...x,branch:o.target.value}),input:e.jsx(oe,{startAdornment:e.jsx(De,{position:"start",children:e.jsx(Ee,{fontSize:"small"})}),label:"branch"}),children:[e.jsx(H,{selected:!0,value:"all",children:"All"}),p==null?void 0:p.map(o=>e.jsx(H,{value:o._id,children:o.name},o._id))]})]}),e.jsx(g,{size:"small",id:"outlined-basic",value:x.department,onChange:o=>B({...x,department:o.target.value}),variant:"outlined",label:"Search Department"})]}),e.jsx(I,{className:"w-full md:w-auto",variant:"contained",onClick:()=>f(!0),children:"Add Department"})]}),e.jsx("div",{className:"list",children:e.jsx(ve,{customStyles:we(),columns:Qe,data:L?O:c,pagination:!0,highlightOnHover:!0})}),e.jsx(ie,{open:n,onClose:()=>f(!1),children:e.jsx("div",{className:"membermodal w-[650px]",children:e.jsxs("div",{className:"whole",children:[e.jsx("div",{className:"modalhead",children:"Add Department"}),e.jsx("form",{onSubmit:d,children:e.jsx("span",{className:"modalcontent ",children:e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsxs(G,{sx:{width:"98%"},size:"small",children:[e.jsx(K,{id:"demo-simple-select-helper-label",children:"Branch"}),e.jsx(Q,{value:M.branchId,label:"branch",onChange:o=>i(o,"branchId"),children:p==null?void 0:p.map(o=>e.jsx(H,{value:o._id,children:o.name},o._id))})]}),e.jsx(g,{sx:{width:"98%"},required:!0,value:M.department,onChange:o=>i(o,"department"),label:"Department",size:"small"}),e.jsx(g,{multiline:!0,rows:4,onChange:o=>i(o,"description"),value:M.description,sx:{width:"98%"},label:"Description",size:"small"})]})})}),e.jsxs("div",{className:"modalfooter",children:[e.jsx(I,{size:"small",onClick:()=>{f(!1),v(!1),a(D)},variant:"outlined",children:" cancel"}),!m&&e.jsx(I,{sx:{mr:2},loading:C,loadingPosition:"end",endIcon:e.jsx(fe,{}),onClick:d,variant:"contained",type:"submit",children:"Add"}),m&&e.jsx(I,{sx:{mr:2},loading:C,loadingPosition:"end",endIcon:e.jsx(fe,{}),variant:"contained",onClick:W,children:"Update"})]})]})})})]})},ae={1:"Read",2:"Create",3:"Update",4:"Delete"},je=["branch","department","employee","attandence","ledger","ledger_entry","holiday","leave","notification","salary"],me={branch:[1,2,3,4],department:[1,2,3,4],employee:[1,2,3,4],attandence:[1,2,3,4],ledger:[1,2,3,4],ledger_entry:[1,2,3,4],holiday:[1,2,3,4],leave:[1,3,4],notification:[1,2,3,4],salary:[1,2,3]},ss={department:[1,2,3],employee:[1,2,3],attandence:[1,2,3],ledger:[1,2,3,4],ledger_entry:[1,2,3,4],holiday:[1,2],leave:[1,3],notification:[1,2],salary:[1]};function as(){const[n,f]=j.useState([]),[C,h]=j.useState([]),[c,w]=j.useState({name:"",email:"",password:"",role:"admin",profileImage:null,profilePreview:"",permissions:{...me}}),m=de();j.useEffect(()=>{o()},[]);const v=j.useRef(null),{handleImage:O}=Ne(),[T,p]=j.useState(null),[l,x]=j.useState(!1),[B,L]=j.useState(""),[E,D]=j.useState(!1),[M,a]=j.useState(null),i=t=>{a(r=>r===t?null:t)},d=()=>{w({name:"",email:"",password:"",role:"admin",profileImage:null,profilePreview:"",permissions:{...me}}),L(""),p(null),x(!1)},[N,P]=j.useState({userid:"",pass:""}),W=async()=>{const t={...c},r=new FormData;h(!0);try{const b=t.profileImage?await O(240,t.profileImage):null;b&&r.append("photo",b),r.append("name",t.name),r.append("email",t.email),r.append("role",t.role),r.append("password",t.password),r.append("permissions",JSON.stringify(t.permissions));const R=localStorage.getItem("emstoken");h(!0);const U=T!==null?`/api/editAdmin/${n[T]._id}`:"/api/addAdmin",X=await F["post"](U,r,{headers:{Authorization:`Bearer ${R}`,"Content-Type":"multipart/form-data"}});S.success(X.data.message,{autoClose:1200}),d(),o(),m(J())}catch(b){console.error(b),b.response?S.warn(b.response.data.message,{autoClose:1200}):S.error("Something went wrong",{autoClose:1200})}finally{h(!1)}},o=async()=>{try{const t=localStorage.getItem("emstoken");h(!0);const r=await F.get("/api/getAdmin",{headers:{Authorization:`Bearer ${t}`}});f(r.data)}catch(t){console.error(t),t.response?S.warn(t.response.data.message,{autoClose:1200}):S.error("Something went wrong",{autoClose:1200})}finally{h(!1)}},$=t=>{const r=n[t];console.log(r),w({...r,profilePreview:r.profileImage||"",profileImage:null}),p(t),x(!0)},A=async t=>{t.preventDefault();try{const r=localStorage.getItem("emstoken"),b=await F.post("/api/updatepassword",{pass:N},{headers:{Authorization:`Bearer ${r}`}});P({userid:"",pass:""}),D(!1),S.success(b.data.message,{autoClose:1200})}catch(r){console.log(r),r.response?S.warn(r.response.data.message,{autoClose:1200}):r.request?console.error("No response from server:",r.request):console.error("Error:",r.message)}},q=async t=>{swal({title:"Are you sure to Delete?",icon:"warning",buttons:!0,dangerMode:!0}).then(async r=>{var b,R;if(r){let U;try{const Z=localStorage.getItem("emstoken");h(!0),U=S.loading("Deleting...");const X=await F.delete(`/api/deleteAdmin/${t}`,{headers:{Authorization:`Bearer ${Z}`}});S.update(U,{render:X.data.message,type:"success",isLoading:!1,autoClose:1800}),o(),m(J())}catch(Z){console.error(Z),S.update(U,{render:((R=(b=Z.response)==null?void 0:b.data)==null?void 0:R.message)||"Error",type:"warning",isLoading:!1,autoClose:2500})}finally{h(!1)}}})},s=(t,r)=>{w(b=>{const R=b.permissions[t]||[],Z=R.includes(r)?R.filter(X=>X!==r):[...R,r].sort();return{...b,permissions:{...b.permissions,[t]:Z}}})},u=t=>{const r=t==="admin"?{...me}:{...ss};w({...c,role:t,permissions:r})},y=t=>{const r=t.target.files[0];r&&w(b=>({...b,profileImage:r,profilePreview:URL.createObjectURL(r)}))},k=()=>{B&&(w(t=>({...t,permissions:{...t.permissions,[B]:[]}})),L(""))},z=Array.from(new Set([...c.role==="admin"?je:Object.keys(c.permissions),...Object.keys(c.permissions)])),_=je.filter(t=>!z.includes(t));return e.jsxs("div",{className:"p-1 w-full",children:[e.jsxs("div",{className:" shadow-md rounded-lg",children:[e.jsx("div",{className:"flex justify-between flex-wrap items-center mb-4",children:e.jsx(I,{variant:"contained",className:"mr-2 w-full md:w-fit",onClick:()=>{d(),x(!0)},children:"Add Admin/ Manager"})}),n.length===0?e.jsx("p",{className:"text-gray-500",children:"No admins added yet."}):e.jsx("div",{className:"space-y-3",children:n.map((t,r)=>e.jsxs("div",{className:"flex flex-col justify-between items-start border border-dashed p-2 rounded-md overflow-x-auto ",children:[e.jsxs("div",{className:"flex justify-between w-full  items-center  gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{sx:{width:60,height:60},alt:t.name,src:t==null?void 0:t.profileImage}),e.jsxs("div",{children:[e.jsxs("p",{className:" capitalize text-[14px] md:text-[18px] font-medium",children:[t.name," (",t.role,")"]}),e.jsx("p",{className:"text-[12px] md:text-sm text-gray-500",children:t.email})]})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{title:"Edit",className:"p-2 border rounded hover:bg-gray-100",onClick:()=>$(r),children:e.jsx(ze,{className:"h-4 w-4"})}),e.jsx("button",{title:"Password Reset",className:"p-2 border rounded hover:bg-gray-100 text-green-500",onClick:()=>{P({...N,userid:t._id}),D(!0)},children:e.jsx(Pe,{className:"h-4 w-4 "})}),e.jsx("button",{title:"Delete",className:"p-2 border rounded text-red-600 hover:bg-red-50",onClick:()=>q(t._id),children:e.jsx(Oe,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex mt-2 justify-between items-center cursor-pointer bg-teal-100 px-4 py-1 rounded-md",onClick:()=>i(r),children:[e.jsxs("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:[" ",M===r?"Hide Permissions":"View Permissions "]}),M===r?e.jsx(V,{className:"text-xl"}):e.jsx(Y,{className:"text-xl"})]}),M===r&&e.jsxs("div",{className:"text-sm w-full  mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Permissions:"}),e.jsxs("table",{className:"table-auto border-collapse border border-gray-300 mt-2 text-xs w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-2 py-1 text-left",children:"Module"}),Object.values(ae).map(b=>e.jsx("th",{className:"border border-gray-300 px-2 py-1",children:b},b))]})}),e.jsx("tbody",{children:Object.entries(t.permissions).map(([b,R])=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-2 py-1 font-semibold",children:b}),Object.keys(ae).map(U=>e.jsx("td",{className:"border border-gray-300 px-2 py-1 text-center",children:R.includes(Number(U))?"✅":"-"},U))]},b))})]})]})]})]},r))})]}),e.jsx(ie,{open:l,onClose:()=>x(!1),children:e.jsx("div",{className:"membermodal w-[660px]",children:e.jsxs("form",{onSubmit:W,children:[e.jsxs("div",{className:"modalhead",children:[" ",T!==null?"Edit Admin":"Add Admin"]}),e.jsx("span",{className:"modalcontent",children:e.jsxs("div",{className:"space-y-3 pt-1 flex items-center gap-4 flex-col w-[100%] md:w-full",children:[e.jsxs("div",{className:"mt-1 items-center  w-fit relative",children:[e.jsx("input",{style:{display:"none"},type:"file",onChange:y,ref:v,accept:"image/*",name:"",id:"fileInput"}),e.jsx(ne,{sx:{width:70,height:70},alt:c.name,src:c.profilePreview}),e.jsx("span",{onClick:()=>v.current.click(),className:"absolute -bottom-1 -right-1 rounded-full bg-teal-900 text-white p-1",children:e.jsx(pe,{size:18})})]}),e.jsx(g,{fullWidth:!0,required:!0,value:c.name,onChange:t=>w({...c,name:t.target.value}),label:"Name",size:"small"}),e.jsx(g,{fullWidth:!0,required:!0,value:c.email,onChange:t=>w({...c,email:t.target.value}),label:"Email",size:"small",helperText:"*Note - you can also use companyname as mail handler, e.g. xyz@companyname.com"}),T==null&&e.jsxs(e.Fragment,{children:[e.jsx(g,{fullWidth:!0,required:!0,value:c.password,type:"password",onChange:t=>w({...c,password:t.target.value}),label:"Password",size:"small"}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"font-semibold block mb-1",children:"Role"}),e.jsxs("select",{className:"w-full border p-2 rounded",value:c.role,onChange:t=>u(t.target.value),children:[e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"manager",children:"Manager"})]})]})]}),c.role==="manager"&&e.jsxs("div",{className:"flex w-full flex-wrap items-center gap-2",children:[e.jsxs("select",{className:"border p-2 flex-3 rounded ",value:B,onChange:t=>L(t.target.value),children:[e.jsx("option",{value:"",children:"-- Select Module to Add --"}),_.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx(I,{variant:"contained",onClick:k,className:"flex-1",children:"Add Module"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Permissions"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2 text-left",children:"Module"}),Object.entries(ae).map(([t,r])=>e.jsx("th",{className:"border p-2 text-center",children:r},t))]})}),e.jsx("tbody",{children:z.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"border p-2 capitalize",children:t}),Object.keys(ae).map(r=>{var b;return e.jsx("td",{className:"border text-center",children:e.jsx("input",{className:` h-3 w-3 md:h-5 md:w-5 cursor-pointer rounded-md border-2 border-gray-400 \r
                                                                       focus:ring-2 focus:ring-red-400 focus:outline-none \r
                                                                       transition duration-200 ease-in-out`,type:"checkbox",checked:((b=c.permissions[t])==null?void 0:b.includes(Number(r)))||!1,onChange:()=>s(t,Number(r))})},r)})]},t))})]})})]})]})}),e.jsxs("div",{className:"modalfooter",children:[e.jsx(I,{variant:"outlined",onClick:d,children:"Cancel"}),e.jsx(I,{variant:"contained",onClick:W,loading:C,children:T!==null?"Update":"Create"})]})]})})}),e.jsx(ie,{open:E,onClose:()=>{D(!1)},children:e.jsx("div",{className:"membermodal",children:e.jsxs("form",{onSubmit:A,children:[e.jsx("h2",{children:"Reset Passowrd"}),e.jsxs("span",{className:"modalcontent ",children:[e.jsx(g,{fullWidth:!0,inputProps:{minLength:3,maxLength:10},required:!0,value:N.pass,onChange:t=>P({...N,pass:t.target.value}),label:"Passowrd",size:"small"}),e.jsx(I,{variant:"contained",sx:{mr:2},type:"submit",children:"Reset Password"})]})]})})})]})}const ye=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}];function us(){var q;const[n,f]=j.useState(null),[C,h]=j.useState(!1),[c,w]=j.useState(!1),[m,v]=j.useState(!1),{handleImage:O}=Ne(),[T,p]=j.useState(null),[l,x]=j.useState({name:"",address:"",contact:"",fullname:"",deviceSN:"",devices:[{SN:"BJ2C194460597",name:"Head Branch",online:!1}],officeTime:{in:"10:00",out:"18:00",breakMinutes:30},gracePeriod:{lateEntryMinutes:10,earlyExitMinutes:10},workingMinutes:{fullDay:480,halfDay:240,shortDayThreshold:360,overtimeAfterMinutes:490},weeklyOffs:[0],attendanceRules:{considerEarlyEntryBefore:"09:50",considerLateEntryAfter:"10:10",considerEarlyExitBefore:"17:50",considerLateExitAfter:"18:15"},payrollPolicies:{allowances:[],bonuses:[],deductions:[]}}),B=()=>{x({...l,devices:[...l.devices,{SN:"",name:"",online:!1}]})},L=s=>{swal({title:"Delete this device?",icon:"warning",buttons:!0,dangerMode:!0}).then(u=>{if(u){const y=l.devices.filter((k,z)=>z!==s);x({...l,devices:y})}})},E=de(),{employee:D,company:M,branch:a,profile:i}=he(s=>s.user),d=s=>{f(u=>u===s?null:s)};j.useEffect(()=>{M&&x(M)},[M]);const N=(s,u,y)=>{x(k=>({...k,[s]:{...k[s],[u]:y}}))},P=async s=>{s.preventDefault();try{v(!0);const u=localStorage.getItem("emstoken"),y=await F.post("/api/updateCompany",{...l},{headers:{Authorization:`Bearer ${u}`}});E(J()),S.success(y.data.message,{autoClose:1800})}catch(u){console.log(u),u.response?S.warn(u.response.data.message,{autoClose:2700}):u.request?console.error("No response from server:",u.request):console.error("Error:",u.message)}finally{v(!1)}},W=()=>{},o=s=>{var y;h(!0);const u={...s,managerIds:(y=s==null?void 0:s.managerIds)==null?void 0:y.map(k=>k._id)};p(u),w(!0)},$=we(),A=s=>s?Date.now()-new Date(s).getTime()<6e4:!1;return e.jsxs("div",{className:"w-full mx-auto mt-1 p-1 py-2 md:p-6 bg-white rounded-xl shadow-md space-y-3 md:space-y-6",children:[(i==null?void 0:i.role)=="superadmin"&&e.jsxs("div",{className:" shadow-lg border bg-blue-50 border-dashed border-blue-400 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer  bg-blue-200 px-4 py-2 rounded-md",onClick:()=>d("company"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:"Company Info"}),n==="company"?e.jsx(V,{className:"text-xl"}):e.jsx(Y,{className:"text-xl"})]}),e.jsx("div",{className:` 
                          rounded overflow-hidden transition-all duration-300 
                          ${n==="company"?"max-h-fit p-0 md:p-2 my-2":"max-h-0 p-0 my-0"}
                        `,children:e.jsxs("div",{className:"p-1 md:p-4 rounded  flex flex-col md:flex-row items-center  mt-2 space-y-4",children:[e.jsx("div",{className:"relative flex items-center mx-auto",children:e.jsxs("div",{className:"relative w-30 h-30 mx-auto",children:[l!=null&&l.logo?e.jsx("img",{src:Be(l.logo,{format:"webp",width:200,height:200}),alt:"Company Logo",className:"w-full h-full object-fill rounded-full border-2 border-dashed border-blue-300"}):e.jsx(qe,{className:"w-full h-full text-blue-400 rounded-full border-2 border-dashed border-blue-300"}),e.jsx("input",{type:"file",id:"logo-upload",accept:"image/*",onChange:async s=>{const u=s.target.files[0];if(!u)return;const y=await O(300,u),k=new FormData;k.append("_id",l._id),k.append("logo",y);try{v(!0);const z=localStorage.getItem("emstoken"),t=(await F.post("/api/updateCompany",k,{headers:{Authorization:`Bearer ${z}`,"Content-Type":"multipart/form-data"}})).data.logoUrl;x(r=>({...r,logo:t})),S.success("Logo uploaded successfully!")}catch(z){console.error(z),S.error("Failed to upload logo.")}finally{v(!1)}},className:"hidden"}),e.jsx("label",{htmlFor:"logo-upload",className:"absolute w-8 h-8 text-center bottom-0 right-0 bg-white border border-gray-300 rounded-full p-1 cursor-pointer shadow-md",children:"✎"})]})}),e.jsxs("div",{className:"w-full md:w-[70%] flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("div",{className:"w-full md:flex-1",children:e.jsx(g,{label:"Company Name",size:"small",variant:"standard",fullWidth:!0,value:(l==null?void 0:l.name)||"",onChange:s=>x({...l,name:s.target.value})})}),e.jsx("div",{className:"w-full md:flex-1",children:e.jsx(g,{label:"Contact",type:"tel",variant:"standard",size:"small",fullWidth:!0,value:(l==null?void 0:l.contact)||"",inputProps:{maxLength:10,inputMode:"numeric",pattern:"[0-9]*"},onChange:s=>x({...l,contact:s.target.value.replace(/\D/g,"")})})})]}),e.jsx("div",{children:e.jsx(g,{label:"Company Full Name",variant:"standard",fullWidth:!0,size:"small",value:(l==null?void 0:l.fullname)||"",onChange:s=>x({...l,fullname:s.target.value})})}),e.jsx("div",{children:e.jsx(g,{label:"Address",fullWidth:!0,multiline:!0,size:"small",minRows:2,value:(l==null?void 0:l.address)||"",onChange:s=>x({...l,address:s.target.value})})}),M?e.jsx(I,{variant:"contained",loading:m,onClick:P,children:"Save Changes"}):e.jsx(I,{loading:m,variant:"contained",onClick:()=>Ze({companyinp:l,setisload:v}),children:"+ Create Company"})]})]})})]}),((i==null?void 0:i.role)=="superadmin"||(i==null?void 0:i.role)=="admin")&&e.jsxs("div",{className:"border shadow-lg bg-green-50 border-dashed border-green-400 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-green-200 px-4 py-2 rounded-md",onClick:()=>d("branches"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:"Branches"}),n==="branches"?e.jsx(V,{className:"text-xl"}):e.jsx(Y,{className:"text-xl"})]}),e.jsxs("div",{className:`
                          rounded space-y-1 overflow-hidden transition-all duration-300
                          ${n==="branches"?"max-h-fit p-1 md:p-2 my-2":"max-h-0 p-0 my-0"}
                        `,children:[e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(I,{variant:"contained",onClick:()=>w(!0),children:"+ Add Branch"})}),e.jsx(ve,{customStyles:$,columns:[{name:"Name",selector:s=>s.name,sortable:!0},{name:"Location",selector:s=>s.location,sortable:!0},{name:"Manager(s)",cell:s=>{var u;return e.jsx("div",{className:"flex flex-col gap-2",children:(u=s==null?void 0:s.managerIds)==null?void 0:u.map((y,k)=>e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>W(y.userid),children:[e.jsx(ne,{src:y==null?void 0:y.profileImage,alt:y.name,children:!(y!=null&&y.profileImage)&&e.jsx(be,{})}),e.jsx("span",{children:y.name})]},k))})}},{name:"Actions",width:"120px",cell:s=>e.jsxs("div",{className:"action flex gap-2.5",children:[e.jsx("span",{className:"edit text-[18px] text-blue-500 cursor-pointer",title:"Edit",onClick:()=>o(s),children:e.jsx(pe,{})}),e.jsx("span",{className:"delete text-[18px] text-red-500 cursor-pointer",onClick:()=>o(s),children:e.jsx(ue,{})})]})}],data:a||[],pagination:!0,highlightOnHover:!0,noDataComponent:"No branches found"})]})]}),e.jsxs("div",{className:"border shadow-lg bg-teal-50 border-dashed border-teal-400 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-teal-200 px-4 py-2 rounded-md",onClick:()=>d("department"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:"Department"}),n==="department"?e.jsx(V,{className:"text-xl"}):e.jsx(Y,{className:"text-xl"})]}),e.jsx("div",{className:`
                          rounded overflow-hidden transition-all duration-300
                          ${n==="department"?"max-h-fit p-2 my-2":"max-h-0 p-0 my-0"}
                        `,children:e.jsx(es,{})})]}),e.jsxs("div",{className:"border shadow-lg bg-teal-50 border-dashed border-teal-400 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-teal-200 px-4 py-2 rounded-md",onClick:()=>d("device"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:"Devices"}),n==="device"?e.jsx(V,{className:"text-xl"}):e.jsx(Y,{className:"text-xl"})]}),e.jsxs("div",{className:`
                          rounded overflow-hidden transition-all duration-300
                          ${n==="device"?"max-h-fit p-2 my-2":"max-h-0 p-0 my-0"}
                        `,children:[e.jsxs("div",{className:"mb-2  ",children:[(q=l==null?void 0:l.devices)==null?void 0:q.map((s,u)=>{const y=A(s==null?void 0:s.lastHeartbeat);return e.jsxs("div",{className:"flex w-full gap-2 items-center mb-2",children:[e.jsx(g,{label:"Device Name",variant:"standard",size:"small",value:s.name,onChange:k=>updateDevice(u,"name",k.target.value)}),e.jsx(g,{label:"Device SN",variant:"standard",size:"small",value:s.SN,onChange:k=>updateDevice(u,"SN",k.target.value)}),y?e.jsx($e,{title:"Device Online",style:{color:"green",fontSize:"1.6rem"}}):e.jsx(Le,{title:"Device Offline",style:{color:"red",fontSize:"1.6rem"}}),e.jsx(He,{title:`Last Sync: ${We(s==null?void 0:s.lastHeartbeat).format("DD MMM YYYY, hh:mm:ss A")}`,arrow:!0,children:e.jsx(Ue,{style:{color:"blue",fontSize:"1.6rem"}})}),e.jsx(Fe,{color:"error",onClick:()=>L(u),children:e.jsx(_e,{})})]},u)}),e.jsx(I,{variant:"contained",onClick:B,children:"Add More Device"})]}),e.jsx(I,{className:"f float-end",variant:"contained",loading:m,onClick:P,children:"Save Changes"})]})]}),(i==null?void 0:i.role)=="superadmin"&&e.jsxs("div",{className:"border shadow-lg bg-slate-50 border-dashed border-slate-400 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-slate-200 px-4 py-2 rounded-md",onClick:()=>d("admin"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:"Admin/Manager"}),n==="admin"?e.jsx(V,{className:"text-xl"}):e.jsx(Y,{className:"text-xl"})]}),e.jsx("div",{className:`
                          rounded overflow-hidden transition-all duration-300 
                          ${n==="admin"?"max-h-fit md:p-2 p-1 my-2":"max-h-0 p-0 my-0"}
                        `,children:e.jsx(as,{})})]}),e.jsxs("div",{className:"border shadow-lg bg-yellow-50 border-dashed border-yellow-400 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-yellow-200 px-4 py-2 rounded-md",onClick:()=>d("attendance"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:" Attendance Rules"}),n==="attendance"?e.jsx(V,{className:"text-xl"}):e.jsx(Y,{className:"text-xl"})]}),e.jsxs("div",{className:`
                          rounded overflow-hidden transition-all duration-300 
                          ${n==="attendance"?"max-h-fit p-2 my-2":"max-h-0 p-0 my-0"}
                        `,children:[e.jsxs(te,{className:"mt-1 p-2 grid grid-cols-1 md:grid-cols-3 gap-5",children:[e.jsx(g,{label:"Office Time In",fullWidth:!0,type:"time",value:l.officeTime.in,onChange:s=>N("officeTime","in",s.target.value),helperText:"Time when office hours begin"}),e.jsx(g,{label:"Office Time Out",fullWidth:!0,type:"time",value:l.officeTime.out,onChange:s=>N("officeTime","out",s.target.value),helperText:"Time when office hours end"}),e.jsx(g,{label:"Break Minutes",fullWidth:!0,type:"number",value:l.officeTime.breakMinutes,onChange:s=>N("officeTime","breakMinutes",Number(s.target.value)),helperText:"Total break time allowed during the day"}),e.jsx(g,{label:"Full Day Minutes",fullWidth:!0,type:"number",value:l.workingMinutes.fullDay,onChange:s=>N("workingMinutes","fullDay",Number(s.target.value)),helperText:"Total working minutes required for a full day"}),e.jsx(g,{label:"Half Day Minutes",fullWidth:!0,type:"number",value:l.workingMinutes.halfDay,onChange:s=>N("workingMinutes","halfDay",Number(s.target.value)),helperText:"Minimum minutes required for marking a half-day"}),e.jsx(g,{label:"Short Day Threshold (min)",fullWidth:!0,type:"number",value:l.workingMinutes.shortDayThreshold,onChange:s=>N("workingMinutes","shortDayThreshold",Number(s.target.value)),helperText:"Below this time is considered a short day"}),e.jsx(g,{label:"Overtime After Minutes",fullWidth:!0,type:"number",value:l.workingMinutes.overtimeAfterMinutes,onChange:s=>N("workingMinutes","overtimeAfterMinutes",Number(s.target.value)),helperText:"Time after which overtime calculation begins"}),e.jsxs(G,{fullWidth:!0,children:[e.jsx(K,{children:"Weekly Offs"}),e.jsx(Q,{multiple:!0,value:l.weeklyOffs,onChange:s=>x({...l,weeklyOffs:s.target.value}),input:e.jsx(oe,{label:"Weekly Offs"}),renderValue:s=>s.map(u=>{var y;return(y=ye.find(k=>k.value===u))==null?void 0:y.label}).join(", "),children:ye.map(s=>e.jsxs(H,{value:s.value,children:[e.jsx(le,{checked:l.weeklyOffs.includes(s.value)}),e.jsx(re,{primary:s.label})]},s.value))})]}),Object.entries(l.attendanceRules).map(([s,u])=>{const y=s.replace(/([A-Z])/g," $1").replace(/^./,z=>z.toUpperCase()),k={considerEarlyEntryBefore:"Considered early if punched before this time",considerLateEntryAfter:"Considered late if punched after this time",considerEarlyExitBefore:"Considered early exit if leaving before this time",considerLateExitAfter:"Considered late exit if leaving after this time"};return e.jsx(g,{fullWidth:!0,label:y,type:"time",value:u,onChange:z=>N("attendanceRules",s,z.target.value),helperText:k[s]},s)})]}),e.jsx(te,{sx:{mt:4,textAlign:"right"},children:e.jsx(I,{variant:"contained",onClick:P,children:"Update Settings"})})]})]}),e.jsxs("div",{className:"border shadow-lg bg-purple-50 border-dashed border-purple-400 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-purple-200 px-4 py-2 rounded-md",onClick:()=>d("policies"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:"Default Payroll Policies"}),n==="policies"?e.jsx(V,{className:"text-xl"}):e.jsx(Y,{className:"text-xl"})]}),e.jsx("form",{onSubmit:P,children:e.jsxs("div",{className:`rounded overflow-hidden transition-all duration-300 
                     ${n==="policies"?"max-h-fit p-2 my-2":"max-h-0 p-0 my-0"}`,children:[e.jsx("div",{className:"flex flex-col gap-3",children:["allowances","bonuses","deductions"].map(s=>{var y;const u=((y=l==null?void 0:l.payrollPolicies)==null?void 0:y[s])||[];return e.jsxs("div",{className:"flex flex-col shadow-lg gap-2 px-2 pb-2 my-2 border rounded border-dashed relative border-primary",children:[e.jsx("p",{className:"capitalize absolute t-0 -translate-y-1/2 l-2 bg-white px-2",children:s}),e.jsx("div",{className:"mt-6 flex flex-col gap-2",children:u.map((k,z)=>e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(g,{label:"Name",size:"small",required:!0,value:k.name,onChange:_=>{const t=u.map((r,b)=>b===z?{...r,name:_.target.value}:r);x({...l,payrollPolicies:{...l.payrollPolicies,[s]:t}})}}),e.jsxs(Q,{size:"small",className:"w-[120px]",value:k.type,onChange:_=>{const t=u.map((r,b)=>b===z?{...r,type:_.target.value}:r);x({...l,payrollPolicies:{...l.payrollPolicies,[s]:t}})},children:[e.jsx(H,{value:"amount",children:"Amount"}),e.jsx(H,{value:"percentage",children:"%"})]}),e.jsx(g,{label:k.type==="amount"?"₹":"%",type:"number",size:"small",required:!0,className:"w-[90px]",value:k.value,onChange:_=>{const t=u.map((r,b)=>b===z?{...r,value:Number(_.target.value)}:r);x({...l,payrollPolicies:{...l.payrollPolicies,[s]:t}})}}),e.jsx(ue,{className:"text-red-500 w-8 h-8 p-1  cursor-pointer text-lg",onClick:()=>{const _=u.filter((t,r)=>r!==z);x({...l,payrollPolicies:{...l.payrollPolicies,[s]:_}})}})]},z))}),e.jsxs(I,{size:"small",variant:"contained",onClick:()=>x({...l,payrollPolicies:{...l.payrollPolicies,[s]:[...u,{name:"",type:"amount",value:0}]}}),children:["+ Add ",s.slice(0,-1)]})]},s)})}),e.jsx(te,{sx:{mt:2,textAlign:"right"},children:e.jsx(I,{variant:"contained",type:"submit",children:"Save Policies"})})]})})]}),e.jsx(ie,{open:c,onClose:()=>{w(!1),p(null),h(!1)},children:e.jsx("div",{className:"membermodal w-[680px]",children:e.jsx(Je,{setopenviewmodal:w,editbranchdata:T,editbranch:C,company:M,employee:D})})})]})}export{us as default};
