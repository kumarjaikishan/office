import{r as c,b as p,y as d,j as t,I as E}from"./index-CTh4XINP.js";import{X as D}from"./index.es-DqB4JCGQ.js";import{c as M}from"./attandencehelper-B7qcYoQE.js";import{a as $}from"./index-n91Zg7yz.js";import{d as z}from"./dayjs.min-D-96h9Fd.js";import{a as B}from"./index-DnD-72us.js";import{A as I}from"./index-D8LLMcYn.js";import{M as U}from"./Modalbox-CNzqGYqV.js";import{B as m}from"./Button-Gf5sSqIk.js";import{T as x}from"./TextField-DZ2WNkho.js";import"./Select-CrBcKFAw.js";import"./createSimplePaletteValueFilter-B4rI7VpO.js";import"./useSlotProps-DkXkGTp2.js";import"./ButtonBase-DRT54j5u.js";const L=()=>{c.useEffect(()=>{u()},[]);const h={userid:"",name:"",email:"",password:""},[j,v]=c.useState([]),[y,l]=c.useState(!1),[o,i]=c.useState(h),[f,g]=c.useState(!1),u=async()=>{var e,a;try{const s=localStorage.getItem("emstoken"),r=await p.get("/api/developerfetch",{headers:{Authorization:`Bearer ${s}`}});v(r.data.users)}catch(s){console.log(s),d.warn(((a=(e=s.response)==null?void 0:e.data)==null?void 0:a.message)||"Error",{autoClose:3e3})}},w=async e=>{var a,s;e.preventDefault();try{const r=localStorage.getItem("emstoken"),n=await p.post("/api/User",{...o},{headers:{Authorization:`Bearer ${r}`}});l(!1),u(),d.success(n.data.message,{autoClose:1800})}catch(r){console.log(r),d.warn(((s=(a=r.response)==null?void 0:a.data)==null?void 0:s.message)||"Error",{autoClose:3e3})}finally{}},C=e=>{i({userid:e._id,name:e.name,email:e.email}),g(!0),l(!0)},N=e=>{swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this",icon:"warning",buttons:!0,dangerMode:!0}).then(async a=>{var s,r;if(a)try{const n=localStorage.getItem("emstoken"),A=await p.delete(`/api/User/${e}`,{headers:{Authorization:`Bearer ${n}`}});u(),d.success(A.data.message,{autoClose:1800})}catch(n){console.log(n),d.warn(((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.message)||"Error",{autoClose:3e3})}})},b=async()=>{},S=()=>{l(!1),i(h),g(!1)},k=[{name:"S.No",selector:(e,a)=>a+1,width:"60px",center:!0},{name:"Name",selector:e=>e.name},{name:"Email",selector:e=>e.email},{name:"Date",selector:e=>z(e.createdAt).format("DD MMM, YY")},{name:"Status",selector:e=>e.stat||"-",width:"130px"},{name:"Action",width:"100px",cell:e=>t.jsxs("div",{className:"flex gap-2",children:[t.jsx("span",{className:"text-[18px] text-blue-500 cursor-pointer",title:"Edit",onClick:()=>C(e),children:t.jsx(E,{})}),t.jsx("span",{className:"text-[18px] text-red-500 cursor-pointer",title:"Delete",onClick:()=>N(e._id),children:t.jsx(I,{})})]})}];return t.jsxs("div",{children:[t.jsx("div",{className:"my-1 flex justify-end",children:t.jsx(m,{variant:"contained",className:"flex-[2] md:w-fit md:flex-none",startIcon:t.jsx(B,{}),onClick:()=>l(!0),children:"Add User"})}),t.jsx(D,{columns:k,data:j,pagination:!0,customStyles:M,highlightOnHover:!0,noDataComponent:t.jsxs("div",{className:"flex items-center gap-2 py-6 text-center text-gray-600 text-sm",children:[t.jsx($,{className:"text-xl"})," No records found matching your criteria."]})}),t.jsx(U,{open:y,onClose:()=>{l(!1)},children:t.jsx("div",{className:"membermodal",children:t.jsxs("form",{onSubmit:w,children:[t.jsx("h2",{children:"Add New User"}),t.jsxs("span",{className:"modalcontent ",children:[t.jsx(x,{fullWidth:!0,required:!0,value:o.name,onChange:e=>i({...o,name:e.target.value}),label:"Name",size:"small"}),t.jsx(x,{fullWidth:!0,required:!0,type:"email",value:o.email,onChange:e=>i({...o,email:e.target.value}),label:"Email",size:"small"}),!f&&t.jsx(x,{fullWidth:!0,required:!0,type:"password",value:o.password,onChange:e=>i({...o,password:e.target.value}),label:"Passowrd",size:"small"}),t.jsxs("div",{children:[f?t.jsx(m,{variant:"contained",sx:{mr:2},onClick:b,children:"Save"}):t.jsx(m,{variant:"contained",sx:{mr:2},type:"submit",children:"Add User"}),t.jsx(m,{variant:"outlined",onClick:S,sx:{mr:2},children:"Cancel"})]})]})]})})})]})};export{L as default};
