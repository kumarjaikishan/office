import{r as d,b as u,y as n,j as s,P as E,g as $,K as D}from"./index-BnPnHAWO.js";import{X as M}from"./index.es-D0Cu--to.js";import{u as z}from"./attandencehelper-DbcSdLjK.js";import{a as B}from"./index-oLXk8M5p.js";import{A as U}from"./index-BtHQLl0c.js";import{M as I}from"./Modalbox-C6mxA1ov.js";import{B as p}from"./Button-Bcz6Kzi9.js";import{T as x}from"./TextField-DicE64Wz.js";import"./Select-B4fkvyty.js";import"./createSimplePaletteValueFilter-CV2aCUyM.js";import"./useSlotProps-BT0rsFT6.js";import"./ButtonBase-lQW-ETfK.js";const K=()=>{d.useEffect(()=>{m()},[]);const h={userid:"",name:"",email:"",password:""},[j,v]=d.useState([]),[y,l]=d.useState(!1),[o,c]=d.useState(h),[g,f]=d.useState(!1),m=async()=>{var e,a;try{const t=localStorage.getItem("emstoken"),r=await u.get("/api/developerfetch",{headers:{Authorization:`Bearer ${t}`}});v(r.data.users)}catch(t){console.log(t),n.warn(((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.message)||"Error",{autoClose:3e3})}},w=async e=>{var a,t;e.preventDefault();try{const r=localStorage.getItem("emstoken"),i=await u.post("/api/User",{...o},{headers:{Authorization:`Bearer ${r}`}});l(!1),m(),n.success(i.data.message,{autoClose:1800})}catch(r){console.log(r),n.warn(((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||"Error",{autoClose:3e3})}finally{}},C=e=>{c({userid:e._id,name:e.name,email:e.email}),f(!0),l(!0)},N=e=>{swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this",icon:"warning",buttons:!0,dangerMode:!0}).then(async a=>{var t,r;if(a)try{const i=localStorage.getItem("emstoken"),A=await u.delete(`/api/User/${e}`,{headers:{Authorization:`Bearer ${i}`}});m(),n.success(A.data.message,{autoClose:1800})}catch(i){console.log(i),n.warn(((r=(t=i.response)==null?void 0:t.data)==null?void 0:r.message)||"Error",{autoClose:3e3})}})},S=async()=>{var e,a;try{const t=localStorage.getItem("emstoken"),r=await u.put(`/api/User/${o.userid}`,{name:o.name,email:o.email},{headers:{Authorization:`Bearer ${t}`}});l(!1),m(),n.success(r.data.message,{autoClose:1800})}catch(t){console.log(t),n.warn(((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.message)||"Error",{autoClose:3e3})}},b=()=>{l(!1),c(h),f(!1)},k=[{name:"S.No",selector:(e,a)=>a+1,width:"60px"},{name:"Name",selector:e=>e.name},{name:"Email",selector:e=>e.email},{name:"Date",selector:e=>$(e.createdAt).format("DD MMM, YY")},{name:"Status",selector:e=>e.stat||"-",width:"130px"},{name:"Action",width:"100px",cell:e=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:"text-[18px] text-blue-500 cursor-pointer",title:"Edit",onClick:()=>C(e),children:s.jsx(D,{})}),s.jsx("span",{className:"text-[18px] text-red-500 cursor-pointer",title:"Delete",onClick:()=>N(e._id),children:s.jsx(U,{})})]})}];return s.jsxs("div",{children:[s.jsx("div",{className:"my-1 flex justify-end",children:s.jsx(p,{variant:"contained",className:"flex-[2] md:w-fit md:flex-none",startIcon:s.jsx(E,{}),onClick:()=>l(!0),children:"Add User"})}),s.jsx(M,{columns:k,data:j,pagination:!0,customStyles:z(),highlightOnHover:!0,noDataComponent:s.jsxs("div",{className:"flex items-center gap-2 py-6 text-center text-gray-600 text-sm",children:[s.jsx(B,{className:"text-xl"})," No records found matching your criteria."]})}),s.jsx(I,{open:y,onClose:()=>{l(!1)},children:s.jsx("div",{className:"membermodal",children:s.jsxs("form",{onSubmit:w,children:[s.jsx("h2",{children:"Add New User"}),s.jsxs("span",{className:"modalcontent ",children:[s.jsx(x,{fullWidth:!0,required:!0,value:o.name,onChange:e=>c({...o,name:e.target.value}),label:"Name",size:"small"}),s.jsx(x,{fullWidth:!0,required:!0,type:"email",value:o.email,onChange:e=>c({...o,email:e.target.value}),label:"Email",size:"small"}),!g&&s.jsx(x,{fullWidth:!0,required:!0,type:"password",value:o.password,onChange:e=>c({...o,password:e.target.value}),label:"Passowrd",size:"small"}),s.jsxs("div",{children:[g?s.jsx(p,{variant:"contained",sx:{mr:2},onClick:S,children:"Save"}):s.jsx(p,{variant:"contained",sx:{mr:2},type:"submit",children:"Add User"}),s.jsx(p,{variant:"outlined",onClick:b,sx:{mr:2},children:"Cancel"})]})]})]})})})]})};export{K as default};
