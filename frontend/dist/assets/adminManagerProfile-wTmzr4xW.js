import{r as d,f as y,j as e,G as m,A as N,x as f,X as v,Q as w,y as x,b as S}from"./index-Be_QPdDA.js";import{B as k}from"./Button-BIzmkch7.js";import"./createSimplePaletteValueFilter-DkxTn1m9.js";import"./ButtonBase-BuAZY-7T.js";const p={1:"Read",2:"Write",3:"Update",4:"Delete"},z=()=>{const[u,E]=d.useState(!1),[n,h]=d.useState(!1),{profile:t}=y(a=>a.user),[s,j]=d.useState(null),[g,o]=d.useState(null);d.useEffect(()=>{t&&j(t)},[t]);const b=async()=>{var i,r;let a;try{o(!0),a=x.loading("Please wait...");const l=localStorage.getItem("emstoken"),c=(await S.get("/api/resetrequest",{headers:{Authorization:`Bearer ${l}`}})).data;o(!1),swal({title:c.extramessage,icon:"success"}),setmessagesent(c.extramessage),x.update(a,{render:c.message,type:"success",isLoading:!1,autoClose:2100})}catch(l){o(!1),x.update(a,{render:((r=(i=l.response)==null?void 0:i.data)==null?void 0:r.message)||l.message,type:"warn",isLoading:!1,autoClose:2200}),console.log(l)}};return e.jsx("div",{className:"p-0 md:p-4",children:u?e.jsxs("div",{className:"w-full h-[300px] flex gap-5 flex-col justify-center items-center overflow-auto bg-white",children:[e.jsxs("div",{className:"relative",children:[e.jsx(m,{className:"animate-spin",style:{animationDuration:"2.5s"},size:50,color:"teal"}),e.jsx(m,{className:"absolute -bottom-4 left-0 animate-spin",style:{animationDuration:"3s"},size:20,color:"teal"})]}),e.jsx("p",{className:"text-teal-600",children:"loading..."})]}):e.jsxs("div",{className:"w-full mx-auto bg-white overflow-auto shadow rounded-lg p-1 py-2 md:p-4",children:[e.jsxs("div",{className:" flex gap-3 justify-start md:justify-start",children:[e.jsx("div",{className:"w-20 h-20 flex-shrink-0 bg-gray-200 rounded-full border-2 border-teal-500 border-dashed p-[2px] flex items-center justify-center",children:e.jsx(N,{sx:{width:72,height:72},alt:s==null?void 0:s.name,src:s==null?void 0:s.profileImage})}),e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-xl capitalize font-bold text-gray-800 break-words",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s==null?void 0:s.role}),e.jsx("div",{className:"mt-3 space-y-1 text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-2 break-words",children:[e.jsx(f,{className:"text-gray-500"})," ",(s==null?void 0:s.email)||"N/A"]})})]})]}),(t==null?void 0:t.role)!=="superadmin"&&(t==null?void 0:t.role)!=="developer"&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-teal-100 px-4 py-1 md:py-2 rounded-md",onClick:()=>h(!n),children:[e.jsxs("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:[" ",n?"Hide Permissions":"View Permissions"]}),n?e.jsx(v,{className:"text-xl"}):e.jsx(w,{className:"text-xl"})]}),n&&e.jsxs("div",{className:"text-sm mt-3 overflow-x-auto",children:[e.jsx("span",{className:"font-semibold",children:"Permissions:"}),e.jsxs("table",{className:"table-auto border-collapse border border-gray-300 mt-2 text-xs w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-2 py-1 text-left",children:"Module"}),Object.values(p).map(a=>e.jsx("th",{className:"border border-gray-300 px-2 py-1",children:a},a))]})}),e.jsx("tbody",{children:Object.entries((s==null?void 0:s.permissions)||{}).map(([a,i])=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-2 py-1 font-semibold",children:a}),Object.keys(p).map(r=>e.jsx("td",{className:"border border-gray-300 px-2 py-1 text-center",children:i.includes(Number(r))?"âœ…":"-"},r))]},a))})]})]})]}),t.role=="superadmin"&&e.jsx("div",{className:"my-2",children:e.jsx(k,{onClick:b,disabled:g,title:"Send Password Reset Link",variant:"contained",className:"splbtn",children:"Send Password Reset Link"})})]})})};export{z as default};
