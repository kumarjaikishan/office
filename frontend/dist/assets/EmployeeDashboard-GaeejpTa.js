import{r as m,o as N,j as e,q as T,t as b,w as D,T as C,B as f,a5 as j,aj as w,ak as E,b as h,M as y,g as M,h as g}from"./index-CktFwpZn.js";import{H as k}from"./holidayCalander-DU6_RsJ8.js";import{B as S,E as O,F as A,G as B,H}from"./dateViewRenderers-DflQRc-W.js";import"./AdapterDateFns-Bs8Rskmi.js";import"./Tooltip-DRuc6smZ.js";import"./Popper-Do5fxz7X.js";import"./index-i8EWw87q.js";import"./useThemeProps-Cz_DLs6a.js";const I=r=>{const{classes:a}=r;return D({root:["root"]},O,a)},R=T(C,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),P=m.forwardRef(function(a,o){const c=N({props:a,name:"MuiDialogTitle"}),{className:u,id:n,...x}=c,s=c,i=I(s),{titleId:l=n}=m.useContext(S);return e.jsx(R,{component:"h2",className:b(i.root,u),ownerState:s,ref:o,variant:"h6",id:n??l,...x})}),U=["All","Staff","Manager","HR"],W=["Holiday","Policy","Event","Urgent"],Y=({notices:r=[],onDelete:a,onSave:o})=>{const[c,u]=m.useState(!1),[n,x]=m.useState(null),[s,i]=m.useState({title:"",date:"",employeeType:"",noticeType:""}),l=(t=null)=>{x(t),i(t?{title:t.title,date:t.date,employeeType:t.employeeType,noticeType:t.noticeType}:{title:"",date:"",employeeType:"",noticeType:""}),u(!0)},d=()=>{x(null),u(!1)},p=()=>{o&&o({...s,id:(n==null?void 0:n.id)||Date.now()}),d()};return e.jsxs("div",{className:"bg-white h-full shadow-lg rounded-lg p-4 w-full md:w-[350px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 border-b pb-1",children:[e.jsx("h3",{className:"text-lg font-bold",children:"ðŸ“Œ Official Notices"}),e.jsx(f,{size:"small",variant:"contained",onClick:()=>l(),children:"Add"})]}),r!=null&&r.length?e.jsx("ul",{className:"space-y-2 text-sm h-[300px] overflow-y-auto",children:r.map((t,v)=>e.jsxs("li",{className:"border-l-4 border-blue-500 pl-2 relative group",children:[e.jsx("p",{className:"font-semibold",children:t.title}),e.jsx("p",{className:"text-gray-600 text-xs",children:t.date}),e.jsxs("div",{className:"absolute right-1 top-1 hidden group-hover:flex gap-1",children:[e.jsx(j,{size:"small",onClick:()=>l(t),children:e.jsx(w,{className:"text-blue-500"})}),e.jsx(j,{size:"small",onClick:()=>a&&a(t.id),children:e.jsx(E,{className:"text-red-500"})})]})]},v))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No official notices available."}),e.jsxs(A,{open:c,onClose:d,children:[e.jsx(P,{children:n?"Edit Notice":"Add Notice"}),e.jsxs(B,{className:"flex flex-col gap-4 mt-2",children:[e.jsx(h,{label:"Notice Title",fullWidth:!0,value:s.title,onChange:t=>i({...s,title:t.target.value})}),e.jsx(h,{label:"Date",type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:s.date,onChange:t=>i({...s,date:t.target.value})}),e.jsx(h,{select:!0,label:"Type of Employee",fullWidth:!0,value:s.employeeType,onChange:t=>i({...s,employeeType:t.target.value}),children:U.map(t=>e.jsx(y,{value:t,children:t},t))}),e.jsx(h,{select:!0,label:"Type of Notice",fullWidth:!0,value:s.noticeType,onChange:t=>i({...s,noticeType:t.target.value}),children:W.map(t=>e.jsx(y,{value:t,children:t},t))})]}),e.jsxs(H,{children:[e.jsx(f,{onClick:d,children:"Cancel"}),e.jsx(f,{variant:"contained",onClick:p,children:n?"Update":"Add"})]})]})]})},V=()=>{const{attendance:r,companysetting:a,holiday:o}=M(l=>l.employee),[c,u]=m.useState(null),n=(a==null?void 0:a.weeklyOffs)||[1];m.useEffect(()=>{x()},[o]);const x=()=>{const l=[];o==null||o.forEach(d=>{let p=g(d.fromDate);const t=d.toDate?g(d.toDate):p;for(;p.isSameOrBefore(t,"day");)l.push({date:p.format("MM/DD/YYYY"),name:d.name}),p=p.add(1,"day")}),u(l)},s=c==null?void 0:c.map(l=>({date:g(l.date).toDate(),name:l.name})),i=[{title:"Annual General Meeting on Sep 10",date:"2025-08-01"},{title:"New ID Cards to be issued by next week",date:"2025-07-30"},{title:"Office renovation starts next Monday",date:"2025-07-28"}];return e.jsx("div",{className:"p-2 md:p-3 lg:p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:" ",children:e.jsx(k,{highlightedDates:s,weeklyOffs:n})}),e.jsx("div",{className:" ",children:e.jsx(Y,{notices:i})})]})})};export{V as default};
