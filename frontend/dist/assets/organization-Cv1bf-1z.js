import{r as p,g as Q,j as e,A as U,F as Z,b as T,y as b,R as le,S as ne,K as oe,U as z,P as D}from"./index-CjW4X5Ur.js";import{M as K}from"./Modalbox-CHr8VR9v.js";import{G as ie,L as X}from"./ListItemText-BEwn5k7H.js";import{T as y}from"./TextField-DXhoCG0B.js";import{F as Y,I as ee,S as se,O as ae}from"./Select-Ac0ty6HW.js";import{M as te}from"./MenuItem-C0OQJkhO.js";import{C as re}from"./Checkbox-5IS7pX2U.js";import{B as R}from"./Box-Bz3CLWhg.js";import{B as L}from"./Button-Tp5yXu1x.js";import de from"./Department-DtKPlQKP.js";import{a as ce}from"./index-CxFPPXBF.js";import{u as me}from"./imageresizer-D4I-KFLq.js";import"./useSlotProps-B5VaySyr.js";import"./styled-CncxPoFd.js";import"./useThemeProps-Cu7XFRIu.js";import"./Typography-ASPArm2Z.js";import"./createSimplePaletteValueFilter-Dr898dzn.js";import"./ButtonBase-ByYBLvss.js";import"./index-CIuVGdG1.js";import"./index.es-aywfQkiS.js";import"./attandencehelper-Bbr_tBMC.js";import"./dayjs.min-Dpf_s3do.js";import"./InputAdornment-D8n0xtJw.js";const ue=({setopenviewmodal:c,employee:k,company:I,editbranch:u,editbranchdata:h})=>{const[i,w]=p.useState({id:"",name:"",location:"",companyId:"",managerIds:[]}),{adminManager:C}=Q(t=>t.user),[v,S]=p.useState([]),n=localStorage.getItem("emstoken");p.useEffect(()=>{S(k),w({...i,companyId:I._id}),u&&w(h)},[I,u]),p.useEffect(()=>{C.length>0&&S(C.filter(t=>t.role=="manager"))},[C]);const g=(t,l)=>{w(o=>({...o,[t]:l}))},E=async()=>{var t,l;try{const o=await T.post("/api/addBranch",i,{headers:{Authorization:`Bearer ${n}`}});b.success("Branch added successfully"),c(!1),w({name:"",location:"",companyId:"",managerIds:[]})}catch(o){console.error(o),b.error(((l=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:l.message)||"Error adding branch")}},N=async()=>{var t,l;try{const o=await T.post("/api/editBranch",i,{headers:{Authorization:`Bearer ${n}`}});b.success(o.data.message),c(!1),w({name:"",location:"",companyId:"",managerIds:[]})}catch(o){console.error(o),b.error(((l=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:l.message)||"Error adding branch")}};return e.jsxs("form",{children:[e.jsx("h2",{children:u?"Edit Branch":"Add New Branch"}),e.jsxs("span",{className:"modalcontent",children:[e.jsxs(ie,{container:!0,spacing:2,children:[e.jsx(y,{label:"Branch Name",fullWidth:!0,size:"small",value:i.name,onChange:t=>g("name",t.target.value),required:!0,helperText:"Enter the official branch name"}),e.jsx(y,{label:"Location",fullWidth:!0,size:"small",value:i.location,onChange:t=>g("location",t.target.value),helperText:"City, State or Address"}),e.jsxs(Y,{size:"small",fullWidth:!0,children:[e.jsx(ee,{children:"Managers"}),e.jsx(se,{multiple:!0,value:i.managerIds,onChange:t=>g("managerIds",t.target.value),input:e.jsx(ae,{label:"Managers"}),renderValue:t=>t.map(l=>{var o;return(o=v.find(j=>j._id===l))==null?void 0:o.name}).join(", "),children:v==null?void 0:v.map(t=>{var l;return e.jsxs(te,{value:t==null?void 0:t._id,children:[e.jsx(re,{checked:(l=i==null?void 0:i.managerIds)==null?void 0:l.includes(t._id)}),e.jsx(U,{src:t==null?void 0:t.profileImage,alt:t==null?void 0:t.name,children:!t.profileImage&&e.jsx(Z,{})}),e.jsx(X,{className:"ml-2 capitalize",primary:t==null?void 0:t.name})]},t._id)})})]})]}),e.jsx(R,{sx:{mt:3,textAlign:"right"},children:u?e.jsx(L,{variant:"contained",onClick:N,children:"Save"}):e.jsx(L,{variant:"contained",onClick:E,children:"Add Branch"})})]})]})},he=async({companyinp:c,setisload:k})=>{const I=localStorage.getItem("emstoken");k(!0);try{const u=await T.post("/api/addcompany",{name:c.name,industry:c.industry},{headers:{Authorization:`Bearer ${I}`}});console.log("Query:",u),b.success(u.data.message,{autoClose:1200})}catch(u){console.log(u),u.response?b.warn(u.response.data.message,{autoClose:1200}):u.request?console.error("No response from server:",u.request):console.error("Error:",u.message)}finally{k(!1)}},$={1:"Read",2:"Create",3:"Update",4:"Delete"},H=["attandence","branch","department","employee","ledgerentry","holiday","leave","ledger","notification","salary"],V={attandence:[1,2,3,4],branch:[1,2,3,4],department:[1,2,3,4],employee:[1,2,3,4],ledgerentry:[1,2,3,4],holiday:[1,2,3,4],leave:[1,3,4],ledger:[1,2,3,4],notification:[1,2,3,4],salary:[1,2,3]},pe={employee:[1,2,3],attandence:[1,2,3],department:[1,2,3],holiday:[1,2],leave:[1,3],ledger:[1,2,3,4],ledgerentry:[1,2,3,4],notification:[1,2],salary:[1]};function xe(){const[c,k]=p.useState([]),[I,u]=p.useState([]),[h,i]=p.useState({name:"",email:"",password:"",role:"admin",profileImage:null,profilePreview:"",permissions:{...V}});p.useEffect(()=>{P()},[]);const w=p.useRef(null),{handleImage:C}=me(),[v,S]=p.useState(null),[n,g]=p.useState(!1),[E,N]=p.useState(""),[t,l]=p.useState(null),o=a=>{l(r=>r===a?null:a)},j=()=>{i({name:"",email:"",password:"",role:"admin",profileImage:null,profilePreview:"",permissions:{...V}}),N(""),S(null),g(!1)},B=async()=>{const a={...h};console.log(h);const r=new FormData;try{const m=a.profileImage?await C(300,a.profileImage):null;m&&r.append("photo",m),r.append("name",a.name),r.append("email",a.email),r.append("role",a.role),r.append("password",a.password),r.append("permissions",JSON.stringify(a.permissions));const M=localStorage.getItem("emstoken");u(!0);const O=v!==null?`/api/editAdmin/${c[v]._id}`:"/api/addAdmin",W=await T["post"](O,r,{headers:{Authorization:`Bearer ${M}`,"Content-Type":"multipart/form-data"}});b.success(W.data.message,{autoClose:1200}),console.log(W.data),j(),P()}catch(m){console.error(m),m.response?b.warn(m.response.data.message,{autoClose:1200}):b.error("Something went wrong",{autoClose:1200})}finally{u(!1)}},P=async()=>{try{const a=localStorage.getItem("emstoken"),r=await T.get("/api/getAdmin",{headers:{Authorization:`Bearer ${a}`}});console.log(r.data),k(r.data)}catch(a){console.error(a),a.response?b.warn(a.response.data.message,{autoClose:1200}):b.error("Something went wrong",{autoClose:1200})}finally{u(!1)}},_=a=>{const r=c[a];i({...r,profilePreview:r.profileImage||"",profileImage:null}),S(a),g(!0)},s=a=>{const r=c.filter((m,M)=>M!==a);k(r)},x=(a,r)=>{i(m=>{const M=m.permissions[a]||[],G=M.includes(r)?M.filter(W=>W!==r):[...M,r].sort();return{...m,permissions:{...m.permissions,[a]:G}}})},f=a=>{const r=a==="admin"?{...V}:{...pe};i({...h,role:a,permissions:r})},d=a=>{const r=a.target.files[0];r&&i(m=>({...m,profileImage:r,profilePreview:URL.createObjectURL(r)}))},A=()=>{E&&(i(a=>({...a,permissions:{...a.permissions,[E]:[]}})),N(""))},F=Array.from(new Set([...h.role==="admin"?H:Object.keys(h.permissions),...Object.keys(h.permissions)])),q=H.filter(a=>!F.includes(a));return e.jsxs("div",{className:"p-1 w-full",children:[e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-[16px] md:text-xl font-semibold",children:"Admin Management"}),e.jsx("button",{className:"bg-blue-600 text-white px-3 md:px-4 py-1 md:py-2 rounded hover:bg-blue-700",onClick:()=>{j(),g(!0)},children:"Add Admin"})]}),c.length===0?e.jsx("p",{className:"text-gray-500",children:"No admins added yet."}):e.jsx("div",{className:"space-y-3",children:c.map((a,r)=>e.jsxs("div",{className:"flex flex-col justify-between items-start border border-dashed p-2 rounded-md overflow-x-auto ",children:[e.jsxs("div",{className:"flex justify-between w-full  items-center  gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(U,{sx:{width:60,height:60},alt:a.name,src:a==null?void 0:a.profileImage}),e.jsxs("div",{children:[e.jsxs("p",{className:" capitalize text-[14px] md:text-[18px] font-medium",children:[a.name," (",a.role,")"]}),e.jsx("p",{className:"text-[12px] md:text-sm text-gray-500",children:a.email})]})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{className:"p-2 border rounded hover:bg-gray-100",onClick:()=>_(r),children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 border rounded text-red-600 hover:bg-red-50",onClick:()=>s(r),children:e.jsx(ne,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("button",{onClick:()=>o(r),className:"text-blue-600 cursor-pointer text-sm mt-1 ",children:t===r?"Hide Permissions":"View Permissions "}),t===r&&e.jsxs("div",{className:"text-sm w-full  mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Permissions:"}),e.jsxs("table",{className:"table-auto border-collapse border border-gray-300 mt-2 text-xs w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-2 py-1 text-left",children:"Module"}),Object.values($).map(m=>e.jsx("th",{className:"border border-gray-300 px-2 py-1",children:m},m))]})}),e.jsx("tbody",{children:Object.entries(a.permissions).map(([m,M])=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-2 py-1 font-semibold",children:m}),Object.keys($).map(O=>e.jsx("td",{className:"border border-gray-300 px-2 py-1 text-center",children:M.includes(Number(O))?"âœ…":"-"},O))]},m))})]})]})]})]},r))})]}),e.jsx(K,{open:n,onClose:()=>g(!1),children:e.jsx("div",{className:"membermodal",children:e.jsxs("form",{onSubmit:B,children:[e.jsxs("h2",{children:[" ",v!==null?"Edit Admin":"Add Admin"]}),e.jsxs("span",{className:"modalcontent",children:[e.jsxs("div",{className:"space-y-3 pt-1 flex items-center gap-4 flex-col w-[100%] md:w-[500px]",children:[e.jsxs("div",{className:"mt-1 items-center  w-fit relative",children:[e.jsx("input",{style:{display:"none"},type:"file",onChange:d,ref:w,accept:"image/*",name:"",id:"fileInput"}),e.jsx(U,{sx:{width:70,height:70},alt:h.name,src:h.profilePreview}),e.jsx("span",{onClick:()=>w.current.click(),className:"absolute -bottom-1 -right-1 rounded-full bg-teal-900 text-white p-1",children:e.jsx(oe,{size:18})})]}),e.jsx(y,{fullWidth:!0,required:!0,value:h.name,onChange:a=>i({...h,name:a.target.value}),label:"Name",size:"small"}),e.jsx(y,{fullWidth:!0,required:!0,value:h.email,onChange:a=>i({...h,email:a.target.value}),label:"Email",size:"small",helperText:"*Note - you can also use companyname as mail handler, e.g. xyz@companyname.com"}),e.jsx(y,{fullWidth:!0,required:!0,value:h.password,type:"password",onChange:a=>i({...h,password:a.target.value}),label:"Password",size:"small"}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"font-semibold block mb-1",children:"Role"}),e.jsxs("select",{className:"w-full border p-2 rounded",value:h.role,onChange:a=>f(a.target.value),children:[e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"manager",children:"Manager"})]})]}),h.role==="manager"&&e.jsxs("div",{className:"flex w-full items-center gap-2",children:[e.jsxs("select",{className:"border p-2 rounded w-full",value:E,onChange:a=>N(a.target.value),children:[e.jsx("option",{value:"",children:"-- Select Module to Add --"}),q.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsx("button",{onClick:A,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Add"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Permissions"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2 text-left",children:"Module"}),Object.entries($).map(([a,r])=>e.jsx("th",{className:"border p-2 text-center",children:r},a))]})}),e.jsx("tbody",{children:F.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"border p-2 capitalize",children:a}),Object.keys($).map(r=>{var m;return e.jsx("td",{className:"border text-center",children:e.jsx("input",{className:`h-3 w-3 md:h-5 md:w-5 cursor-pointer rounded-md border-2 border-gray-400 \r
                                                             checked:bg-teal-600 checked:border-teal-600 \r
                                                             focus:ring-2 focus:ring-teal-400 focus:outline-none \r
                                                             transition duration-200 ease-in-out`,type:"checkbox",checked:((m=h.permissions[a])==null?void 0:m.includes(Number(r)))||!1,onChange:()=>x(a,Number(r))})},r)})]},a))})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{className:"px-4 py-1 border rounded hover:bg-gray-100",onClick:j,children:"Cancel"}),e.jsx("button",{className:"px-4 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:B,children:v!==null?"Update":"Create"})]})]})]})})})]})}const J=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}];function We(){const[c,k]=p.useState(null),[I,u]=p.useState(!1),[h,i]=p.useState(!1),[w,C]=p.useState(!1),[v,S]=p.useState(null),[n,g]=p.useState({name:"",industry:"",officeTime:{in:"10:00",out:"18:00",breakMinutes:30},gracePeriod:{lateEntryMinutes:10,earlyExitMinutes:10},workingMinutes:{fullDay:480,halfDay:270,shortDayThreshold:360,overtimeAfterMinutes:490},weeklyOffs:[0],attendanceRules:{considerEarlyEntryBefore:"09:50",considerLateEntryAfter:"10:10",considerEarlyExitBefore:"17:50",considerLateExitAfter:"18:15"}}),{employee:E,company:N,branch:t,profile:l}=Q(s=>s.user),o=s=>{k(x=>x===s?null:s)};p.useEffect(()=>{console.log(l),N&&g(N)},[N]);const j=(s,x,f)=>{g(d=>({...d,[s]:{...d[s],[x]:f}}))},B=async()=>{try{C(!0);const s=localStorage.getItem("emstoken"),x=await T.post("/api/updateCompany",{...n},{headers:{Authorization:`Bearer ${s}`}});b.success(x.data.message,{autoClose:1800})}catch(s){console.log(s),s.response?b.warn(s.response.data.message,{autoClose:2700}):s.request?console.error("No response from server:",s.request):console.error("Error:",s.message)}finally{C(!1)}},P=()=>{},_=s=>{var f;console.log(s),u(!0);const x={...s,managerIds:(f=s==null?void 0:s.managerIds)==null?void 0:f.map(d=>d._id)};S(x),i(!0)};return e.jsxs("div",{className:"w-full mx-auto mt-1 p-1 py-2 md:p-6 bg-white rounded-xl shadow-md space-y-3 md:space-y-6",children:[(l==null?void 0:l.role)=="superadmin"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-blue-100 px-4 py-2 rounded-md",onClick:()=>o("company"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:"Company Info"}),c==="company"?e.jsx(z,{className:"text-xl"}):e.jsx(D,{className:"text-xl"})]}),c==="company"&&e.jsxs("div",{className:"p-4 rounded flex flex-col md:flex-row items-center border-blue-300 border-2 border-dashed mt-2 space-y-4",children:[e.jsx("div",{className:"relative flex items-center mx-auto",children:e.jsxs("div",{className:"relative w-30 h-30 mx-auto",children:[e.jsx("img",{src:(n==null?void 0:n.logo)||e.jsx(ce,{}),alt:"Company Logo",className:"w-full h-full object-fill rounded-2xl border-2 border-dashed border-blue-300"}),e.jsx("input",{type:"file",id:"logo-upload",accept:"image/*",onChange:async s=>{const x=s.target.files[0];if(!x)return;const f=new FormData;f.append("_id",n._id),f.append("logo",x);try{console.log("api calling"),C(!0);const d=localStorage.getItem("emstoken"),F=(await T.post("/api/updateCompany",f,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"multipart/form-data"}})).data.logoUrl;g(q=>({...q,logo:F})),b.success("Logo uploaded successfully!")}catch(d){console.error(d),b.error("Failed to upload logo.")}finally{C(!1)}},className:"hidden"}),e.jsx("label",{htmlFor:"logo-upload",className:"absolute w-8 h-8 text-center bottom-0 right-0 bg-white border border-gray-300 rounded-full p-1 cursor-pointer shadow-md",children:"âœŽ"})]})}),e.jsxs("div",{className:"w-full md:w-[70%] flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block",children:"Company Name"}),e.jsx("input",{type:"text",onChange:s=>g({...n,name:s.target.value}),value:n.name,className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block",children:"Industry"}),e.jsx("input",{type:"text",onChange:s=>g({...n,industry:s.target.value}),value:n.industry,className:"w-full border rounded px-3 py-2"})]}),N?e.jsx(L,{variant:"contained",loading:w,onClick:B,children:"Save Changes"}):e.jsx(L,{loading:w,variant:"contained",onClick:()=>he({companyinp:n,setisload:C}),children:"+ Create Company"})]})]})]}),((l==null?void 0:l.role)=="superadmin"||(l==null?void 0:l.role)=="admin")&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-green-100 px-4 py-2 rounded-md",onClick:()=>o("branches"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:"Branches"}),c==="branches"?e.jsx(z,{className:"text-xl"}):e.jsx(D,{className:"text-xl"})]}),c==="branches"&&e.jsxs("div",{className:"p-1 md:p-4 rounded overflow-auto  border-green-300 border-2 border-dashed mt-2 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-md font-medium",children:"Branch List"}),e.jsx("button",{onClick:()=>i(!0),className:"bg-green-500 text-white px-3 py-1 rounded",children:"+ Add Branch"})]}),e.jsxs("table",{className:"w-full capitalize text-[12px] md:text-sm border",children:[e.jsx("thead",{className:"bg-green-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border",children:"Name"}),e.jsx("th",{className:"p-2 border",children:"Location"}),e.jsx("th",{className:"p-2 border",children:"Manager(s)"}),e.jsx("th",{className:"p-2 border",children:"Actions"})]})}),e.jsxs("tbody",{children:[t&&t.map((s,x)=>{var f;return e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border",children:s.name}),e.jsx("td",{className:"p-2 border",children:s.location}),e.jsx("td",{className:"p-2 border capitalize",children:e.jsx("div",{className:"flex flex-col gap-2",children:(f=s==null?void 0:s.managerIds)==null?void 0:f.map((d,A)=>e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>P(d.userid),children:[e.jsx(U,{src:d==null?void 0:d.profileImage,alt:d.name,children:!(d!=null&&d.profileImage)&&e.jsx(Z,{})}),e.jsx("span",{children:d.name})]},A))})}),e.jsx("td",{className:"p-2 border",children:e.jsx("button",{onClick:()=>_(s),className:"bg-blue-500 text-white px-3 py-1 rounded",children:"Edit"})})]},x)}),!t&&e.jsx("div",{children:"No branch Found"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-teal-100 px-4 py-2 rounded-md",onClick:()=>o("department"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:"Department"}),c==="department"?e.jsx(z,{className:"text-xl"}):e.jsx(D,{className:"text-xl"})]}),c==="department"&&e.jsx("div",{className:"p-1 rounded  border-teal-300 border-2 border-dashed mt-2 space-y-4",children:e.jsx(de,{})})]}),(l==null?void 0:l.role)=="superadmin"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-teal-100 px-4 py-2 rounded-md",onClick:()=>o("admin"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:"Admin"}),c==="admin"?e.jsx(z,{className:"text-xl"}):e.jsx(D,{className:"text-xl"})]}),c==="admin"&&e.jsx("div",{className:"p-1 rounded  border-teal-300 border-2 border-dashed mt-2 ",children:e.jsx(xe,{})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-yellow-100 px-4 py-2 rounded-md",onClick:()=>o("attendance"),children:[e.jsx("span",{className:"font-semibold text-[16px] md:text-lg text-left",children:" Attendance Rules"}),c==="attendance"?e.jsx(z,{className:"text-xl"}):e.jsx(D,{className:"text-xl"})]}),c==="attendance"&&N&&e.jsxs(R,{className:" border-yellow-300  border-2 border-dashed rounded mt-1 p-2 ",children:[e.jsxs(R,{className:"mt-1 p-2 grid grid-cols-1 md:grid-cols-3 gap-5",children:[e.jsx(y,{label:"Office Time In",fullWidth:!0,type:"time",value:n.officeTime.in,onChange:s=>j("officeTime","in",s.target.value),helperText:"Time when office hours begin"}),e.jsx(y,{label:"Office Time Out",fullWidth:!0,type:"time",value:n.officeTime.out,onChange:s=>j("officeTime","out",s.target.value),helperText:"Time when office hours end"}),e.jsx(y,{label:"Break Minutes",fullWidth:!0,type:"number",value:n.officeTime.breakMinutes,onChange:s=>j("officeTime","breakMinutes",Number(s.target.value)),helperText:"Total break time allowed during the day"}),e.jsx(y,{label:"Full Day Minutes",fullWidth:!0,type:"number",value:n.workingMinutes.fullDay,onChange:s=>j("workingMinutes","fullDay",Number(s.target.value)),helperText:"Total working minutes required for a full day"}),e.jsx(y,{label:"Half Day Minutes",fullWidth:!0,type:"number",value:n.workingMinutes.halfDay,onChange:s=>j("workingMinutes","halfDay",Number(s.target.value)),helperText:"Minimum minutes required for marking a half-day"}),e.jsx(y,{label:"Short Day Threshold (min)",fullWidth:!0,type:"number",value:n.workingMinutes.shortDayThreshold,onChange:s=>j("workingMinutes","shortDayThreshold",Number(s.target.value)),helperText:"Below this time is considered a short day"}),e.jsx(y,{label:"Overtime After Minutes",fullWidth:!0,type:"number",value:n.workingMinutes.overtimeAfterMinutes,onChange:s=>j("workingMinutes","overtimeAfterMinutes",Number(s.target.value)),helperText:"Time after which overtime calculation begins"}),e.jsxs(Y,{fullWidth:!0,children:[e.jsx(ee,{children:"Weekly Offs"}),e.jsx(se,{multiple:!0,value:n.weeklyOffs,onChange:s=>g({...n,weeklyOffs:s.target.value}),input:e.jsx(ae,{label:"Weekly Offs"}),renderValue:s=>s.map(x=>{var f;return(f=J.find(d=>d.value===x))==null?void 0:f.label}).join(", "),children:J.map(s=>e.jsxs(te,{value:s.value,children:[e.jsx(re,{checked:n.weeklyOffs.includes(s.value)}),e.jsx(X,{primary:s.label})]},s.value))})]}),Object.entries(n.attendanceRules).map(([s,x])=>{const f=s.replace(/([A-Z])/g," $1").replace(/^./,A=>A.toUpperCase()),d={considerEarlyEntryBefore:"Considered early if punched before this time",considerLateEntryAfter:"Considered late if punched after this time",considerEarlyExitBefore:"Considered early exit if leaving before this time",considerLateExitAfter:"Considered late exit if leaving after this time"};return e.jsx(y,{fullWidth:!0,label:f,type:"time",value:x,onChange:A=>j("attendanceRules",s,A.target.value),helperText:d[s]},s)})]}),e.jsx(R,{sx:{mt:4,textAlign:"right"},children:e.jsx(L,{variant:"contained",onClick:B,children:"Update Settings"})})]})]}),e.jsx(K,{open:h,onClose:()=>{i(!1),S(null),u(!1)},children:e.jsx("div",{className:"membermodal",children:e.jsx(ue,{setopenviewmodal:i,editbranchdata:v,editbranch:I,company:N,employee:E})})})]})}export{We as default};
