import{c as Y,l as ne,y as I,r as d,j as e,G as fe,m as qe,n as ve,o as pe,h as Z,p as be,q as Ne,t as Te,v as Ue,w as Ge,x as Ye,z as He,D as ye,E as Ve,H as Je,J as Ke,K as Xe,L as Qe,P as Ze,u as es,g as ss,a as as,Q as ts,R as rs,U as we,V as ls,W as ns,A as Ce,X as P,T as ee,Y as is,b as n,i as se,Z as ds,F as M,I as B,S as F,M as g,O as Ae,C as Ie,B as z,_ as cs,$ as os,a0 as xs,a1 as hs,a2 as ms,a3 as ae,a4 as te,a5 as ke}from"./index-0qX7FfNS.js";import{I as Se}from"./index-BlvzrJlb.js";import{M as re}from"./Modalbox-Dm6IMw9I.js";import{B as us,P as gs,L as js}from"./index-CI4FRGWu.js";import{u as fs}from"./imageresizer-D4I-KFLq.js";import{C as le}from"./CheckPermission-B_KrReDG.js";const vs=[{name:"S.no",selector:c=>c.sno,width:"40px"},{name:"Name",selector:c=>c.name},{name:"Email",selector:c=>c.email},{name:"Department",selector:c=>c.department,width:"120px"},{name:"Action",selector:c=>c.action,width:"180px"}],ps=async({formData:c,dispatch:h,setisload:v,setInp:a,setopenmodal:x,init:p,resetPhoto:N})=>{const k=localStorage.getItem("emstoken");v(!0);try{const o=await Y.post("/api/addemployee",c,{headers:{Authorization:`Bearer ${k}`,"Content-Type":"multipart/form-data"}});I.success(o.data.message,{autoClose:1200}),a(p),N(),x(!1),h(ne())}catch(o){console.log(o),o.response?I.warn(o.response.data.message,{autoClose:1200}):console.error("Error:",o.message)}finally{v(!1)}},bs=async({formData:c,dispatch:h,setEmployeePhoto:v,setisload:a,setInp:x,setopenmodal:p,init:N})=>{const k=localStorage.getItem("emstoken");a(!0);try{const o=await Y.post("/api/updateemployee",c,{headers:{Authorization:`Bearer ${k}`}});I.success(o.data.message,{autoClose:1200}),v(null),x(N),p(!1),h(ne())}catch(o){console.log(o),o.response?I.warn(o.response.data.message,{autoClose:1200}):o.request?console.error("No response from server:",o.request):console.error("Error:",o.message)}finally{a(!1)}},Ns=async({employeeId:c,setisload:h,dispatch:v})=>{if(!c){alert("All fileds are Required");return}const a=localStorage.getItem("emstoken");h(!0);try{const x=await Y.post("/api/deleteemployee",{employeeId:c},{headers:{Authorization:`Bearer ${a}`}});v(ne()),I.success(x.data.message,{autoClose:1200})}catch(x){console.log(x),x.response?I.warn(x.response.data.message,{autoClose:1200}):x.request?console.error("No response from server:",x.request):console.error("Error:",x.message)}finally{h(!1)}},ws=({viewEmployee:c})=>{var k,o,T,H,W,S,_,U;const[h,v]=d.useState(!1),[a,x]=d.useState(null),[p,N]=d.useState(1);return d.useEffect(()=>{(async()=>{const R=localStorage.getItem("emstoken");v(!0);try{const j=await Y.get(`/api/getemployee?empid=${c}`,{headers:{Authorization:`Bearer ${R}`}});x(j.data)}catch(j){console.log(j),j.response?I.warn(j.response.data.message,{autoClose:1200}):j.request?console.error("No response from server:",j.request):console.error("Error:",j.message)}finally{v(!1)}})()},[]),e.jsx(e.Fragment,{children:h?e.jsxs("div",{className:"w-full h-[300px] flex gap-5 flex-col justify-center items-center bg-white",children:[e.jsxs("div",{className:"relative",children:[e.jsx(fe,{className:"animate-spin",style:{animationDuration:"2.5s"},size:50,color:"teal"}),e.jsx(fe,{className:"absolute -bottom-4 left-0 animate-spin",style:{animationDuration:"3s"},size:20,color:"teal"})]}),e.jsx("p",{className:"text-teal-600",children:"loading..."})]}):e.jsxs("div",{className:"max-w-3xl mx-auto bg-white flex flex-col shadow rounded-lg p-2 md:p-4 ",children:[e.jsx("h2",{className:"text-xl mx-auto font-semibold text-gray-700 mb-4",children:"Employee Details"}),e.jsxs("div",{className:"flex gap-4  pb-2 md:items-start",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full border-2 border-teal-500 border-dashed p-[2px] flex items-center justify-center overflow-hidden",children:a!=null&&a.profileimage?e.jsx("img",{src:a.profileimage,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):e.jsx(qe,{className:"text-3xl text-gray-500"})}),e.jsxs("div",{className:"md:flex-1 w-auto",children:[e.jsx("h3",{className:"text-l md:text-xl capitalize font-bold text-gray-800",children:(k=a==null?void 0:a.userid)==null?void 0:k.name}),e.jsx("p",{className:"text-sm capitalize text-gray-600",children:(o=a==null?void 0:a.userid)==null?void 0:o.role}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded",children:(T=a==null?void 0:a.department)==null?void 0:T.department}),e.jsx("span",{className:`px-2 py-0.5 ${a!=null&&a.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}  text-xs rounded`,children:a!=null&&a.status?"Active":"In Active"})]}),e.jsxs("div",{className:"hidden md:flex mt-3 justify-start flex-wrap text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(ve,{className:"text-gray-500 lowercase"})," ",(H=a==null?void 0:a.userid)==null?void 0:H.email]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(pe,{className:"text-gray-500"})," ",(a==null?void 0:a.phone)||"N/A"]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(be,{className:"text-gray-500"})," ",Z((W=a==null?void 0:a.userid)==null?void 0:W.createdAt).format("DD MMM, YYYY")]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Ne,{className:"text-gray-500"})," ID: emp0002"]})]})]})]}),e.jsxs("div",{className:"md:hidden mt-3 justify-start flex flex-wrap text-[12px] md:text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(ve,{className:"text-gray-500 lowercase"})," ",(S=a==null?void 0:a.userid)==null?void 0:S.email]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(pe,{className:"text-gray-500"})," ",(a==null?void 0:a.phone)||"N/A"]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(be,{className:"text-gray-500"})," ",Z((_=a==null?void 0:a.userid)==null?void 0:_.createdAt).format("DD MMM, YYYY")]}),e.jsxs("div",{className:"flex w-1/2 items-center gap-2",children:[e.jsx(Ne,{className:"text-gray-500"})," ID: emp0002"]})]}),e.jsxs("div",{className:"pt-1 capitalize",children:[e.jsxs("div",{className:"flex gap-2 md:gap-6 bg-slate-200 p-1 mt-2 text-[12px] md:text-sm font-medium text-gray-700",children:[e.jsx("div",{onClick:()=>N(1),className:`${p==1?"bg-white":"text-gray-400"} w-1/3 cursor-pointer py-1.5 text-center rounded`,children:"Personal Info"}),e.jsx("div",{onClick:()=>N(2),className:`${p==2?"bg-white":"text-gray-400"} w-1/3 cursor-pointer py-1.5 text-center rounded`,children:"Employment"}),e.jsx("div",{onClick:()=>N(3),className:`${p==3?"bg-white":"text-gray-400"} w-1/3 cursor-pointer py-1.5 text-center rounded`,children:"Documents & Skills"})]}),p==1&&e.jsxs("div",{className:"mt-2 grid grid-cols-2 max-h-[300px] overflow-y-auto md:grid-cols-2 gap-4 text-[12px] md:text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Te,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Date of Birth"}),e.jsx("div",{children:a!=null&&a.dob?Z(a==null?void 0:a.dob).format("DD MMM,YYYY"):"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ue,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Address"}),e.jsx("div",{children:(a==null?void 0:a.address)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ge,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Emergency Contact"}),e.jsx("div",{children:(a==null?void 0:a.Emergencyphone)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(us,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Blood Group"}),e.jsx("div",{children:(a==null?void 0:a.bloodGroup)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ye,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Adhaar No."}),e.jsx("div",{children:(a==null?void 0:a.adhaar)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(He,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Pan No."}),e.jsx("div",{children:(a==null?void 0:a.pan)||"N/A"})]})]})]}),p==2&&e.jsxs("div",{className:"mt-2 grid grid-cols-2 max-h-[300px] overflow-y-auto md:grid-cols-2 gap-4 text-[12px] md:text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(gs,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Position"}),e.jsx("div",{children:(a==null?void 0:a.designation)||"Accounts"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ye,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Department"}),e.jsx("div",{children:((U=a==null?void 0:a.department)==null?void 0:U.department)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Salary"}),e.jsx("div",{children:(a==null?void 0:a.salary)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Je,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Bank Name"}),e.jsx("div",{children:(a==null?void 0:a.bankName)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ke,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Account Holder"}),e.jsx("div",{children:(a==null?void 0:a.acHolderName)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Xe,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Branch"}),e.jsx("div",{children:(a==null?void 0:a.bankbranch)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Qe,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"A/C No."}),e.jsx("div",{children:(a==null?void 0:a.acnumber)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ze,{className:"mt-1 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Ifsc Code"}),e.jsx("div",{children:(a==null?void 0:a.ifscCode)||"N/A"})]})]})]}),p==3&&e.jsxs("div",{className:"mt-2 p-2 grid grid-cols-1 max-h-[300px] overflow-y-auto sm:grid-cols-2 gap-4 text-[12px] md:text-sm text-gray-700",children:[e.jsxs("div",{className:"rounded border border-gray-300 bg-white p-2 md:p-4 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Education"}),a.education.length>0?a.education.map(m=>e.jsxs("div",{className:"relative my-1 pl-2 rounded overflow-hidden",children:[e.jsx("p",{className:"text-gray-700 font-semibold",children:m.degree}),e.jsx("p",{className:"text-gray-700",children:m.institution}),e.jsx("p",{className:"text-gray-500 text-[10px]",children:m.date}),e.jsx("span",{className:"absolute w-0.5 h-full bg-amber-800 top-0 left-0"})]})):e.jsx("div",{children:"No Data found"})]}),e.jsxs("div",{className:"rounded border border-gray-300 bg-white p-2 md:p-4 flex flex-col gap-1",children:[e.jsx("h3",{className:"font-bold",children:"Achievement"}),a.achievements.length>0?a.achievements.map(m=>e.jsxs("div",{className:"relative my-1 pl-5 rounded overflow-hidden",children:[e.jsx("p",{className:"text-gray-700 font-semibold",children:m.title}),e.jsx("p",{className:"text-gray-700",children:m.description}),e.jsx("p",{className:"text-gray-500 text-[10px]",children:m.date}),e.jsxs("span",{className:"absolute top-1 -left-0",children:[" ",e.jsx(js,{size:18,color:"orange"})," "]}),e.jsx("span",{className:"absolute w-0.5 h-full bg-blue-500 top-0 right-0"})]})):e.jsx("div",{children:"No Achievement found"})]})]})]})]})})},Ds=()=>{var ge,je;const[c,h]=d.useState(!1),[v,a]=d.useState(!1),[x,p]=d.useState([]),[N,k]=d.useState([]),[o,T]=d.useState(!1),[H,W]=d.useState(!1),[S,_]=d.useState(!1),[U,m]=d.useState(null),[R,j]=d.useState(null),[ze,Ee]=d.useState(null),[$,De]=d.useState(null),{handleImage:ie}=fs(),J=es(),{department:L,branch:O,employee:E,profile:Cs}=ss(s=>s.user),[y,K]=d.useState({userid:"",pass:""}),[f,de]=d.useState({searchText:"",branch:"all",department:"all"}),ce="https://res.cloudinary.com/dusxlxlvm/image/upload/v1753113610/ems/assets/employee_fi3g5p.webp";d.useEffect(()=>{de(s=>({...s,department:"all"}))},[f.branch]);let Pe=as();const G={employeeId:"",branchId:"",department:"",employeeName:"",email:"",designation:"",phone:"",address:"",gender:"male",bloodGroup:"",status:!0,dob:"",Emergencyphone:"",skills:[],maritalStatus:!0,salary:0,acHolderName:"",bankName:"",bankbranch:"",acnumber:"",ifscCode:"",upi:"",adhaar:"",pan:"",achievements:[],education:[]},[l,A]=d.useState(G);d.useEffect(()=>{L.length>0&&k(L.filter(s=>{var r;return((r=s==null?void 0:s.branchId)==null?void 0:r._id)==f.branch}))},[f.branch]);const q=(s,r,t,u)=>{const b=[...l[r]];b[t][u]=s.target.value,A(w=>({...w,[r]:b}))},oe=s=>{const r=s==="achievements"?{title:"",description:"",date:""}:{degree:"",institution:"",date:""};A(t=>({...t,[s]:[...t[s],r]}))},xe=(s,r)=>{const t=l[s].filter((u,b)=>b!==r);A(u=>({...u,[s]:t}))},Me=le("employee",2),he=le("employee",3),Be=le("employee",4);d.useEffect(()=>{if((E==null?void 0:E.length)<1)return;let s=1;const r=E==null?void 0:E.map(t=>{var u,b,w,C,D;return{id:t._id,sno:s++,rawname:(u=t==null?void 0:t.userid)==null?void 0:u.name,name:e.jsxs("div",{className:"flex items-center capitalize gap-3 ",children:[e.jsx(Ce,{src:t.profileimage||ce,alt:t.employeename,children:!t.profileimage&&ce}),e.jsxs(P,{children:[e.jsx(ee,{variant:"body2",children:(b=t==null?void 0:t.userid)==null?void 0:b.name}),e.jsxs("p",{className:"t text-[10px] text-gray-600",children:["(",t==null?void 0:t.designation,")"]})]})]}),email:(w=t==null?void 0:t.userid)==null?void 0:w.email,branch:t==null?void 0:t.branchId,department:(C=t==null?void 0:t.department)==null?void 0:C.department,departmentid:(D=t==null?void 0:t.department)==null?void 0:D._id,action:e.jsxs("div",{className:"action flex gap-2.5",children:[e.jsx("span",{className:"eye edit text-[18px] text-green-500 cursor-pointer",title:"View Profile",onClick:()=>{Ee(t._id),T(!0)},children:e.jsx(ts,{})}),e.jsx("span",{className:"eye edit text-[18px] text-amber-500 cursor-pointer",title:"Attandence Report",onClick:()=>Pe(`/dashboard/performance/${t.userid._id}`),children:e.jsx(rs,{})}),he&&e.jsx("span",{className:"edit text-[18px] text-blue-500 cursor-pointer",title:"Edit",onClick:()=>$e(t),children:e.jsx(we,{})}),he&&e.jsxs("span",{className:"eye edit text-[18px] text-green-500 cursor-pointer",title:"Reset Password",onClick:()=>{K({...y,userid:t.userid._id}),W(!0)},children:[e.jsx(ls,{})," "]}),Be&&e.jsx("span",{className:"delete text-[18px] text-red-500 cursor-pointer",onClick:()=>Le(t._id),children:e.jsx(ns,{})})]})}});p(r)},[E]);const i=(s,r)=>{A({...l,[r]:s.target.value})},X=(s,r)=>{de(t=>({...t,[s]:r}))},Fe=s=>{const r=s.target.files[0];if(j(r),r){const t=new FileReader;t.onloadend=()=>{m(t.result)},t.readAsDataURL(r)}else m(null)},We=async s=>{s.preventDefault();const r=new FormData;if(r.append("employeeName",l.employeeName),r.append("branchId",l.branchId),r.append("department",l.department),r.append("email",l.email),r.append("designation",l.designation),r.append("salary",l.salary),R){let t=await ie(300,R);r.append("photo",t)}await ps({formData:r,dispatch:J,setisload:a,setInp:A,setopenmodal:h,init:G,resetPhoto:V})},_e=async()=>{const s=new FormData;if(Object.keys(l).forEach(r=>{const t=l[r];Array.isArray(t)||typeof t=="object"?s.append(r,JSON.stringify(t)):s.append(r,t)}),R){let r=await ie(300,R);s.append("photo",r)}await bs({formData:s,dispatch:J,setisload:a,setEmployeePhoto:j,setInp:A,setopenmodal:h,init:G,resetPhoto:V}),m(null),j(null)},V=()=>{m(null),j(null)},Re=async s=>{s.preventDefault();try{const r=localStorage.getItem("emstoken"),t=await Y.post("/api/updatepassword",{pass:y},{headers:{Authorization:`Bearer ${r}`}});K({userid:"",pass:""}),W(!1),I.success(t.data.message,{autoClose:1200})}catch(r){console.log(r),r.response?I.warn(r.response.data.message,{autoClose:1200}):r.request?console.error("No response from server:",r.request):console.error("Error:",r.message)}},$e=s=>{var r,t,u;_(!0),A({employeeId:s._id,branchId:s==null?void 0:s.branchId,department:(r=s==null?void 0:s.department)==null?void 0:r._id,employeeName:(t=s==null?void 0:s.userid)==null?void 0:t.name,email:(u=s==null?void 0:s.userid)==null?void 0:u.email,dob:s==null?void 0:s.dob,salary:s==null?void 0:s.salary,status:s==null?void 0:s.status,acHolderName:s==null?void 0:s.acHolderName,bankName:s==null?void 0:s.bankName,bankbranch:s==null?void 0:s.bankbranch,acnumber:s==null?void 0:s.acnumber,ifscCode:s==null?void 0:s.ifscCode,upi:s==null?void 0:s.upi,adhaar:s==null?void 0:s.adhaar,pan:s==null?void 0:s.pan,designation:s==null?void 0:s.designation,phone:s==null?void 0:s.phone,address:(s==null?void 0:s.address)||"",gender:(s==null?void 0:s.gender)||"male",bloodGroup:s==null?void 0:s.bloodGroup,Emergencyphone:s==null?void 0:s.Emergencyphone,skills:s==null?void 0:s.skills,maritalStatus:(s==null?void 0:s.maritalStatus)||!0,achievements:s==null?void 0:s.achievements,education:s==null?void 0:s.education}),s.profileimage&&m(s.profileimage),h(!0)},Le=s=>{is({title:"Are you sure?",text:"Once deleted, you will not be able to recover this",icon:"warning",buttons:!0,dangerMode:!0}).then(async r=>{r&&Ns({employeeId:s,setisload:a,dispatch:J})})},me=d.useRef(null),ue=x==null?void 0:x.filter(s=>{var D;const r=((D=s.rawname)==null?void 0:D.toLowerCase())||"",t=s.departmentid||"",u=s.branch||"",b=f.searchText.trim()===""||r.includes(f.searchText.toLowerCase()),w=f.department==="all"||t===f.department,C=f.branch==="all"||u===f.branch;return b&&w&&C}),Oe=()=>{const s=["S.No","Name","Email","Department"],r=ue.map((C,D)=>[D+1,C.rawname,C.email,C.department]),t=[s,...r].map(C=>C.join(",")).join(`
`),u=new Blob([t],{type:"text/csv"}),b=URL.createObjectURL(u),w=document.createElement("a");w.href=b,w.download="Employee List.csv",w.click(),URL.revokeObjectURL(b)},Q=s=>{De(r=>r===s?null:s)};return e.jsxs("div",{className:"employee p-1",children:[e.jsxs("div",{className:"flex gap-5 justify-between items-center flex-wrap",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-1 w-full md:w-fit",children:[e.jsx(n,{size:"small",className:"md:col-span-1 md:max-w-[160px] col-span-2",value:f.searchText,onChange:s=>X("searchText",s.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(ds,{})})},label:"Search Employee"}),e.jsxs(M,{size:"small",className:" md:max-w-[160px] col-span-1",children:[e.jsx(B,{children:"Branch"}),e.jsxs(F,{label:"Branch",value:f.branch,input:e.jsx(Ae,{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ie,{fontSize:"small"})}),label:"Branch"}),onChange:s=>X("branch",s.target.value),children:[e.jsx(g,{value:"all",children:"All"}),O==null?void 0:O.map(s=>e.jsx(g,{value:s._id,children:s.name},s._id))]})]}),e.jsxs(M,{size:"small",className:" md:max-w-[160px] col-span-1",children:[e.jsx(B,{children:"Department"}),e.jsxs(F,{label:"Department",disabled:f.branch==="all",value:f.department,input:e.jsx(Ae,{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ie,{fontSize:"small"})}),label:"Department"}),onChange:s=>X("department",s.target.value),children:[e.jsx(g,{value:"all",children:"All"}),N.length>0?N.map(s=>e.jsx(g,{value:s._id,children:s.department},s._id)):e.jsx(g,{disabled:!0,children:"No departments found"})]})]})]}),e.jsxs("div",{className:"flex gap-1 w-full md:w-fit",children:[e.jsx(z,{variant:"outlined",className:"flex-1 md:w-fit md:flex-none",onClick:Oe,startIcon:e.jsx(cs,{}),children:"Export"}),Me&&e.jsx(z,{variant:"contained",className:"flex-[2] md:w-fit md:flex-none",startIcon:e.jsx(os,{}),onClick:()=>h(!0),children:"Add Employee"})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(xs,{columns:vs,data:ue,pagination:!0,customStyles:hs(),highlightOnHover:!0,paginationPerPage:20,paginationRowsPerPageOptions:[20,50,100,300],noDataComponent:e.jsxs("div",{className:"flex items-center gap-2 py-6 text-center text-gray-600 text-sm",children:[e.jsx(ms,{className:"text-xl"})," No Employee records found."]})})}),e.jsx(re,{open:c,onClose:()=>{h(!1),_(!1),A(G),V()},children:e.jsx("div",{className:"membermodal",children:e.jsx("div",{className:"whole",children:e.jsxs("form",{onSubmit:We,children:[e.jsx("div",{className:"modalhead",children:S?"Update Employee":"Add Employee"}),e.jsxs("span",{className:"modalcontent ",children:[e.jsxs(M,{fullWidth:!0,required:!0,size:"small",children:[e.jsx(B,{children:"Branch"}),e.jsx(F,{value:l.branchId,label:"branch",onChange:s=>i(s,"branchId"),children:O==null?void 0:O.map(s=>e.jsx(g,{value:s._id,children:s.name},s._id))})]}),e.jsxs(M,{disabled:!l.branchId,fullWidth:!0,required:!0,size:"small",children:[e.jsx(B,{children:"Department"}),e.jsx(F,{value:l.department,label:"Department",onChange:s=>i(s,"department"),children:(L==null?void 0:L.filter(s=>{var r;return((r=s.branchId)==null?void 0:r._id)===l.branchId}).length)>0?L.filter(s=>s.branchId._id===l.branchId).map(s=>e.jsx(g,{value:s._id,children:s.department},s._id)):e.jsx(g,{disabled:!0,children:"No departments found"})})]}),e.jsxs(M,{disabled:!l.branchId,fullWidth:!0,required:!0,size:"small",children:[e.jsx(B,{children:"Status"}),e.jsxs(F,{value:l==null?void 0:l.status,label:"Status",onChange:s=>i(s,"status"),children:[e.jsx(g,{value:!0,children:"Active"}),e.jsx(g,{value:!1,children:"Inactive"})]})]}),e.jsxs(P,{sx:{width:"100%",gap:2},children:[e.jsx(n,{fullWidth:!0,required:!0,value:l.employeeName,onChange:s=>i(s,"employeeName"),label:"Name",size:"small"}),e.jsx(n,{fullWidth:!0,required:!0,value:l.email,onChange:s=>i(s,"email"),label:"Email",size:"small"})]}),e.jsxs(P,{sx:{width:"100%",gap:2},children:[e.jsx(n,{fullWidth:!0,value:l.designation,onChange:s=>i(s,"designation"),label:"Designation",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.salary,onChange:s=>i(s,"salary"),label:"Salary",size:"small"})]}),e.jsxs("div",{className:"mt-1 gap-2 flex items-center relative",children:[e.jsx("input",{style:{display:"none"},type:"file",onChange:Fe,ref:me,accept:"image/*",name:"",id:"fileInput"}),U?e.jsx("img",{src:U,alt:"Preview",className:"mt-2 w-[100px] h-[100px] rounded-full object-cover"}):e.jsx(Ce,{sx:{width:100,height:100},alt:l.employeeName,src:"/static/images/avatar/1.jpg"}),e.jsx("span",{onClick:()=>me.current.click(),className:"absolute -bottom-1 -right-1 rounded-full bg-teal-900 text-white p-1",children:e.jsx(we,{size:18})})]}),S&&e.jsxs("div",{className:"border flex flex-col w-full shadow-lg bg-slate-50 border-dashed border-slate-400 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-primary text-white px-4 py-2 rounded-md",onClick:()=>Q("personal"),children:[e.jsx("span",{className:"md:font-semibold text-[12px] md:text-sm text-left",children:"Personal Deatils (Optional)"}),$==="personal"?e.jsx(ae,{className:"text-xl"}):e.jsx(te,{className:"text-xl"})]}),e.jsx("div",{className:`
                          rounded overflow-hidden transition-all duration-300 ease-linear
                          ${$==="personal"?"max-h-[500px] p-2 my-2":"max-h-0 p-0 my-0"}
                        `,children:e.jsxs(P,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsx(n,{fullWidth:!0,value:l.phone,onChange:s=>i(s,"phone"),label:"Phone",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.Emergencyphone,onChange:s=>i(s,"Emergencyphone"),label:"Emergency/ Relative Phone",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.address,onChange:s=>i(s,"address"),label:"Address",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.bloodGroup,onChange:s=>i(s,"bloodGroup"),label:"Blood Group",size:"small"}),e.jsx(n,{fullWidth:!0,inputProps:{maxLength:12},value:l.adhaar,onChange:s=>i(s,"adhaar"),label:"Adhaar No.",size:"small"}),e.jsx(n,{fullWidth:!0,inputProps:{maxLength:10},value:l.pan,onChange:s=>i(s,"pan"),label:"Pan No.",size:"small"}),e.jsx(n,{InputLabelProps:{shrink:!0},fullWidth:!0,value:l.dob,type:"date",onChange:s=>i(s,"dob"),label:"Date of Birth",size:"small"}),e.jsxs(M,{size:"small",children:[e.jsx(B,{children:"Marital Status"}),e.jsxs(F,{label:"maritalStatus",value:l.maritalStatus,onChange:s=>i(s,"maritalStatus"),children:[e.jsx(g,{selected:!0,value:!0,children:"Married"}),e.jsx(g,{selected:!0,value:!1,children:"Unmarried"})]})]}),e.jsxs(M,{size:"small",children:[e.jsx(B,{children:"Gender"}),e.jsxs(F,{label:"Gender",value:l.gender,onChange:s=>i(s,"gender"),children:[e.jsx(g,{selected:!0,value:"male",children:"Male"}),e.jsx(g,{selected:!0,value:"female",children:"female"})]})]})]})})]}),S&&e.jsxs("div",{className:"border flex flex-col w-full shadow-lg bg-slate-50 border-dashed border-slate-400 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-primary text-white px-4 py-2 rounded-md",onClick:()=>Q("banking"),children:[e.jsx("span",{className:"md:font-semibold text-[12px] md:text-sm text-left",children:"Banking Details (optional)"}),$==="banking"?e.jsx(ae,{className:"text-xl"}):e.jsx(te,{className:"text-xl"})]}),e.jsx("div",{className:`
                          rounded overflow-hidden transition-all duration-300 ease-linear
                          ${$==="banking"?"max-h-[500px] p-2 my-2":"max-h-0 p-0 my-0"}
                        `,children:e.jsxs(P,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[e.jsx(n,{fullWidth:!0,value:l.acHolderName,onChange:s=>i(s,"acHolderName"),label:"A/C Holder Name",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.bankName,onChange:s=>i(s,"bankName"),label:"Bank Name",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.bankbranch,onChange:s=>i(s,"bankbranch"),label:"Branch",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.acnumber,onChange:s=>i(s,"acnumber"),label:"A/C No.",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.ifscCode,onChange:s=>i(s,"ifscCode"),label:"IFSC Code",size:"small"}),e.jsx(n,{fullWidth:!0,value:l.upi,onChange:s=>i(s,"upi"),label:"Upi Id/No.",size:"small"})]})})]}),S&&e.jsxs("div",{className:"border flex flex-col w-full shadow-lg bg-slate-50 border-dashed border-slate-400 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer bg-primary text-white px-4 py-2 rounded-md",onClick:()=>Q("document"),children:[e.jsx("span",{className:"md:font-semibold text-[12px] md:text-sm text-left",children:"Document & Skills (optional)"}),$==="document"?e.jsx(ae,{className:"text-xl"}):e.jsx(te,{className:"text-xl"})]}),e.jsxs("div",{className:`
                          rounded overflow-hidden transition-all duration-300 ease-linear flex gap-6 flex-col
                          ${$==="document"?"max-h-[500px] p-2 my-2":"max-h-0 p-0 my-0"}
                        `,children:[e.jsxs("div",{className:" flex flex-col gap-2",children:[e.jsx(ee,{fontWeight:"bold",children:"Achievements"}),(ge=l==null?void 0:l.achievements)==null?void 0:ge.map((s,r)=>e.jsxs(P,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",gap:2,alignItems:"center"},children:[e.jsx(n,{label:"Title",size:"small",value:s.title,onChange:t=>q(t,"achievements",r,"title")}),e.jsx(n,{label:"Description",size:"small",value:s.description,onChange:t=>q(t,"achievements",r,"description")}),e.jsx(n,{type:"date",size:"small",label:"Date",InputLabelProps:{shrink:!0},value:s.date,onChange:t=>q(t,"achievements",r,"date")}),e.jsx(ke,{size:24,title:"Delete this",onClick:()=>xe("achievements",r)})]},r)),e.jsx(z,{onClick:()=>oe("achievements"),variant:"outlined",children:"Add Achievement"})]}),e.jsxs("div",{className:" flex flex-col gap-2",children:[e.jsx(ee,{fontWeight:"bold",children:"Education"}),(je=l==null?void 0:l.education)==null?void 0:je.map((s,r)=>e.jsxs(P,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",gap:2,alignItems:"center"},children:[e.jsx(n,{label:"Degree",size:"small",value:s.degree,onChange:t=>q(t,"education",r,"degree")}),e.jsx(n,{label:"Institution",size:"small",value:s.institution,onChange:t=>q(t,"education",r,"institution")}),e.jsx(n,{type:"date",size:"small",label:"Date",InputLabelProps:{shrink:!0},value:s.date,onChange:t=>q(t,"education",r,"date")}),e.jsx(ke,{size:24,title:"Delete this",onClick:()=>xe("education",r)})]},r)),e.jsx(z,{onClick:()=>oe("education"),variant:"outlined",children:"Add Education"})]})]})]})]}),e.jsxs("div",{className:"modalfooter",children:[e.jsx(z,{size:"small",onClick:()=>{h(!1),_(!1),A(G),V()},variant:"outlined",children:"Cancel"}),S?e.jsx(z,{sx:{mr:2},loading:v,loadingPosition:"end",endIcon:e.jsx(Se,{}),variant:"contained",onClick:_e,children:"Update"}):e.jsx(z,{sx:{mr:2},loading:v,loadingPosition:"end",endIcon:e.jsx(Se,{}),variant:"contained",type:"submit",children:"Add"})]})]})})})}),e.jsx(re,{open:o,onClose:()=>{T(!1)},children:e.jsx("div",{className:"membermodal",children:e.jsx(ws,{viewEmployee:ze})})}),e.jsx(re,{open:H,onClose:()=>{W(!1)},children:e.jsx("div",{className:"membermodal",children:e.jsxs("form",{onSubmit:Re,children:[e.jsx("h2",{children:"Reset Passowrd"}),e.jsxs("span",{className:"modalcontent ",children:[e.jsx(n,{fullWidth:!0,required:!0,value:y.pass,onChange:s=>K({...y,pass:s.target.value}),label:"Passowrd",size:"small"}),e.jsx(z,{variant:"contained",sx:{mr:2},type:"submit",children:"Reset Password"})]})]})})})]})};export{Ds as default};
