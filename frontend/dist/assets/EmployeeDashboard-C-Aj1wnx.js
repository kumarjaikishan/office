import{r as m,k as v,j as e,n as N,o as b,p as D,Q as C,R as w,f as E}from"./index-CleMBIBn.js";import{H as M}from"./holidayCalander-BoSARFpY.js";import{d as h}from"./dayjs.min-DSKahEwl.js";import{B as g}from"./Button-CoB3H69l.js";import{I as y}from"./IconButton-D4KmSlhp.js";import{B as k,E as S,F as O,G as A,H as B}from"./dateViewRenderers-0RYz08Yo.js";import{T as I}from"./Typography-CcZCxKTQ.js";import{T as f}from"./TextField-DiABiCHh.js";import{M as j}from"./MenuItem-DOZMs1J2.js";import"./AdapterDateFns-B7svWd75.js";import"./Box-DxCvFchx.js";import"./useSlotProps-BIGTSc1Y.js";import"./ButtonBase-CbJsO36x.js";import"./Tooltip-Dz04ysW2.js";import"./Select-D3hz-9Ri.js";import"./createSimplePaletteValueFilter-BYlBxWKv.js";import"./Popper-B5MW3hMa.js";import"./index-CXJKyJbC.js";import"./useThemeProps-BV0FlUHH.js";const R=r=>{const{classes:a}=r;return D({root:["root"]},S,a)},H=N(I,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),P=m.forwardRef(function(a,o){const c=v({props:a,name:"MuiDialogTitle"}),{className:u,id:i,...x}=c,s=c,n=R(s),{titleId:l=i}=m.useContext(k);return e.jsx(H,{component:"h2",className:b(n.root,u),ownerState:s,ref:o,variant:"h6",id:i??l,...x})}),U=["All","Staff","Manager","HR"],W=["Holiday","Policy","Event","Urgent"],Y=({notices:r=[],onDelete:a,onSave:o})=>{const[c,u]=m.useState(!1),[i,x]=m.useState(null),[s,n]=m.useState({title:"",date:"",employeeType:"",noticeType:""}),l=(t=null)=>{x(t),n(t?{title:t.title,date:t.date,employeeType:t.employeeType,noticeType:t.noticeType}:{title:"",date:"",employeeType:"",noticeType:""}),u(!0)},d=()=>{x(null),u(!1)},p=()=>{o&&o({...s,id:(i==null?void 0:i.id)||Date.now()}),d()};return e.jsxs("div",{className:"bg-white h-full shadow-lg rounded-lg p-4 w-full md:w-[350px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 border-b pb-1",children:[e.jsx("h3",{className:"text-lg font-bold",children:"ðŸ“Œ Official Notices"}),e.jsx(g,{size:"small",variant:"contained",onClick:()=>l(),children:"Add"})]}),r!=null&&r.length?e.jsx("ul",{className:"space-y-2 text-sm h-[300px] overflow-y-auto",children:r.map((t,T)=>e.jsxs("li",{className:"border-l-4 border-blue-500 pl-2 relative group",children:[e.jsx("p",{className:"font-semibold",children:t.title}),e.jsx("p",{className:"text-gray-600 text-xs",children:t.date}),e.jsxs("div",{className:"absolute right-1 top-1 hidden group-hover:flex gap-1",children:[e.jsx(y,{size:"small",onClick:()=>l(t),children:e.jsx(C,{className:"text-blue-500"})}),e.jsx(y,{size:"small",onClick:()=>a&&a(t.id),children:e.jsx(w,{className:"text-red-500"})})]})]},T))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No official notices available."}),e.jsxs(O,{open:c,onClose:d,children:[e.jsx(P,{children:i?"Edit Notice":"Add Notice"}),e.jsxs(A,{className:"flex flex-col gap-4 mt-2",children:[e.jsx(f,{label:"Notice Title",fullWidth:!0,value:s.title,onChange:t=>n({...s,title:t.target.value})}),e.jsx(f,{label:"Date",type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:s.date,onChange:t=>n({...s,date:t.target.value})}),e.jsx(f,{select:!0,label:"Type of Employee",fullWidth:!0,value:s.employeeType,onChange:t=>n({...s,employeeType:t.target.value}),children:U.map(t=>e.jsx(j,{value:t,children:t},t))}),e.jsx(f,{select:!0,label:"Type of Notice",fullWidth:!0,value:s.noticeType,onChange:t=>n({...s,noticeType:t.target.value}),children:W.map(t=>e.jsx(j,{value:t,children:t},t))})]}),e.jsxs(B,{children:[e.jsx(g,{onClick:d,children:"Cancel"}),e.jsx(g,{variant:"contained",onClick:p,children:i?"Update":"Add"})]})]})]})},ie=()=>{const{attendance:r,companysetting:a,holiday:o}=E(l=>l.employee),[c,u]=m.useState(null),i=(a==null?void 0:a.weeklyOffs)||[1];m.useEffect(()=>{x()},[o]);const x=()=>{const l=[];o==null||o.forEach(d=>{let p=h(d.fromDate);const t=d.toDate?h(d.toDate):p;for(;p.isSameOrBefore(t,"day");)l.push({date:p.format("MM/DD/YYYY"),name:d.name}),p=p.add(1,"day")}),u(l)},s=c==null?void 0:c.map(l=>({date:h(l.date).toDate(),name:l.name})),n=[{title:"Annual General Meeting on Sep 10",date:"2025-08-01"},{title:"New ID Cards to be issued by next week",date:"2025-07-30"},{title:"Office renovation starts next Monday",date:"2025-07-28"}];return e.jsx("div",{className:"p-2 md:p-3 lg:p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:" ",children:e.jsx(M,{highlightedDates:s,weeklyOffs:i})}),e.jsx("div",{className:" ",children:e.jsx(Y,{notices:n})})]})})};export{ie as default};
