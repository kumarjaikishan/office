import{r as l,j as e,aj as w,a as g,at as x,y as i}from"./index-CleMBIBn.js";import{T as m}from"./TextField-DiABiCHh.js";import{B as j}from"./Button-CoB3H69l.js";import"./createSimplePaletteValueFilter-BYlBxWKv.js";import"./Select-D3hz-9Ri.js";import"./useSlotProps-BIGTSc1Y.js";import"./ButtonBase-CbJsO36x.js";let p=!1;const v=()=>{p||(console.warn(["MUI: The LoadingButton component functionality is now part of the Button component from Material UI.","","You should use `import Button from '@mui/material/Button'`","or `import { Button } from '@mui/material'`"].join(`
`)),p=!0)},b=l.forwardRef(function(o,s){return v(),e.jsx(j,{ref:s,...o})}),k=()=>{const{token:d}=w(),o=g(),[s,u]=l.useState({pass:"",cpass:""}),[h,n]=l.useState(!1),c=r=>{const{name:t,value:a}=r.target;u({...s,[t]:a})},f=async r=>{r.preventDefault();try{n(!0);const t=await fetch(`/api/setpassword?token=${d}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:s.pass})}),a=await t.json();if(n(!1),!t.ok)return i.warn(a.message,{autoClose:2100});i.success(a.message,{autoClose:1600}),o("/logout")}catch(t){i.warn(t.message,{autoClose:2100}),n(!1)}};return e.jsx("div",{className:"w-full p-2 md:p-4 h-[calc(100vh-64px)] bg-white grid place-items-center",children:e.jsxs("div",{className:" w-full md:w-[300px] rounded-xl overflow-hidden shadow-md",children:[e.jsx("h2",{className:"w-full h-10 leading-10 tracking-wide text-white pl-3 bg-teal-600",children:"Reset Password"}),e.jsxs("form",{onSubmit:f,className:"w-full flex flex-col items-center p-4",children:[e.jsx(m,{required:!0,type:"password",name:"pass",onChange:c,value:s.pass,sx:{width:"98%",mt:2,mb:2},label:"Password",variant:"outlined"}),e.jsx(m,{required:!0,name:"cpass",onChange:c,value:s.cpass,error:s.cpass.length?s.pass!==s.cpass:!1,helperText:s.cpass.length&&s.pass!==s.cpass?"Password must be same":"",sx:{width:"98%",mt:2,mb:2},label:"Confirm Password",variant:"outlined"}),e.jsx(b,{loading:h,disabled:s.pass!==s.cpass||!s.pass.length,loadingPosition:"start",sx:{width:"98%",mt:2,mb:2},startIcon:e.jsx(x,{}),variant:"outlined",type:"submit",children:"Change Password"})]})]})})};export{k as default};
